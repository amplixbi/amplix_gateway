IG$._FC_datagrid=$s.extend(IG$._baseFC,{objtype:"datagrid",events:[{name:"actionClicked",params:[{name:"view",type:"object"},{name:"action",type:"string"},{name:"record",type:"record",label:"record"},{name:"rowindex",type:"integer",label:"rowIndex"},{name:"colindex",type:"integer",label:"columnIndex"}]},{name:"cellclick",params:[{name:"view",type:"object"},{name:"node",type:"object"},{name:"colindex",type:"integer",label:"columnIndex"},{name:"record",type:"record",label:"record"},{name:"rowindex",type:"integer",label:"rowIndex"}]}],properties:[{name:"columns",type:"columns"},{name:"height",type:"integer"}],resize:function(){var e,t,n=this,i=n.ui,a=n.datagrid;i&&(e=i.innerWidth(),t=i.innerHeight(),e&&t&&(e!=n._pw||t!=n._ph)&&(a.setSize(e,t),n._pw=e,n._ph=t))},create:function(e){var t,n=this,i=n.fmodel;n.fitem,n.mcap,i.title;return t=$("<div class='df-datagrid'></div>").appendTo(e),n.datagrid=new IG$.v$pnl({instance:n.instance,renderTo:t[0],layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"m_grid",store:{},flex:1,columns:[]}],listeners:{cellclick:function(e,t,i,a,o,r){n.trigger("cellclick",{view:e,node:t,colindex:i,record:a,rowindex:o,event:r})},scope:n}}),n.ui=t,n.set_height(),setTimeout((function(){n.set_columns()}),10),t},set_columns:function(){var e=this,t=e.fmodel,n=e.datagrid.down("[name=m_grid]"),i=[];e._has_deep_idx=[],$.each(t.columns,(function(t,n){var a={text:n.text||n.name,dataIndex:n.name};"actions"==n.type&&n.actions&&n.actions.length&&(a.xtype="actioncolumn",a.items=[],$.each(n.actions,(function(t,n){var i={iconCls:"icon-grid-"+n,handler:function(t,i,a){e.trigger("actionClicked",{view:t,action:n,node:t.store.data.items[i],rowindex:i,colindex:a})},scope:this};a.items.push(i)}))),a.dataIndex.indexOf(".")>0&&e._has_deep_idx.push(n),n.width&&(a.width=n.width),i.push(a)})),n.reconfigure(n.store,i)},set_height:function(){var e=this,t=(e.fitem,e.fmodel.options.height);e.ui.css({minHeight:t?t+"px":"30px"}),t&&e.container&&e.container.innerHeight(t)},setValue:function(e){var t=this.datagrid.down("[name=m_grid]");this._has_deep_idx&&this._has_deep_idx.length&&e&&$.each(this._has_deep_idx,(function(t,n){var i=n.name.split(".");$.each(e,(function(e,t){var a=t;$.each(i,(function(e,t){if(a&&(a=a[t]),!a)return!1})),t[n.name]=a}))})),t.store.loadData(e)},$setProp:function(e,t,n){switch(t){case"columns":this.set_columns();break;case"height":this.set_height()}IG$._baseFC.prototype.$setProp.call(this,e,t,n)}}),IG$.$FCinst.datagrid=new IG$._FC_datagrid;
IG$._FC_report=$s.extend(IG$._baseFC,{objtype:"report",events:[{name:"click"}],properties:[{name:"report",type:"meta",prefix:"rpt_",visibleItems:"folder;report"},{name:"height",type:"integer"}],create:function(e){var t,i=this,r=i.fmodel;i.fitem,i.mcap,r.title;return t=i.ui=$("<div class='df-report'></div>").appendTo(e),i.set_height(),setTimeout((function(){i.report=new IG$.ReportView({instance:i.instance,renderTo:t[0],hiddentoolbar:!0,hiddenstatusbar:!0,vmode:1}),i.load_rpt()}),100),t},set_height:function(){var e=this.fmodel.options.height;this.ui.css({minHeight:e?e+"px":"30px"}),e&&this.container&&this.container.innerHeight(e)},resize:function(){var e,t,i=this,r=i.ui,o=i.report;r&&o&&(e=r.innerWidth(),t=r.innerHeight(),e&&t&&(e!=i._pw||t!=i._ph)&&(o.setSize(e,t),i._pw=e,i._ph=t))},load_rpt:function(){var e,t=this.fmodel.options,i=this.report;t.rpt_uid&&"report"==(e={uid:t.rpt_uid,name:t.rpt_name,type:t.rpt_type}).type.toLowerCase()&&e.uid!=i.uid&&(i.uid=e.uid,i.__loaded=!1,i.init_f(!0))},$setProp:function(e,t,i){switch(t){case"height":this.set_height();break;case"report":this.load_rpt()}IG$._baseFC.prototype.$setProp.call(this,e,t,i)}}),IG$.$FCinst.report=new IG$._FC_report;
IG$.bpmnFCol=$s.extend($s.window,{width:500,height:520,layout:"fit",_init:function(){var e,t=this,n=t.editrec;n&&(t.setAllValues(n.data),e=(e=n.data.actions)||[],$.each(e,(function(e,n){var i=t.down("[name=act_"+n+"]");i&&i.setValue(!0)})))},_confirm:function(){var e=this,t={},n=[];e.getAllValues(t)||($.each(["add","delete","config"],(function(t,i){var a=e.down("[name=act_"+i+"]");a&&a.getValue()&&n.push(i)})),t.actions=n,e.callback&&e.callback.execute(t),e.close())},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"name",required:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"textfield",name:"text",required:!0,fieldLabel:IRm$.r1("B_TITLE")},{xtype:"textarea",name:"description",height:60,fieldLabel:IRm$.r1("B_DESC")},{xtype:"combobox",fieldLabel:IRm$.r1("B_TYPE"),valueField:"value",name:"type",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{data:[{name:IRm$.r1("B_SELECT"),value:""},{name:"string",value:"string"},{name:"integer",value:"integer"},{name:"actions",value:"actions"}]}}]},{xtype:"fieldset",title:IRm$.r1("B_ADV"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"numberfield",name:"width",fieldLabel:IRm$.r1("B_WIDTH")},{xtype:"numberfield",name:"flex",fieldLabel:IRm$.r1("B_FLEX")},{xtype:"textarea",name:"template",fieldLabel:IRm$.r1("B_TEMPLATE")},{xtype:"checkbox",name:"act_add",fieldLabel:"Show Add",boxLabel:IRm$.r1("B_ENABLE")},{xtype:"checkbox",name:"act_delete",fieldLabel:"Show Remove",boxLabel:IRm$.r1("B_ENABLE")},{xtype:"checkbox",name:"act_config",fieldLabel:"Show Config",boxLabel:IRm$.r1("B_ENABLE")}]}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFCol.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e._init()}}}),IG$.bpmnFCo=$s.extend($s.window,{width:500,height:520,layout:"fit",_init:function(){var e,t=this.fitem.model,n=this.down("[name=grd_columns]");e=t.columns=t.columns||[],n.store.loadData(e)},_confirm:function(){var e,t,n=[],i=this.down("[name=grd_columns]").store;for(e=0;e<i.data.items.length;e++)t=i.data.items[e],n.push(t.data);this.callback&&this.callback.execute(n),this.close()},_moveGrdSel:function(e,t){var n=e.getSelectionModel().getSelection(),i=n&&n.length?n[0]:null;if(i){var a=e.getStore().indexOf(i);if(t<0){if(--a<0)return}else if(++a>=e.getStore().getCount())return;e.getStore().remove(i),i=e.getStore().insert(a,i),e.getSelectionModel().select(i,!0)}},_edit_col:function(e){var t=this.down("[name=grd_columns]"),n=new IG$.bpmnFCol({instance:this.instance,editrec:e,callback:new IG$.callBackObj(this,(function(n){e?$s.apply(e.data,n):t.store.add(n)}))});IG$.checkLogin(this,n)},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[{xtype:"gridpanel",name:"grd_columns",store:{},tbar:[{iconCls:"icon-toolbar-add",text:IRm$.r1("B_ADD"),handler:function(){this._edit_col()},scope:this},{iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("B_DELETE"),handler:function(){var e,t,n=this.down("[name=grd_columns]"),i=n.getSelectionModel().selected;for(e=i.length-1;e>=0;e--)t=i.items[e],n.store.remove(t)},scope:this},{iconCls:"icon-toolbar-moveup",xtype:"button",tooltip:IRm$.r1("B_UP"),handler:function(){var e=this.down("[name=grd_columns]");this._moveGrdSel(e,-1)},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",tooltip:IRm$.r1("B_DOWN"),handler:function(){var e=this.down("[name=grd_columns]");this._moveGrdSel(e,1)},scope:this}],columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("B_TITLE"),dataIndex:"text"},{text:IRm$.r1("B_TYPE"),dataIndex:"type"},{text:IRm$.r1("B_DESC"),dataIndex:"description"},{text:IRm$.r1("B_WIDTH"),dataIndex:"width",width:80},{text:IRm$.r1("B_FLEX"),dataIndex:"flex",width:80},{text:IRm$.r1("B_TEMPLATE"),dataIndex:"template"}],listeners:{cellclick:function(e,t,n,i,a,o){this._edit_col(i)},scope:this}}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFCo.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e._init()}}});
IG$.bpmnFEvtM=$s.extend($s.window,{width:500,height:520,layout:"fit",_init:function(){var e,t,a,n=this,i=n.ptrform,o=n.mcc,r=n.eventtype,s=n.filteritem,l=n.editrec,d=(n.psource,n.target_type),m=l?l.data:null;s&&r&&1==d&&(t=[],$.each(s.u2.events,(function(e,t){if(t.name==r)return a=t,!1})),a&&a.params&&($.each(a.params,(function(e,a){t.push({name:"[event]"+a.name,value:a.name,type:"event"})})),n.down("[name=grd_events]").store.loadData(t)));if(t=[],$.each(i.params,(function(e,a){t.push({name:"[param]"+e,value:""+e,type:"param"})})),n.down("[name=grd_params]").store.loadData(t),t=[],$.each(o.form_items,(function(e,a){var n=a.objtype;/(text|datagrid|textarea|radiogroup|button|combobox|htmleditor|textfield|textarea|numberfield|datefield)/.test(n)&&t.push({fuid:a.fuid,name:"[control]"+(a.title||a.name)+" ("+a.objtype+")",value:a.fuid,objtype:a.objtype,type:"control"})})),n.down("[name=grd_controls]").store.loadData(t),m)switch(e=m.mapping,n.down("[name=p_0]").setAllValues(m),n.down("[name=mapping_info]").setValue(m.mapping_info),m.mapping_type){case"static":n.down("[name=static_value]").setValue(e);break;case"control":n._sel_grid("grd_controls",e);break;case"parameter":n._sel_grid("grd_params",e);break;case"event":n._sel_grid("grd_events",e)}},_sel_grid:function(e,t){var a,n,i,o=this.down("[name="+e+"]"),r=o.store;if(t){for(a=0;a<r.data.items.length;a++)(n=r.data.items[a]).get("value")==t&&(i=n);i&&o.getSelectionModel().select(i)}},_confirm:function(){var e,t=this,a=t.editrec.data;if(!t.down("[name=p_0]").getAllValues(a)){var n=function(e){var t,n=e.getSelectionModel().selected;return!(!n||!n.length)&&(t=n.items[0].get("value"),a.mapping=t,!0)};switch(a.mapping_type){case"static":if(e=t.down("[name=static_value]"),a.mapping=e.getValue(),!a.mapping)return void e.markInvalid();e.clearInvalid();break;case"control":if(0==n(t.down("[name=grd_controls]")))return;break;case"parameter":if(0==n(t.down("[name=grd_params]")))return;break;case"event":if(0==n(t.down("[name=grd_events]")))return}a.mapping_info=t.down("[name=mapping_info]").getValue(),t.callback&&t.callback.execute(a),t.close()}},initComponent:function(){var e=[{name:IRm$.r1("B_SELECT"),value:""},{name:IRm$.r1("L_STATIC"),value:"static"},{name:IRm$.r1("L_CONTROL"),value:"control"},{name:IRm$.r1("L_PARAMS"),value:"parameter"}];1==this.target_type&&e.push({name:IRm$.r1("L_EVENTS"),value:"event"}),$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),name:"p_0",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"name",required:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"textarea",name:"description",height:60,fieldLabel:IRm$.r1("B_DESC")},{xtype:"combobox",fieldLabel:IRm$.r1("L_PURPOSE"),valueField:"value",name:"mapping_type",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{data:e},listeners:{change:function(e,t,a){this.down("[name=static_value]").setVisible("static"==t),this.down("[name=grd_controls]").setVisible("control"==t),this.down("[name=grd_params]").setVisible("parameter"==t),this.down("[name=grd_events]").setVisible("event"==t)},scope:this}}]},{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),name:"p_0",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",name:"static_value",height:120,fieldLabel:"Static"},{xtype:"textfield",name:"mapping_info",height:60,fieldLabel:"Mapping Info"},{xtype:"gridpanel",name:"grd_params",height:160,store:{},hidden:!0,selType:"checkboxmodel",selModel:{mode:"SINGLE",checkSelector:"cell"},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"}]},{xtype:"gridpanel",name:"grd_events",height:160,store:{},hidden:!0,selType:"checkboxmodel",selModel:{mode:"SINGLE",checkSelector:"cell"},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"}]},{xtype:"gridpanel",name:"grd_controls",height:160,store:{},hidden:!0,selType:"checkboxmodel",selModel:{mode:"SINGLE",checkSelector:"cell"},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"}]}]}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFEvtM.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e._init()}}}),IG$.bpmnFEvt=$s.extend($s.window,{width:500,height:520,layout:"fit",_init:function(){var e=this,t=e.mcc,a=e.editrec,n=a?a.data:null,i=[];$.each(t.form_items,(function(e,t){var a=t.objtype;/(text|datagrid|textarea|radiogroup|button|combobox|htmleditor|textfield|textarea|numberfield|datefield)/.test(a)&&i.push({fuid:t.fuid,name:"[control]"+(t.title||t.name)+" ("+t.objtype+")",value:"c_"+t.fuid,objtype:t.objtype,type:"control"})})),e.down("[name=tg_control]").store.loadData(i),n&&(e.down("[name=b_"+n.purpose+"]").setAllValues(n.options),e.down("[name=p_0]").setAllValues(n),n.options.tg_control&&(e._tg_ev(n.options.tg_control),(void 0).down("[name=tg_event]").setValue(n.options.tg_event)))},_get_cache:function(e,t){var a=this.ptrform.$cache;return e&&!a[e]?(req=new IG$._rpc$,req.init(this,{ack:"content",payload:{uid:e},mbody:{option:"internal"}},this,(function(n){a[e]=n.content,t.execute(n.content)})),void req.send()):!(!e||!a[e])&&a[e]},_set_param:function(e,t,a,n){var i,o,r,s,l,d,m,p,c=this,_=(a=[],{}),u=c.down("[name=purpose]").getValue();if(n?c._ps_in=null:c._ps_out=null,"rest"==u){if(m={},c.down("[name=b_rest]").getAllValues(m),i=m.rest_service_uid,!(o=c._get_cache(i,new IG$.callBackObj(c,(function(i){c._set_param(e,t,a,n)})))))return;if((s=(s=o.swagger_doc.paths[m.endpoint_name])?s[m.endpoint_method]:null)&&(l=s.parameters,$.each(s.responses,(function(e,t){if(199<e&&e<300)return d=t,!1}))),r=o.swagger_doc.definitions,p=n?l:d)if($.each(t,(function(e,t){_[e]=t})),n)c._ps_in=p,$.each(p,(function(e,a){_[a.name]||(t[a.name]=a)}));else if(c._ps_out=p,p.schema&&(_.schema_0||(t.schema_0=p.schema),p.schema.items&&p.schema.items.$ref)){var h=p.schema.items.$ref;h.startsWith("#/definitions/")&&r&&r[h.substring("#/definitions/".length)]}}else if("show_popup"==u){if(m={},c.down("[name=b_show_popup]").getAllValues(m),i=m.pop_uid,!(o=c._get_cache(i,new IG$.callBackObj(c,(function(i){c._set_param(e,t,a,n)})))))return;$.each(t,(function(e,t){_[e]=t})),n&&(p={},$.each(o.params,(function(e,a){_[e]||(a.name=e,t[e]=a)})),c._ps_in=p,$.each(p,(function(e,a){_[a.name]||(t[a.name]=a)})))}$.each(t,(function(e,t){a.push(t)})),e.store.loadData(a)},_confirm:function(){var e,t=this,a={};t.down("[name=p_0]").getAllValues(a)||(e=t.down("[name=b_"+a.purpose+"]"),a.options={},e&&e.getAllValues(a.options)||(a.params_in={},a.params_out={},$.each([{name:"grd_parameters_inp",params:a.params_in},{name:"grd_parameters_outp",params:a.params_out}],(function(e,a){var n,i,o=t.down("[name="+a.name+"]"),r=a.params,s=o.store;for(n=0;n<s.data.items.length;n++)r[(i=s.data.items[n].data).name]=i})),t.callback&&t.callback.execute(a),t.close()))},_tg_ev:function(e){var t,a,n,i,o=this.down("[name=tg_control]").store,r=this.down("[name=tg_event]"),s=[];if(e)for(n=0;n<o.data.items.length;n++)if((t=o.data.items[n]).get("fuid")==e){a=t;break}a&&(i=IG$.$FCinst[a.get("objtype")])&&i.events&&$.each(i.events,(function(e,t){s.push({name:t.name,value:t.name})})),r.store.loadData(s)},_edit_p:function(e,t,a,n){var i=this,o=new IG$.bpmnFEvtM({instance:i.instance,mcc:i.mcc,ptrform:i.ptrform,eventtype:i.eventtype,filteritem:i.filteritem,editrec:t,psource:a,target_type:n,callback:new IG$.callBackObj(this,(function(a){t?t.refresh():e.store.add(a)}))});IG$.checkLogin(i,o)},initComponent:function(){var e=this;$s.apply(e,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),name:"p_0",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",name:"name",required:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"textarea",name:"description",height:60,fieldLabel:IRm$.r1("B_DESC")},{xtype:"combobox",fieldLabel:IRm$.r1("L_PURPOSE"),valueField:"value",name:"purpose",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{data:[{name:IRm$.r1("B_SELECT"),value:""},{name:IRm$.r1("L_THREAD_ST"),value:"thread_start"},{name:IRm$.r1("L_THREAD_END"),value:"thread_end"},{name:IRm$.r1("L_IF"),value:"cond_if"},{name:IRm$.r1("L_IF_ELSE"),value:"cond_else"},{name:IRm$.r1("L_IF_END"),value:"cond_end"},{name:IRm$.r1("L_SET_PARAM"),value:"set_param"},{name:IRm$.r1("L_CHANGE_PROP"),value:"change_prop"},{name:IRm$.r1("L_TRIGGER"),value:"trigger"},{name:IRm$.r1("L_REST"),value:"rest"},{name:IRm$.r1("L_RUN_REPORT"),value:"run_report"},{name:IRm$.r1("L_MESSAGEBOX"),value:"messagebox"},{name:IRm$.r1("L_MESSAGE_OK"),value:"message_cond_ok"},{name:IRm$.r1("L_MESSAGE_CANCEL"),value:"message_cond_cancel"},{name:IRm$.r1("L_MESSAGE_END"),value:"message_cond_end"},{name:IRm$.r1("L_SHOW_POPUP"),value:"show_popup"},{name:IRm$.r1("L_CLOSE_WIN"),value:"close_win"}]},listeners:{change:function(e,t,a){var n,i,o,r=this,s=e.store,l=r.editrec,d=l?l.data:null,m=r.down("[name=grd_parameters_inp]"),p=r.down("[name=grd_parameters_outp]");for(n=0;n<s.data.items.length;n++)o=s.data.items[n].get("value"),(i=r.down("[name=b_"+o+"]"))&&i.setVisible(t==o);t&&d&&d.purpose==t?(d.options.tg_control&&(r._tg_ev(d.options.tg_control),bp.down("[name=tg_event]").setValue(d.options.tg_event)),$.each([{grd:m,params:d.params_in,is_input:!0},{grd:p,params:d.params_out}],(function(e,t){r._set_param(t.grd,t.params,r._dp,t.is_input)}))):$.each([{grd:m,params:{},is_input:!0},{grd:p,params:{}}],(function(e,t){r._set_param(t.grd,t.params,r._dp,t.is_input)}))},scope:this}}]},{xtype:"fieldset",title:IRm$.r1("B_DETAIL"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",name:"b_rest",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_REST_EP"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",hidden:!0,name:"rest_service_uid"},{xtype:"textfield",readonly:!0,name:"rest_service",required:!0,width:80},{xtype:"textfield",hidden:!0,name:"endpoint_name"},{xtype:"textfield",hidden:!0,name:"endpoint_method"},{xtype:"textfield",name:"grd_endp",required:!0,readonly:!0,flex:1},{xtype:"button",text:"..",handler:function(){var t=new IG$.bpmnFEvtRst({instance:e.instance,callback:new IG$.callBackObj(this,(function(e){var t=this,a=t.down("[name=grd_parameters_inp]"),n=t.down("[name=grd_parameters_outp]");t.down("[name=rest_service_uid]").setValue(e.rest_service.uid),t.down("[name=rest_service]").setValue(e.rest_service.name),t.down("[name=grd_endp]").setValue(e.endpoint.key),t.down("[name=endpoint_name]").setValue(e.endpoint.endpoint),t.down("[name=endpoint_method]").setValue(e.endpoint.method),t._set_param(a,e.params_in,t._dp,!0),t._set_param(n,e.params_out,t._dp,!1)}))});IG$.checkLogin(e,t)},scope:this}]},{xtype:"textarea",name:"rest_err_msg",fieldLabel:IRm$.r1("L_REST_ERR_MSG")}]},{xtype:"container",name:"b_trigger",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_CONTROL"),valueField:"fuid",name:"tg_control",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{},listeners:{change:function(t,a,n){e._tg_ev(a)},scope:this}},{xtype:"combobox",fieldLabel:IRm$.r1("L_CONTROL"),valueField:"value",name:"tg_event",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{}}]},{xtype:"container",name:"b_set_param",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd_set_param",height:300,store:{},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("B_DESC"),dataIndex:"description"},{text:IRm$.r1("L_MAPPING"),dataIndex:"mapping"},{text:IRm$.r1("L_MAPPING"),dataIndex:"mapping_info"}]}]},{xtype:"container",name:"b_messagebox",hidden:!0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",required:!0,fieldLabel:IRm$.r1("L_MESSAGE"),name:"message",height:50}]},{xtype:"container",hidden:!0,name:"b_show_popup",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",hidden:!0,name:"pop_uid"},{xtype:"textfield",hidden:!0,name:"pop_type"},{xtype:"textfield",name:"pop_name",required:!0,fieldLabel:IRm$.r1("B_NAME"),flex:1,readOnly:!0},{xtype:"button",text:"..",handler:function(){var t=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"folder;bpmn_form;report;",cancelable:1,callback:new IG$.callBackObj(e,(function(t){t=t||{};var a=e.down("[name=b_show_popup]");a.down("[name=pop_name]").setValue(t.name),a.down("[name=pop_uid]").setValue(t.uid),a.down("[name=pop_type]").setValue(t.type)}))});IG$.checkLogin(e,t)},scope:this}]},{xtype:"combobox",fieldLabel:IRm$.r1("L_OPTION"),valueField:"value",name:"pop_option",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{data:[{name:IRm$.r1("B_SELECT"),value:""},{name:"dialog",value:"dialog"},{name:"Tab",value:"tab"},{name:"Docking",value:"docking"}]},listeners:{change:function(e,t,a){},scope:this}},{xtype:"combobox",fieldLabel:IRm$.r1("L_Location"),valueField:"value",name:"pop_dock_location",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{data:[{name:IRm$.r1("B_SELECT"),value:""},{name:"Top",value:"north"},{name:"Right",value:"east"},{name:"left",value:"west"},{name:"bottom",value:"south"}]}},{xtype:"numberfield",fieldLabel:IRm$.r1("B_WIDTH"),name:"pop_width"},{xtype:"numberfield",fieldLabel:IRm$.r1("B_HEIGHT"),name:"pop_height"},{xtype:"checkbox",fieldLabel:IRm$.r1("L_MODAL"),name:"pop_modal",checked:!0},{xtype:"checkbox",fieldLabel:IRm$.r1("L_OVERLAY"),name:"pop_overlay",checked:!0}]},{xtype:"container",hidden:!0,name:"b_close_win",layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_OPTION"),valueField:"value",name:"close_reason",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{data:[{name:IRm$.r1("B_SELECT"),value:""},{name:"Ok",value:"ok"},{name:"Cancel",value:"cancel"},{name:"Apply",value:"apply"}]},listeners:{change:function(e,t,a){},scope:this}}]},{xtype:"container",hidden:!0,name:"b_cond_if",layout:{type:"vbox",align:"stretch"},items:[]},{xtype:"container",hidden:!0,name:"b_cond_else",layout:{type:"vbox",align:"stretch"},items:[]},{xtype:"container",hidden:!0,name:"b_cond_end",layout:{type:"vbox",align:"stretch"},items:[]},{xtype:"fieldset",title:IRm$.r1("L_PARAMETERS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",title:IRm$.r1("L_INPUT"),name:"grd_parameters_inp",store:{},height:300,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("L_MAPPING"),dataIndex:"mapping_type"},{text:IRm$.r1("L_MAPPING"),dataIndex:"mapping"}],tbar:[{iconCls:"icon-toolbar-add",text:IRm$.r1("B_ADD"),handler:function(){this._ps_in&&this._edit_p(this.down("[name=grd_parameters_inp]"),null,this._ps_in,1)},scope:this},{iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("B_DELETE"),handler:function(){var e,t,a=this.down("[name=grd_parameters_inp]"),n=a.getSelectionModel().selected;for(e=n.length-1;e>=0;e--)t=n.items[e],a.store.remove(t)},scope:this}],listeners:{cellclick:function(t,a,n,i,o,r){e._edit_p(t,i,e._ps_in,1)},scope:this}},{xtype:"gridpanel",title:IRm$.r1("L_OUTPUT"),name:"grd_parameters_outp",store:{},height:300,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("L_MAPPING"),dataIndex:"mapping_type"},{text:IRm$.r1("L_MAPPING"),dataIndex:"mapping"}],tbar:[{iconCls:"icon-toolbar-add",text:IRm$.r1("B_ADD"),handler:function(){this._ps_out&&this._edit_p(this.down("[name=grd_parameters_outp]"),null,this._ps_out,2)},scope:this},{iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("B_DELETE"),handler:function(){var e,t,a=this.down("[name=grd_parameters_outp]"),n=a.getSelectionModel().selected;for(e=n.length-1;e>=0;e--)t=n.items[e],a.store.remove(t)},scope:this}],listeners:{cellclick:function(t,a,n,i,o,r){e._edit_p(t,i,e._ps_out,2)},scope:this}}]}]}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFEvt.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e._init()}}}),IG$.bpmnFEvtRst=$s.extend($s.window,{width:500,height:520,layout:"fit",_init:function(){this.loadServices()},loadServices:function(){var e=new IG$._rpc$;e.init(this,{ack:"bpmn",payload:{address:"/RESTservices",option:"list"},mbody:{}},this,(function(e){var t,a=this.down("[name=rest_service]"),n=e.children;n&&(t=[{name:IRm$.r1("B_SELECT"),uid:""},...n],this.rootnode=e.uid,a.store.loadData(t)),a.setValue("")}),!1),e.send()},_ld_rest_p:function(){var e,t,a=this.down("[name=grd_endp]"),n=this.down("[name=grd_parameters_inp]"),i=this.down("[name=grd_parameters_outp]"),o=a.getSelectionModel().selected,r=[],s=[];o&&o.length&&(r=o.items[0].data.data.parameters,e=o.items[0].data.data.responses,$.each(e,(function(e,a){var n=parseInt(e);if(199<n&&n<300)return t=a,!1})),t&&t.schema&&(t.schema.name=t.schema.name||"schema_0",s.push(t.schema))),n.store.loadData(r),i.store.loadData(s)},_confirm:function(){var e,t,a,n=this,i={},o=n.down("[name=grd_endp]"),r=n.down("[name=rest_service]"),s=r.store,l=n.down("[name=grd_parameters_inp]").store,d=n.down("[name=grd_parameters_outp]").store,m=r.getValue(),p=o.getSelectionModel().selected;for(a=0;a<s.data.items.length;a++)if((t=s.data.items[a]).get("uid")==m){e=t;break}for(e&&(i.rest_service={uid:e.get("uid"),type:e.get("type"),name:e.get("name")}),p&&p.length&&(t=p.items[0],i.endpoint={endpoint:t.get("endpoint"),method:t.get("method"),key:t.get("key"),data:t.get("data")}),i.params_in=[],a=0;a<l.data.items.length;a++)t=l.data.items[a],i.params_in.push(t.data);for(i.params_out=[],a=0;a<d.data.items.length;a++)t=d.data.items[a],i.params_out.push(t.data);n.callback&&n.callback.execute(i),n.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[{xtype:"fieldset",title:IRm$.r1("B_DETAIL"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_REST_SERVICE"),valueField:"uid",name:"rest_service",displayField:"name",editable:!1,autoSelect:!0,store:{},listeners:{change:function(e,t,a){var n=this.down("[name=grd_endp]"),i=[],o=new IG$._rpc$;t&&(o.init(this,{ack:"content",payload:{address:t},mbody:{}},this,(function(e){var t=e.content.swagger_doc;$.each(t.paths,(function(e,t){$.each(t,(function(t,a){var n={key:"["+t+"] "+e,endpoint:e,method:t,summary:a.summary,description:a.description,data:a};i.push(n)}))})),n.store.loadData(i)}),!1),o.send()),n.store.loadData(i)},scope:this}},{xtype:"gridpanel",name:"grd_endp",store:{},selType:"checkboxmodel",selModel:{mode:"SINGLE",checkSelector:"cell"},height:240,columns:[{text:IRm$.r1("B_NAME"),dataIndex:"key",flex:1},{text:IRm$.r1("B_SUMMARY"),dataIndex:"summary",flex:1},{text:IRm$.r1("B_DESC"),dataIndex:"description",flex:1}],listeners:{selectionchange:function(e,t,a,n,i,o){this._ld_rest_p()},scope:this}},{xtype:"fieldset",title:IRm$.r1("L_PARAMETERS"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd_parameters_inp",title:"parameters in",height:220,store:{},columns:[{text:IRm$.r1("B_NAME"),tdCls:"igc-td-link",minWidth:120,flex:1,dataIndex:"name"},{text:IRm$.r1("B_IN"),width:70,dataIndex:"in"},{text:IRm$.r1("B_TYPE"),width:70,dataIndex:"type"},{text:IRm$.r1("B_DESC"),flex:1,minWidth:120,dataIndex:"description"}],listeners:{cellclick:function(e,t,a,n,i,o){},scope:this}},{xtype:"gridpanel",name:"grd_parameters_outp",title:"parameters out",height:220,store:{},columns:[{text:IRm$.r1("B_NAME"),tdCls:"igc-td-link",minWidth:120,flex:1,dataIndex:"name"},{text:IRm$.r1("B_IN"),width:70,dataIndex:"in"},{text:IRm$.r1("B_TYPE"),width:70,dataIndex:"type"},{text:IRm$.r1("B_DESC"),flex:1,minWidth:120,dataIndex:"description"}],listeners:{cellclick:function(e,t,a,n,i,o){},scope:this}}]}]}]}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFEvtRst.superclass.initComponent.call(this)},listeners:{afterrender:function(e){e._init()}}});
IG$.bpmnFpgP=$s.extend($s.panel,{_init:function(e,t,n){this.events=e,this.mcc=t,this.filteritem=n,this._mlist()},_mlist:function(){var e=[],t=this.events,n=this.down("[name=cb_events]");e.push({name:IRm$.r1("B_SELECT"),value:""}),$.each(t,(function(t,n){n.actions=n.actions||[],n._actions=[],$.each(n.actions,(function(e,t){n._actions.push(t)})),e.push({name:t,value:t,description:t})})),n.store.loadData(e),n.setValue(""),this._ulist(null,null,!0)},_upd_ev:function(e){var t,n,i,a=this,o={},s=a.down("[name=grd_events]").store;if(s.data.items.length||e){if(e)o[e]=1;else for(i=0;i<s.data.items.length;i++)(t=(n=s.data.items[i]).get("event"))&&(o[t]=1);for($.each(o,(function(e){a.events[e]._actions=[]})),i=0;i<s.data.items.length;i++)n=s.data.items[i],a.events[n.get("event")]._actions.push({name:n.get("name"),description:n.get("description"),purpose:n.get("purpose"),options:n.get("options"),params_in:n.get("params_in"),params_out:n.get("params_out")})}},_ulist:function(e,t,n){var i=[],a=this.events[e],o=a?a._actions||a.actions:null,s=this.down("[name=grd_events]");!n&&this._upd_ev(t),e?$.each(o,(function(t,n){i.push({event:e,name:n.name,description:n.description,purpose:n.purpose,options:n.options,params_in:n.params_in,params_out:n.params_out})})):$.each(this.events,(function(e,t){$.each(t.actions,(function(t,n){i.push({event:e,name:n.name,description:n.description,purpose:n.purpose,options:n.options,params_in:n.params_in,params_out:n.params_out})}))})),s.store.loadData(i)},_confirm:function(){var e=this.events,t=this.down("[name=cb_events]").getValue();return this._upd_ev(t),$.each(e,(function(e,t){t._actions&&(t.actions=t._actions),delete t._actions})),e},_edit_ev:function(e,t){var n=this,i=new IG$.bpmnFEvt({instance:n.instance,ptrform:n.ptrform,mcc:n.mcc,eventtype:t,filteritem:n.filteritem,editrec:e,callback:new IG$.callBackObj(this,(function(t){var i=e&&e.get("event")?e.get("event"):n.down("[name=cb_events]").getValue(),a=n.events,o=a[i];o||(o=a[i]={actions:[]}),t.event=i,e||(e=n.down("[name=grd_events]").store.add(t)),e&&(e.set("name",t.name),e.set("event",t.event),e.set("description",t.description),e.set("purpose",t.purpose),e.set("options",t.options),e.set("params_in",t.params_in),e.set("params_out",t.params_out))}))});IG$.checkLogin(n,i)},_moveGrdSel:function(e,t){var n=e.getSelectionModel().getSelection(),i=n&&n.length?n[0]:null;if(i){var a=e.getStore().indexOf(i);if(t<0){if(--a<0)return}else if(++a>=e.getStore().getCount())return;e.getStore().remove(i),i=e.getStore().insert(a,i),e.getSelectionModel().select(i,!0)}},initComponent:function(){$s.apply(this,{layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:IRm$.r1("B_GENERAL"),layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_PURPOSE"),valueField:"value",name:"cb_events",required:!0,displayField:"name",editable:!1,autoSelect:!0,store:{},listeners:{change:function(e,t,n){this._ulist(t,n)},scope:this}},{xtype:"gridpanel",name:"grd_events",store:{},selType:"checkboxmodel",selModel:{mode:"SINGLE"},tbar:[{iconCls:"icon-toolbar-add",text:IRm$.r1("B_ADD"),handler:function(){var e={};this.getAllValues(e)||this._edit_ev(null,e.cb_events)},scope:this},{iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("B_DELETE"),handler:function(){var e,t,n=this.down("[name=grd_events]"),i=n.getSelectionModel().selected;for(e=i.length-1;e>=0;e--)t=i.items[e],n.store.remove(t)},scope:this},{iconCls:"icon-toolbar-moveup",xtype:"button",tooltip:IRm$.r1("B_UP"),handler:function(){var e=this.down("[name=grd_events]");this._moveGrdSel(e,-1)},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",tooltip:IRm$.r1("B_DOWN"),handler:function(){var e=this.down("[name=grd_events]");this._moveGrdSel(e,1)},scope:this}],height:300,columns:[{text:IRm$.r1("B_EVENT"),dataIndex:"event",width:50},{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,minWidth:80},{text:IRm$.r1("B_ACTION"),dataIndex:"purpose",flex:1,minWidth:80},{text:IRm$.r1("B_DESC"),dataIndex:"description",flex:1,minWidth:120}],listeners:{cellclick:function(e,t,n,i,a,o){1==n&&this._edit_ev(i,i.get("event"))},scope:this}}]}]}),IG$.bpmnFpgP.superclass.initComponent.call(this)}}),IG$.bpmnFpg=$s.extend($s.window,{width:500,height:420,layout:"fit",_init:function(){var e=this;e.meditor.ptrform=e.ptrform,e.meditor._init(e.events,e.mcc,e.filteritem)},_confirm:function(){var e;e=this.meditor._confirm(),this.callback&&this.callback.execute(e),this.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[new IG$.bpmnFpgP({name:"meditor",instance:this.instance,ptrform:this.ptrform})]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFpg.superclass.initComponent.call(this)},listeners:{afterrender:function(e){var t=this.down("[name=meditor]");this.meditor=t,this._init()}}}),IG$.bpmnFExp=$s.extend($s.window,{width:800,height:600,layout:"fit",_init:function(){var e,t=this.meta;e=JSON.stringify(t,null,2),this.down("[name=meta_cnt]").setValue(e)},_confirm:function(){var e={};this.getAllValues(e)||(this.callback&&this.callback.execute(JSON.parse(e.meta_cnt)),this.close())},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,items:[{xtype:"textarea",labelPosition:"top",required:!0,name:"meta_cnt",fieldLabel:IRm$.r1("B_META")}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFExp.superclass.initComponent.call(this)},listeners:{afterrender:function(e){this._init()}}}),IG$.bpmnFparE=$s.extend($s.window,{width:300,height:260,layout:"fit",_init:function(){var e=this.param_rec;e&&this.setAllValues(e.data)},_confirm:function(){var e=this,t=e.param_rec?e.param_rec.data:{};e.getAllValues(t)||(e.callback&&e.callback.execute(t),e.close())},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[{xtype:"textfield",labelPosition:"top",name:"name",required:!0,fieldLabel:IRm$.r1("B_NAME")},{xtype:"textarea",labelPosition:"top",name:"description",fieldLabel:IRm$.r1("B_DESC")}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFparE.superclass.initComponent.call(this)},listeners:{afterrender:function(e){this._init()}}}),IG$.bpmnFpar=$s.extend($s.window,{width:500,height:420,layout:"fit",_init:function(){var e=this.params,t=this.down("[name=grd_params]"),n=[];$.each(e,(function(e,t){var i={name:e,description:t.description};n.push(i)})),t.store.loadData(n)},_confirm:function(){var e,t,n,i=this,a=i.mcc,o=i.down("[name=grd_params]").store;for(e=a.params={},t=0;t<o.data.items.length;t++)e[(n=o.data.items[t]).get("name")]={name:n.get("name"),description:n.get("description")};i.callback&&i.callback.execute(),i.close()},_edit_params:function(e){var t=this.down("[name=grd_params]"),n=new IG$.bpmnFparE({instance:this.instance,param_rec:e,callback:new IG$.callBackObj(this,(function(n){e?e.refresh():t.store.add(n)}))});IG$.checkLogin(this,n)},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[{xtype:"gridpanel",name:"grd_params",store:{},tbar:[{iconCls:"icon-toolbar-add",text:IRm$.r1("B_ADD"),handler:function(){this.getAllValues({})||this._edit_params()},scope:this},{iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("B_DELETE"),handler:function(){var e,t,n=this.down("[name=grd_params]"),i=n.getSelectionModel().selected;for(e=i.length-1;e>=0;e--)t=i.items[e],n.store.remove(t)},scope:this}],columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("B_DESC"),dataIndex:"description"}],listeners:{cellclick:function(e,t,n,i,a,o){this._edit_params(i)},scope:this}}]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFpar.superclass.initComponent.call(this)},listeners:{afterrender:function(e){this._init()}}}),IG$.bpmnFpop=$s.extend($s.window,{width:800,height:600,layout:"fit",_init:function(){var e=this,t=e.target_item,n=e.bform;t&&t.uid&&(n.uid=t.uid,n.ru_lc()),n.on("close",(function(t,n){return e.close(n),!1}))},_confirm:function(){this.callback&&this.callback.execute({close_reason:"OK"}),this.close()},initComponent:function(){$s.apply(this,{title:IRm$.r1("L_REST_SERVICE"),padding:10,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},name:"mainpanel",bodyPadding:10,autoScroll:!0,items:[new IG$.bpmnForm({flex:1,$internal:!0,viewer_mode:!0,instance:this.instance,name:"bform",apply_option:this.apply_option})]}],buttons:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this._confirm()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]}),IG$.bpmnFpop.superclass.initComponent.call(this)},listeners:{afterrender:function(e){var t=this.down("[name=bform]");this.bform=t,this._init()}}}),IG$.bpmnForm=$s.extend(IG$.v$pnl,{scroll:!1,closable:!0,layout:"fit",_atimer:10,applyOption:function(e){var t=this.params;e&&e.params_in&&$.each(e.params_in,(function(e,n){t[e]&&t[e].set(n.value)}))},ru_init_f:function(){var e=this;e.uid?e.ru_lc():(e._mc={meta_type:"bpmn_form",content:{meta_type:"bpmn_form",cube_objects:[],form_items:[]}},e.down("[name=tbobjname]").setText(e._mc.name),e.de_upd_cube(),e.ru_idr())},_get_p:function(e,t,n){var i=this.params[e];return i&&(e=i.value?i.value[0].code:"",i.reg(t,n)),e},ru_idr:function(){var e,t,n,i=this,a=i.mainarea.el.dom,o=i._mc.content;o.form_items=o.form_items||[],n={model:{filter_items:o.form_items}},$(a).empty(),i.container=e=$("<div class='bpmn-form-content'></div>").appendTo(a),i.container.addClass("igc_view_mode"),i.formview=t=new IG$.dynFilterView(i.instance,e,n,o,2),i.formview.$FM=i,t.callback=new IG$.callBackObj(i,(function(){})),t.init_f(!0),i._ru_close_pops(),t.container.bind({i_ready:function(){(i._mc.content.events?i._mc.content.events.onload:null)&&i._proc_events(i._mc.content.events.onload,"onload",null,"onload")},i_c_event:function(e,t,n,a,o){var s=n.model,c=o?o[1]:null,r=s&&s.events?s.events[a.name]:null;r&&i._proc_events(r,s.fuid,n,a.name,c)},value_info:function(e,t){i.$pg_params=t.parameters,i.ru_pinit()}}),i.de_idr()},ru_pinit:function(){var e,t,n,i,a=this,o=a._mc.content;(e=function(e){this.name=e,this.ctrl={}}).prototype={get:function(){return this.value},set:function(e){this.value=e,this._bind()},reg:function(e,t){this.ctrl[e.model.fuid]={ctrl:e,property:t}},unreg:function(e){var t,n=this;for(t=0;t<n.ctrl.length;t++)if(n.ctrl[t]==e){n.splice(t,1);break}},_bind:function(){var e=this.value;$.each(this.ctrl,(function(t,n){n.setValue&&n.setValue(e)}))}},a.$cache={rest:{}},i=a.params,n=a.params={},t=o.params=o.params||{},$.each(t,(function(t,a){if(i&&i[t]){if(i[t].is_sys)return;n[t]=i[t]}else n[t]&&n[t].is_sys||(n[t]=new e(t))})),$.each(a.$pg_params,(function(t,a){if(i&&i[t])return n[t]=i[t],void(n[t].is_sys=!0);var o=n[t]=new e(t),s=[];o.is_sys=!0,$.each(a.vaules,(function(e,t){var n={code:t,value:t};s.push(n)})),o.set(s)})),a.apply_option&&a.applyOption(a.apply_option)},de_ld_prop:function(e){var t,n,i,a,o,s=this,c=s._mc.content.cube_objects,r=s.down("[name=propgrid]"),p=s.meditor,l=e.model,m=e.objtype,d={};for(t=l.events=l.events||{},i=IG$.$FCinst[m],$.each(i.events,(function(e,t){d[t.name]=1})),$.each(t,(function(e,n){d[e]||delete t[e]})),$.each(i.events,(function(e,n){var i=n.name;t[i]=t[i]||{actions:[]}})),p.ptrform=s,p._init(t,s._mc.content,e),n=l.options=l.options||{},o=r._items.length-1;o>=0;o--)r.remove(r._items[o]);a=[...i.properties],i.s_codemap&&a.splice(0,0,{name:"codemapping",type:"codemapping",base:!0}),i.s_metric&&c&&c.length&&a.splice(0,0,{name:"metric",type:"metric",base:!0}),$.each(a,(function(t,i){var a,o,p=i.name,m={};if(a=i.base?l[p]:n[p],!i.readonly){switch(i.type){case"string":m.xtype="textfield";break;case"int":case"integer":m.xtype="numberfield",void 0!==i.min&&(m.minValue=i.min),void 0!==i.max&&(m.maxValue=i.max);break;case"enum":m.xtype="combobox",m.valueField="value",m.displayField="name",m.store={data:[]},i.values&&$.each(i.values,(function(e,t){m.store.data.push({name:t,value:t})}));break;case"boolean":m.xtype="checkbox";break;case"columns":m.xtype="fieldcontainer",m.layout={type:"hbox",align:"stretch"},l._columns=null,m.items=[{xtype:"button",text:IRm$.r1("B_CONFIG"),flex:1,handler:function(){var t=new IG$.bpmnFCo({instance:s.instance,fitem:e,callback:new IG$.callBackObj(s,(function(e){l._columns=e}))});IG$.checkLogin(s,t)}}];break;case"meta":case"metric":case"codemapping":"meta"==i.type?a=n[i.prefix+"uid"]?{uid:n[i.prefix+"uid"],type:n[i.prefix+"type"],name:n[i.prefix+"name"]}:{}:"metric"==i.type?a=i.base?l:n:"codemapping"==i.type&&(a=i.base?l:null),m.xtype="fieldcontainer",m.layout={type:"hbox",align:"stretch"},m.items=[{xtype:"textfield",readOnly:!0,flex:1,name:"objectid"},{xtype:"button",text:"..",handler:function(){if("metric"==i.type||"meta"==i.type){var e=new IG$.metaSelectDlg({instance:s.instance,visibleItems:i.visibleItems||"userdb;dataset;table;inlineview;folder;metric;custommetric;measure",cancelable:1,tree_options:"metric"==i.type?{cubebrowse:!0,rootuid:c[0].uid}:null,callback:new IG$.callBackObj(s,(function(e){e=e||{};o.items.items[0].setValue(e.name),"meta"==i.type?(n[i.prefix+"uid"]=e.uid,n[i.prefix+"name"]=e.name,n[i.prefix+"type"]=e.type):"metric"==i.type&&(a.objectid=e.name,a.name=e.name,a.uid=e.uid,a.type=e.type,r.down("[name=objectid]").setValue(e.name),r.down("[name=name]").setValue(e.name))}))});IG$.checkLogin(s,e)}else if("codemapping"==i.type){e=new IG$.metaSelectDlg({instance:s.instance,cancelable:1,visibleItems:"folder;codemap",tree_options:{cubebrowse:!0,rootuid:"/SYS_Lookup"},callback:new IG$.callBackObj(s,(function(e){a.codemapping=e?{uid:e.uid,name:e.name,type:e.type}:null,o.items.items[0].setValue(e?e.name:null)}))});IG$.checkLogin(s,e)}}}];break;default:m.xtype="textfield"}m.fieldLabel=i.label||p,m.name=p,o=r.add(m),"codemapping"==i.type?o.items.items[0].setValue(a&&a.codemapping?a.codemapping.name:""):"metric"==i.type?o.items.items[0].setValue(a&&a.uid?a.objectid:""):"meta"==i.type?o.items.items[0].setValue(a&&a.uid?a.name:""):"columns"==i.type||o.setValue&&o.setValue(a)}}))},de_prop:function(){var e=this.$wtarget;e||retun;var t=this.down("[name=propgrid]"),n=e.model,i=e.objtype,a={},o=IG$.$FCinst[i];$.each(o.properties,(function(e,t){a[t.name]=t})),$.each(t.items.items,(function(t,i){var o=i.name,s=a[o],c=i.getValue();"codemapping"!=o&&"metric"!=o&&(s.readonly||("columns"==o?(n._columns&&(n.columns=n._columns),n._columns=null):"meta"==o||(s.base?n[o]=c:n.options[o]=c),e.u2.$setProp(e,o,c)))}))},de_idr:function(){var e=this;e.formview.container.bind({widget_config:function(t,n,i){e.$wtarget&&e.de_appProp(!1),e.down("[name=moption]").show(),e.$wtarget=i,e.de_ld_prop(i)}}),e.down("[name=mctrl]").getRootNode().expand()},de_appProp:function(e){this.meditor._confirm(),this.de_prop(),this.$wtarget=null,e&&this.down("[name=moption]").hide()},_proc_events:function(e,t,n,i,a){var o=this,s=[];o.$actions||(o.$actions={actions:[]}),o.$actions.actions=o.$actions.actions||[],o.$actions&&o.$actions.actions.length,e.actions&&($.each(e.actions,(function(e,t){s.push(t)})),o.$actions.actions=s,o.$actions.fitem=n,o.$actions.event_name=i,o.$actions.event_opts=a,o._do_actions())},_do_actions:function(){var e,t=this;t.$actions&&t.$actions.actions.length?(e=t.$actions.actions.shift(),t.setLoading(!0),t._proc_action(e)):t.setLoading(!1)},_f_c:function(e){var t;return $.each(this.formview.filter_items,(function(n,i){if(i.model.fuid==e)return t=i,!1})),t},_app_out:function(e,t){var n=this,i=!0;return $.each(t,(function(t,a){if(a.name=t,!n._app_out_p(e,a))return i=!1,!1})),i},_app_out_p:function(e,t){var n;return t.mapping_type&&t.mapping&&("control"==t.mapping_type?(n=this._f_c(t.mapping))&&"array"==t.type&&"datagrid"==n.objtype&&n.u2.$setValue(e||[]):"parameter"==t.mapping_type&&(n=this.params[t.mapping])&&!n.is_sys&&n.set(e)),!0},_ru_close_pops:function(){var e=this.down("[name=formmain_abs]"),t=this.down("[name=formmain]");$.each(e.items.items,(function(e,t){"center"!=t.region&&t.ownerCt.remove(t,!0)})),$.each(t.items.items,(function(e,t){"center"!=t.region&&t.ownerCt.remove(t,!0)}))},_proc_action:function(e,n){var i=this,a=!0,o=e.options||{},s=e.params_in,c=e.params_out,r={};switch($.each(s,(function(e,n){var a,o,s=n.mapping,c=n.mapping_type,p=n.mapping_info,l=[],m={};if(m={format:n.format,required:n.required,in:n.in,name:e,type:n.type,format:n.format,description:n.description},c&&t)if("static"==c)s&&l.push({code:""+s,value:""+s});else if("control"==c)(a=i._f_c(s))&&a.u2&&a.u2.$updateValue(l,!0);else if("parameter"==c)(o=(a=i.params[s])?a.get():null)&&(p&&(o=IG$.jsonPath(o,p))&&o.length&&(o=o[0]),o&&l.push({code:o,value:o}));else if("event"==c){var d,_,u=i.$actions.fitem,h=i.$actions.event_name,f=u?u.u2.events:null;$.each(f,(function(e,t){if(t.name==h)return(d=t)&&d.params&&$.each(d.params,(function(e,t){if(t.name==s)return _=t,!1})),!1})),a=i.$actions.event_opts?i.$actions.event_opts[s]:null,_&&("integer"==_.type?l.push({code:""+a,value:""+a}):"record"==_.type&&a.get(p)&&l.push({code:""+a.get(p),value:""+a.get(p)}))}n.required&&l.length,m.value=l.length?l:null,r[e]=m})),e.purpose){case"thread_start":for(e.$actions={actions:[]};;){var p=i.$actions.actions[0];if(!p)break;if("thread_end"==p.purpose){i.$actions.actions.shift();break}"thread_start"==p.purpose||(i.$actions.actions.shift(),e.$actions.actions.push(p))}if(e.$actions.actions.length){var l=new IG$.callBackObj(this,(function(t,a){!0===a&&(e.has_error=a),$.each(e.$actions.actions,(function(a,o){if(o==t)return e.$actions.actions.splice(a,1),0==e.$actions.actions.length&&(e.has_error?i._close_actions():i._do_next(e,n)),!1}))}));e.has_error=!1,$.each(e.$actions.actions,(function(e,t){i._proc_action(t,l)})),a=!1}break;case"cond_if":case"cond_else":for(var m=0,d=0;;){var _=i.$actions.actions[m];if(!_)break;if("cond_if"==_.purpose)d++;else if("cond_else"==_.purpose){if(0==d){!0,i.$actions.actions.shift();continue}}else if("cond_end"==_.purpose){if(0==d){i.$actions.actions.shift();break}d--}m++}break;case"cond_end":case"change_prop":break;case"trigger":var u,h;if(o.tg_control&&o.tg_event)(u=i._f_c(o.tg_control))&&u.model.events&&u.model.events[o.tg_event]?(h=u.model.events[o.tg_event]).actions&&h.actions.length&&(i.$actions.actions=[...h.actions,...i.$actions.actions]):(i._close_actions(),a=!1);else i._close_actions(),a=!1;break;case"run_report":break;case"show_popup":if(o.pop_uid){var f={params_in:r};if("docking"==o.pop_option){i.setLoading(!1),o.pop_modal&&i.mainarea.setLoading(!0);var b,v,g=o.pop_dock_location||"east",y=i.down("[name=formmain_abs]"),x=i.down("[name=formmain]"),w={isdocking:!0,viewer_mode:!0,$internal:!0};if($.each(o.pop_overlay?y.items.items:x.items.items,(function(e,t){if(t.uid==o.pop_uid&&t.region==g)return b=t,!1;t.region==g&&(v=t)})),b)b.applyOption&&b.applyOption(f);else{switch(w.apply_option=f,v&&v.ownerCt.remove(v,!0),w.region=g,g){case"north":w.height=o.pop_height||300;break;case"west":case"east":w.width=o.pop_width||300;break;case"south":w.height=o.pop_height||300}w.uid=o.pop_uid,w.slide={enabled:!0,duration:100},o.pop_modal&&(w.height=y.$height),(b=new IG$.bpmnForm(w)).on("close",(function(t,a){i.mainarea.setLoading(!1),a&&"OK"==a.close_reason?i._do_next(e,n):i._close_actions()})),o.pop_overlay?y.add(b):x.add(b)}}else if("tab"==o.pop_option){var I={uid:o.pop_uid,type:o.pop_type,name:o.pop_name,writable:!1},k=i.instance,R=k?k.mainPanel:null;I&&R?(i.setLoading(!1),R.navigateApp.call(R,I.uid,I.type.toLowerCase(),I.name,I.nodepath,!0,I.writable,null,f)):i._close_actions()}else if("dialog"==o.pop_option){var G=new IG$.bpmnFpop({instance:i.instance,width:o.pop_width||800,height:o.pop_height||600,target_item:{uid:o.pop_uid,name:o.pop_name,type:o.pop_type,apply_option:f},callback:new IG$.callBackObj(this,(function(t){t&&"OK"==t.close_reason?i._do_next(e,n):i._close_actions()}))});IG$.checkLogin(i,G)}}else i._close_actions();a=!1;break;case"close_win":i._close_actions(),i.isdocking?i.ownerCt.remove(i,!0,o):i.close(o),a=!1;break;case"rest":var C=new IG$._rpc$;C.init(i,{ack:"bpmn",payload:{option:"rest_call"},mbody:{service_uid:o.rest_service_uid,endpoint:o.endpoint_name,method:o.endpoint_method,params_in:r,params_out:c},meta_type:"http_req"},i,(function(t){if(t.status>199&&t.status<300){if(!i._app_out(t.data,c))return void i._close_actions();i._do_next(e,n)}else IG$.ShowError(IRm$.r1("E_ERR_RESP",t.status),i),i._close_actions()}),(function(t){n?n.execute(e,!0):i._close_actions()})),C.send(),a=!1;break;case"messagebox":i.setLoading(!1),IG$.confirmMessages(ig$.appname,o.message||"",(function(t){var a;if("yes"==t){if(i.$actions.actions[0]&&"message_cond_ok"==i.$actions.actions[0].purpose)for(i.$actions.actions.shift();;){if(!(s=i.$actions.actions[0]))break;if("message_cond_cancel"==s.purpose)a=!0,i.$actions.actions.shift();else{if("message_cond_end"==s.purpose){i.$actions.actions.shift();break}a&&i.$actions.actions.shift()}}}else if($.each(i.$actions.actions,(function(e,t){return"message_cond_end"==t.purpose||"message_cond_cancel"==t.purpose?(a=!0,!1):void 0})),a){for(var o=!1;;){var s;if(!(s=i.$actions.actions[0]))break;if("message_cond_end"==s.purpose){i.$actions.actions.shift();break}"message_cond_cancel"==s.purpose?(o=!0,i.$actions.actions.shift()):o||i.$actions.actions.shift()}i._do_next(e,n)}else i._close_actions()})),a=!1}return a&&!n&&i._do_next(e),a},_do_next:function(e,t){var n=this;t?t.execute(e,!1):setTimeout((function(){n._do_actions()}),n._atimer)},_close_actions:function(){this.setLoading(!1),this.$actions=null},ru_lc:function(){var e=this,t=new IG$._rpc$;t.init(e,{ack:"content",payload:{uid:e.uid},mbody:{option:e.$internal?"internal":""}},e,(function(t){var n=e.down("[name=tbobjname]");e._mc=t,n&&n.setText(t.name),e.de_upd_cube(),e.ru_idr()})),t.send()},de_upd_cube:function(){var e,t,n=this._mc,i=n?n.content:null,a=this.down("[name=cube_tree]");i&&i.cube_objects&&i.cube_objects.length&&(t=i.cube_objects[0],this.down("[name=tbcubepath]").setText(t.name),(e={type:"ROOT",name:"Cubes",leaf:!1,expanded:!0,children:[{type:"load",name:"Loading..."}]}).uid=t.uid,e.name=t.name,e.nodepath=t.nodepath,e.type=t.type,a.setRootNode(e).expand())},de_tbHdler:function(e,t){var n,i=this,a=i.container;switch(e){case"save":i.uid?i.de_save(t):i.de_save_as(t);break;case"saveas":i.de_save_as();break;case"cmd_editmode":i.editmode=!i.editmode,n=i.down("[name=mctrl_cnt]"),$(a)[i.editmode?"addClass":"removeClass"]("igc_design_mode"),$(a)[i.editmode?"removeClass":"addClass"]("igc_view_mode"),n.setVisible(i.editmode),i.editmode&&i._ru_close_pops(),!i.editmode&&i.$wtarget&&i.de_appProp(!0),i.formview._editmode=i.editmode,i.formview.set_mode(i.editmode);break;case"cmd_event":var o;(o=(c=i._mc.content).events=c.events||{}).onload=o.onload||{actions:[]},o.onclose=o.onclose||{actions:[]};var s=new IG$.bpmnFpg({instance:i.instance,ptrform:i,mcc:i._mc.content,events:o,filteritem:null,callback:new IG$.callBackObj(this,(function(){(i._mc.content.events?i._mc.content.events.onload:null)&&i._proc_events(i._mc.content.events.onload,"onload",null,"onload")}))});IG$.checkLogin(i,s);break;case"cmd_params":var c,r;r=(c=i._mc.content).params=c.params||{};s=new IG$.bpmnFpar({instance:i.instance,mcc:i._mc.content,params:r,callback:new IG$.callBackObj(this,(function(){i.ru_pinit()}))});IG$.checkLogin(i,s);break;case"cmd_export":s=new IG$.bpmnFExp({instance:i.instance,meta:i._mc.content,callback:new IG$.callBackObj(this,(function(e){var t=this._mc.content;t.cube_objects=e.cube_objects,t.params=e.params,t.events=e.events,t.form_items=e.form_items,this.ru_idr()}))});IG$.checkLogin(i,s)}},de_save:function(e){var t=this,n=new IG$._rpc$,i=t.uid,a=t._mc.content;n.init(t,{ack:"writecontent",payload:{uid:i},mbody:a,meta_type:"bpmn_form"},t,t.de_rsaveContent,null,[e]),n.send()},de_rsaveContent:function(e,t){var n=this,i=!!t&&t[0];1==i?(n.ignoreclose=!0,n.close()):(n.contentchanged=!1,n.id=e.type.toLowerCase()+"_"+e.uid,n.down("[name=tbobjname]").setText(e.name),2==i?n._activate():IG$.alertmsg(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success"))},de_save_as:function(e){var t=new IG$.metaSelectDlg({instance:this.instance,mode:"newitem",initpath:this.nodepath,callback:new IG$.callBackObj(this,this.de_saveAsNew,e)});IG$.checkLogin(this,t)},de_saveAsNew:function(e,t){var n=this,i=new IG$._rpc$,a=n._mc.content;i.init(n,{ack:"writecontent",payload:{address:e.nodepath+"/"+e.name,name:e.name,type:"BPMN_FORM",pid:e.uid},mbody:a,meta_type:"bpmn_form"},n,n.de_rs_procMakeItem,n.rs_procMakeItem,[e.name,t,e.nodepath,e.uid,a]),i.showerror=!1,i.send()},de_rs_procMakeItem:function(e,t){var n=this,i=t[1],a=n._mc.content,o=e.name;if(1==i)return n.ignoreclose=1,void n.close();n.contentchanged=!1,n.uid=e.uid,a.uid=n.uid,a.name=o,n.id=e.type.toLowerCase()+"_"+e.uid,n.setTitle(o),n.down("[name=tbobjname]").setText(o),2!=i||n._activate()},ru_adj_h:function(){var e=this,t=e.down("[name=formmain]"),n=e.down("[name=formmain_abs]"),i=$(n.el.dom),a=i.width(),o=i.height();a&&o&&(e.ow!=a||e.oh!=o)&&(e.ow=a,e.oh=o,t.setSize(a,o)),setTimeout((function(){e.ru_adj_h()}),800)},initComponent:function(){var e,t=this;e={children:[{text:"Form Widget",expanded:!0,children:[{text:"Label",type:"label",objtype:"label",left:!0},{text:"Text input",type:"text",objtype:"text",leaf:!0},{text:"Text area",type:"textarea",objtype:"textarea",leaf:!0},{text:"Combobox",type:"combobox",objtype:"combobox",leaf:!0},{text:"Slider",type:"slider",objtype:"slider",leaf:!0},{text:"Checkbox",type:"checkbox",objtype:"checkbox",leaf:!0},{text:"Calendar",type:"calendar",objtype:"calendar",leaf:!0},{text:"Period Calendar",type:"calendarperiod",objtype:"calendarperiod",leaf:!0},{text:"File upload",type:"fileupload",objtype:"fileupload",leaf:!0},{text:"Button",type:"button",objtype:"button",options:{text:"Button",action:""},leaf:!0}]},{text:"Advanced",expanded:!1,children:[{text:"Datagrid",objtype:"datagrid",type:"datagrid",leaf:!0},{text:"Report",objtype:"report",type:"report",leaf:!0}]},{text:"Container",expanded:!1,children:[{text:"Fieldset",objtype:"fieldset",type:"fieldset",leaf:!0},{text:"Panel",objtype:"panel",type:"panel",leaf:!0},{text:"TabPanel",objtype:"tabpanel",type:"tabpanel",leaf:!0}]}]},$s.apply(this,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},padding:10,flex:1,items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,layout:"border",items:[{xtype:"panel",region:"west",name:"mctrl_cnt",hidden:!0,collapsible:!0,width:200,layout:{type:"vbox",align:"stretch"},items:[{xtype:"treepanel",name:"mctrl",flex:1,rootVisible:!1,hideHeaders:!0,autoScroll:!0,store:{xtype:"treestore",fields:["name","text","type","pname","region","custom"],proxy:{type:"memory",reader:{type:"json",root:"children"}},root:{expanded:!0,text:"Controls",children:e.children},folderSort:!0},enableDragDrop:!0,enableDD:!0,useArrows:!0,ddGroup:"_I$RD_G_",columns:[{xtype:"treecolumn",text:"text",flex:2,sortable:!1,dataIndex:"text"}]},new IG$.naviTree({instance:t.instance,showtoolbar:!1,cubebrowse:!0,ddGroup:"_I$RD_G_",name:"cube_tree",layout:"fit",enabledrag:!0,rootuid:"none",flex:1,border:0,_search:!0,rptptr:t.rptptr,hiddenItems:{cubemodel:1}})]},{xtype:"container",flex:1,name:"formmain_abs",region:"center",layout:{type:"absolute"},items:[{xtype:"container",flex:1,name:"formmain",region:"center",layout:{type:"border"},items:[{xtype:"container",name:"mainarea",region:"center",flex:1,listeners:{resize:function(e,t,n,i){t&&n&&this.formview&&this.formview.updateDisplay()},scope:this}}]}]},{xtype:"panel",name:"moption",title:"Properties",split:!0,hidden:!0,collapsible:!0,collapsed:!0,collapseMode:"mini",region:"east",width:270,layout:{type:"vbox",align:"stretch"},tools:[{type:"collapse"}],bbar:["->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this.de_appProp(!0)},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.$wtarget=null,this.down("[name=moption]").hide()},scope:this}],items:[new IG$.bpmnFpgP({name:"meditor",flex:1,instance:t.instance,ptrform:t}),{xtype:"fieldcontainer",name:"propgrid",autoScroll:!0,flex:1,layout:{type:"vbox",align:"stretch"},items:[]}]}]}]}],tbar:t.viewer_mode?null:[{iconCls:"icon-toolbar-save",name:"t_save",tooltip:IRm$.r1("L_SAVE_REPORT"),handler:function(){this.de_tbHdler("save")},scope:this},{iconCls:"icon-toolbar-saveas",name:"t_save_as",tooltip:IRm$.r1("L_SAVE_REPORT_AS"),handler:function(){this.de_tbHdler("saveas")},scope:this},"-",{iconCls:"icon-toolbar-pivot",name:"t_pivot",cls:"ig_r_design",$w:120,enabled:!1,enableToggle:!0,text:this.editmode?IRm$.r1("B_VIEWMODE"):IRm$.r1("B_EDITMODE"),tooltip:IRm$.r1("B_EDITMODE"),handler:function(){this.de_tbHdler("cmd_editmode")},scope:this},{name:"t_event",text:IRm$.r1("L_EVENT"),handler:function(){this.de_tbHdler("cmd_event")},scope:this},{name:"t_params",text:IRm$.r1("L_PARAMS"),handler:function(){this.de_tbHdler("cmd_params")},scope:this},"->",{name:"t_event",text:IRm$.r1("L_EXP"),handler:function(){this.de_tbHdler("cmd_export")},scope:this}],bbar:t.viewer_mode?null:{xtype:"toolbar",name:"_1",items:[{xtype:"button",text:"",name:"tbobjname",tooltip:IRm$.r1("L_SK_RPT"),handler:function(){var e=this._mc,t=this.instance,n=t.m_explorer;e&&e.nodepath&&t.mainPanel&&n&&("tree"!=n.vmode&&IG$.changeApp(1),n.navigateTree.call(n,{name:e.name,nodepath:e.nodepath,uid:e.uid}))},scope:t},"-",{xtype:"button",text:"",name:"tbcubepath",tooltip:IRm$.r1("L_SK_RPT"),handler:function(){var e=this,t=new IG$.metaSelectDlg({instance:e.instance,visibleItems:"bobject;table;folder",targetobj:"bobject;",tree_options:{cubebrowse:!1},callback:new IG$.callBackObj(this,(function(t){t&&"Bobject"==t.type&&(e._mc.content.cube_objects=[t],e.de_upd_cube())}))});IG$.checkLogin(this,t)},scope:t}]}}],listeners:{afterrender:function(){var e=this;e.mainarea=e.down("[name=mainarea]"),e.meditor=e.down("[name=meditor]"),e.ru_init_f(),setTimeout((function(){e.ru_adj_h()}),800)},scope:this}}),IG$.bpmnForm.superclass.initComponent.call(this)}}),IG$.bpmnForm.$ld_dsgner=!0;