{"version":3,"sources":["dataworks_main.js","dataworks_mainpanel.js","dataworks_menu.js","dataworks_menu_proc.js","dataworks_dataset.js"],"names":["hist","lastHist","IG$","_source","historyManager","instance","this","addHistory","key","unFocus","History","hasMenu","allhash","getCurrent","p1","p2","i","k","val","s","sa","basehash","split","length","indexOf","substring","historyListener","chash","dlgLogin","logininfo","navigateMenu","addEventListener","checkUID","navigateMenuByUID","uid","hashtype","param","bhist","req","_rpc$","init","ack","payload","mbody","option","jdoc","node","itemuid","typename","type","toLowerCase","itemname","locale_name","name","itemaddr","nodepath","writable","manage","isexport","doc","$","document","rmain","toption","renderTo","minHeight","height","address","closable","_ts_","hiddenstatusbar","hiddentoolbar","header","title","getTabTitle","pitem","createAppPanel","on","_lc0","_lc1","cs","calcSize","call","setSize","width","resize","t","oldWidth","oldHeight","eOpts","dbody","body","j$ext","_w","_h","updateLayout","css","mainPanel","navigateApp","send","$ap","bbs_discussion","bbs_competition","_init_home","m","initRecentVisit","_init_dataset","b_first","load_lists","me","dataset_lists","_page","dataset_counts","workspace_lists","tb_dataset","tb_workspace","ds_bread","btn_search_dataset","bind","e","preventDefault","stopPropagation","changeApp","ltarget","hide","show","empty","top","IRm$","r1","appendTo","stopImmediatePropagation","load_workspace","lcur","lreq","metatypes","pid","xdoc","items","children","text","each","item","mdatefm","dateFmt","updatedate","updatedatefm","description","owner","join","th","subfolder","_init_dataset_detail","opt","data","dataset","dataset_tab","callback","callBackObj","steps","bodyTag","onStepChanging","event","currentIndex","newIndex","onStepChanged","priorIndex","onFinishing","onFinished","_datasets","render","update_locale","_dseditor","ds","_load_html","template","window","useLocale","_init_dataset_detail_old","dataset_div","resize_handler","w","h","clearTimeout","_tabtimer","_tabw","_tabh","setTimeout","remove","target_div","_init_report_lists","report_lists","typelist","mdate","modifier","_load_report","report","report_div","reports_tab","_reports","revision","fit_height","ReportView","ResizeObserver","resizeObserver","dzone","clientWidth","_clntWidth","setWidth","_vsize","observe","_root","bheight","box","Math","max","setHeight","_active_report","_init_board","btype","keyword","t_bbs","cuid","tmpl","idiv","_init_board_write","write_form","dv_bbs_view","_edit_item","_note","summernote","submit","formData","bbs_content","_g$a","FormData","Pace","start","ajax","url","ig$","servlet","async","contentType","processData","timeout","beforeSend","xhr","settings","cache","crossDomain","success","response","status","content","file","result","error","err","stop","ShowConnectionError","placeholder","disableResizeEditor","html","mode","menus","mainmenu","tab_wrapper","region","_cmn_ctrl","editmode","_tbar","setVisible","down","toolbarHandler","fireEvent","$loadApp","viewport","mview","appmenu","tappmenu","parseInt","cookie","__1m","__ep","fadeOut","complete","mainview","navitab","navitree","app_tmpl","theme_id","echarts_theme","printmode","m_explorer","acls","splice","__ep_l","undefined","_init_dw_menus","showLogout","showLoginProc","theme_options","themes","theme","push","disp","handler","hash","nurl","vars","murl","location","href","qseq","hashes","slice","nseq","code","v","replace","set_themes","_menu_button","btn_styles","menu_position","left","right","create","_init_dw_app","fix_height","heightWithoutNavbar","navbarHeigh","wrapperHeigh","hasClass","addClass","removeClass","toggleClass","slimScroll","railOpacity","wheelStep","button","find","label","next","fadeIn","removeAttr","tooltip","selector","container","scroll","scrollTop","popover","dom","ibox","closest","slideToggle","trigger","slimscroll","update_vars","tdiv","ldiv","odiv","div","mdiv","cdiv","amp_locale","attr","amp_location","procMenuCommand","createInstance","$l_m","webix","ui","fullScreen","env","touch","CustomScroll","r2","func","copt","loadExtend","rcsloaded","sessionUtils","MainPanel","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","firstDay","isRTL","showMonthAfterYear","yearSuffix","c1disp","c1format","c2disp","c2format","datepicker","setDefaults","calendar_locale","obj","extend","base","filteropcodes","l","lcode","locale","createLoginPanel","loadMapData","mts","m$mts","lang","islogin","uuid","sid","mts_name","lastLogin","updateLoginInfo","getUserDetail","callPhantom","_proc","showLogin","_n5","session","session_expire","inrequest","reqtimer","count","timer","setInterval","r","mm","floor","clearInterval","refreshMessages","readmode","rs_refreshMessages","errcode","showerror","thtml","prop","nmax","chatsublist","rnode","XGetNode","cnodes","XGetChildNodes","L_SPPL","XGetAttrProp","append","min","XGetTextVal","getFormattedDate","setWeb3TopMenu","appmenu_el","mainFooter","mainNav","innerLogo","menuroles","features","footmenu","rcs","prepend","cmd","tmenu","cls","tmenu_title","icon","info","info_html","sv","menu","flyout","lindex","ms","gf","cr","j","sm","c","tul","si","timg","src","desc","afterrender","lform","target","application_title_html","application_title","initData","value","userid","$s","panel","margin","resizeTabs","minTabWidth","enableTabScroll","activeTab","layout","deferredRender","hidemode","tabPosition","removePanelHeader","plain","maxTabWidth","___tabseq","customAddTab","ext_panel","tab","getComponent","setActiveTab","id","add","itemtype","baddhistory","mkey","applyOption","procRunDashboard","isWindow","toUpperCase","ps","selectedIndex","p","pg_links","btn1","welcome","mviewer","mrecenttext","unbind","loadRecentVisit","mexplorer","isVisible","hidden","el","__pg_linksitems","initAdminMenu","dmgrmenu","cl","li","tli","mi","ltime","lmsg","cur_login_user_id","cur_login_user_nm","cur_login_host","last_login_time","last_login_host","llogin","home_app_title","home_app_desc","lastaccesstime","username","formatDate","lastaccessaddr","accessaddr","rs_loadContent","idv_recitems","idv_recitems_ds","tmap","fatype","sort","a","b","shortcuts","tpl","utype","prd","fab_mdateprd","dtime","fab_mdatefmt","onAdd","index","tabpanel","prototype","initComponent","concat","dockedItems","itemCls","activeItem","mainPanelTabBar","tabbar","xtype","dock","flex","orientation","cardLayout","tabPanel","padding","bodyPadding","listeners","tabclick","tobj","ev","tabBar","superclass","card","getActiveTab","getTabBar","onItemEnable","onItemDisable","onRemove","destroying","__atab","beforeadd","comp","eopts","atab","maxtab","maxtapcount","$ex","removeOption","tabid","dlgpop","itemid","modname","cmdl","popt","modscr","mp","passwordMgr","checkLogin","userpref","makeItem","parentnodepath","parentuid","workspace_switcher","dicmode","aboutApp","styletype","rsn_editor","mod_type","dlg","app_wizard","ltW","dlgSmartWizard","showDlg","_cmode","_app_module_","modetype","opt_editmode","create_meta","open","loadUID","scripts","bootconfig","scmap","getScriptCache","ShowError","_init","loadContent","_rs_loadContent","dw_wizard","dataset_btn_next","dataset_btn_edit","_mc","dlg_dw_wzd_pnl","_viewer","vmode","bodyCls","active","_active","_confirm_step3","setPage","setAppMode","setLoading","alertmsg","appname","loadJoins","loadUserDB","mj","joins","gjoin","stable","source","tableuid","sfield","stablename","tablename","stablelabel","tablelabel","sfieldname","ttable","tfield","ttablename","ttablelabel","tfieldname","oprel","sdesc","tdesc","b_loading","bobj_datasource","sel_db","dbs","staging_dbs","attributes","attrb1","scid","bobj_uid","datasource","_startapp","sdb","datasource_selected","dlg_select_ds","sel","_m5","datafiles","filename","sheetname","_set_ds","getTbls","uploadFile","tnodes","m1","m1f","dp","load_fields","rec","tnode","pname","attrb3"],"mappings":"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","file":"../../../../../../dataworks_main.min.js","sourcesContent":["// mecapp = null;\r\n\r\nIG$._source = \"dataworks\";\r\n\r\nIG$.historyManager = function(instance) {\r\n\tthis.instance = instance;\r\n\t\r\n\tthis.addHistory = function (key) {\r\n\t\tunFocus.History.addHistory(key);\r\n\t};\r\n\t\r\n\tthis.hasMenu = function() {\r\n\t\tvar allhash = unFocus.History.getCurrent();\r\n\t\tif (allhash && allhash != \"\")\r\n\t\t{\r\n\t\t\tvar basehash = allhash.split('&'),\r\n\t\t\t\tp1, p2, i, k, val, s, sa;\r\n\t\t\t\r\n\t\t\tfor (i=0; i < basehash.length; i++)\r\n\t\t\t{\r\n\t\t\t\tsa = basehash[i];\r\n\t\t\t\ts = sa.indexOf(\"=\");\r\n\t\t\t\tif (s > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tk = sa.substring(0, s);\r\n\t\t\t\t\tval = sa.substring(s+1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tswitch (k)\r\n\t\t\t\t\t{\r\n\t\t\t\t\tcase \"lang\":\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"p1\":\r\n\t\t\t\t\t\tp1 = val;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"p2\":\r\n\t\t\t\t\t\tp2 = val;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (p1 && p2)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t};\r\n\t\r\n\tthis.historyListener = function() {\r\n\t\tvar chash = unFocus.History.getCurrent();\r\n\t\t\r\n\t\tif (chash != null && chash != \"\" && instance.dlgLogin.logininfo)\r\n\t\t{\r\n\t\t\tIG$.navigateMenu(instance, chash);\r\n\t\t}\r\n\t\t\r\n\t\treturn chash;\r\n\t};\r\n\t\r\n\tunFocus.History.addEventListener('historyChange', this.historyListener);\r\n}\r\n\r\nIG$.navigateMenu = function(instance, allhash)\r\n{\r\n\tif (allhash && allhash.length > 0 && lastHist != allhash)\r\n\t{\r\n\t\tif(IG$.checkUID(allhash))\r\n\t\t{\r\n\t\t\tp2 = allhash;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar basehash = allhash.split('&'),\r\n\t\t\t\tp1, p2, i, k, val, s, sa;\r\n\t\t\t\r\n\t\t\tfor (i=0; i < basehash.length; i++)\r\n\t\t\t{\r\n\t\t\t\tsa = basehash[i];\r\n\t\t\t\ts = sa.indexOf(\"=\");\r\n\t\t\t\tif (s > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tk = sa.substring(0, s);\r\n\t\t\t\t\tval = sa.substring(s+1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tswitch (k)\r\n\t\t\t\t\t{\r\n\t\t\t\t\tcase \"lang\":\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"p1\":\r\n\t\t\t\t\t\tp1 = val;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"p2\":\r\n\t\t\t\t\t\tp2 = val;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (p2)\r\n\t\t{\r\n\t\t\tIG$.navigateMenuByUID(instance, p2, p1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nIG$.navigateMenuByUID = function(instance, uid, hashtype, param, bhist)\r\n{\r\n\tvar req = new IG$._rpc$();\r\n\t\r\n\treq.init(null, \r\n\t\t{\r\n\t\t\tack: \"helpcontent\",\r\n\t\t\tpayload: {uid: uid},\r\n\t\t\tmbody: {option: \"translate\"}\r\n\t\t}, null, function(jdoc) {\r\n\t\t\tvar node = jdoc[0];\r\n\t\t\t\r\n\t\t\tvar itemuid = node.uid,\r\n\t\t\t\ttypename = node.type.toLowerCase(),\r\n\t\t\t\titemname = node.locale_name || node.name,\r\n\t\t\t\titemaddr = node.nodepath,\r\n\t\t\t\twritable = node.manage || node.writable,\r\n\t\t\t\tisexport = false; \r\n\t\t\t\t\r\n\t\t\tif (typename == 'dashboard' && hashtype == 'dashboardedit')\r\n\t\t\t{\r\n\t\t\t\ttypename = hashtype;\r\n\t\t\t}\r\n\t\t\telse if (typename == \"export\")\r\n\t\t\t{\r\n\t\t\t\tisexport = true;\r\n\t\t\t\ttypename = \"report\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (isexport == true)\r\n\t\t\t{\r\n\t\t\t\tvar doc = $(document),\r\n\t\t\t\t\trmain = $(\"#main\"),\r\n\t\t\t\t\ttoption = {\r\n\t\t\t\t\t\trenderTo: rmain[0],\r\n\t\t\t\t\t\tminHeight: doc.height(),\r\n\t\t\t\t\t\taddress: itemaddr,\r\n\t\t\t\t\t\tclosable: false,\r\n\t\t\t\t\t\t_ts_: false,\r\n\t\t\t\t\t\thiddenstatusbar: true,\r\n\t\t\t\t\t\thiddentoolbar: true,\r\n\t\t\t\t\t\theader: false,\r\n\t\t\t\t\t\ttitle: IG$.getTabTitle(itemname)\r\n\t\t\t\t\t};\r\n//\t\t\t\t\toption = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\tpitem = IG$.createAppPanel(instance, itemuid, typename, itemname, itemaddr, writable, toption);\r\n\t\t\t\t\tpitem.on({\r\n\t\t\t\t\t\t_lc0: function() {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t_lc1: function() {\r\n\t\t\t\t\t\t\tvar cs = pitem.calcSize.call(pitem);\r\n\t\t\t\t\t\t\tpitem.setSize(cs.width, cs.height);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresize: function(t, width, height, oldWidth, oldHeight, eOpts) {\r\n\t\t\t\t\t\t\tvar dbody = $(document.body);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIG$.j$ext._w(rmain, width);\r\n\t\t\t\t\t\t\tIG$.j$ext._h(rmain, height);\r\n\t\t\t\t\t\t\tIG$.j$ext._w(dbody, width);\r\n\t\t\t\t\t\t\tIG$.j$ext._h(dbody, height);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tpitem.updateLayout();\r\n\t\t\t\t\tpitem.setSize(doc.width(), doc.height());\r\n\t\t\t\t\r\n\t\t\t\trmain.css({minHeight: (doc.height() + \"px\")});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinstance.mainPanel.navigateApp.call(instance.mainPanel, itemuid, typename, itemname, itemaddr, (typeof(bhist) == \"undefined\" ? true : bhist), writable, null, param);\r\n\t\t\t}\r\n\t\t}, null);\r\n\treq.send(instance);\r\n}\r\n\r\nvar hist,\r\n\tlastHist;\r\n\t\r\nIG$.$ap = {\r\n\tbbs_discussion: \"357f2c02-456246f0\",\r\n\tbbs_competition: \"0015723f-ece24e53\",\r\n\t\r\n\t_init_home: function(instance, m) {\r\n\t\tvar me = this;\r\n\t\t\t\r\n\t\tinstance.mainPanel.initRecentVisit.call(instance.mainPanel);\r\n\t},\r\n\t\r\n\t_init_dataset: function(instance, m, b_first) {\r\n\t\tvar me = m,\r\n\t\t\tdataset_lists = $(\"#dataset_lists\", m._page),\r\n\t\t\tdataset_counts = $(\"#dataset_counts\", m._page),\r\n\t\t\tworkspace_lists = $(\"#workspace_lists\", m._page),\r\n\t\t\ttb_dataset = $(\"#tb_dataset\", m._page),\r\n\t\t\ttb_workspace = $(\"#tb_workspace\", m._page),\r\n\t\t\tds_bread = $(\"#ds_bread .breadcrumb\", m._page),\r\n\t\t\tbtn_search_dataset = $(\"#btn_search_dataset\", m._page),\r\n\t\t\ttxt_search_dataset = $(\"#txt_search_dataset\", m._page),\r\n\t\t\tload_lists;\r\n\t\t\r\n\t\tif (b_first)\r\n\t\t{\r\n\t\t\t$(\"#btn_reg_dataset\", me._page).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\t\r\n\t\t\t\tIG$.changeApp(instance, \"dataset\");\r\n\t\t\t});\r\n\r\n\t\t\tbtn_search_dataset.bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tload_lists = function(ltarget) {\r\n\t\t\ttb_workspace.hide();\r\n\t\t\ttb_dataset.show();\r\n\r\n\t\t\tdataset_lists.empty();\r\n\t\t\tdataset_counts.empty();\r\n\r\n\t\t\tds_bread.empty();\r\n\r\n\t\t\tvar top = $('<li class=\"active\"><a href=\"\"><span amp_type=\"locale\" amp_locale=\"S_HOME\">' + IRm$.r1(\"S_HOME\") + '</span></a></li>').appendTo(ds_bread);\r\n\r\n\t\t\t$(\"a\", top).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tload_workspace();\r\n\t\t\t});\r\n\r\n\t\t\tvar lcur = $('<li class=\"active\"><a href=\"\"><strong><span amp_type=\"locale\" amp_locale=\"S_HOME\">' + ltarget.name + '</span></strong></a></li>').appendTo(ds_bread);\r\n\r\n\t\t\t$(\"a\", lcur).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tload_lists(ltarget);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar lreq = new IG$._rpc$();\r\n\t\t\tlreq.init(me,\r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\t\tpayload: {uid: null},\r\n\t\t\t\t\tmbody: {option: 'search', metatypes: \"DataSet\", pid: ltarget.pid}\r\n\t\t\t\t}, me, function(xdoc) {\r\n\t\t\t\t\tvar items = xdoc.children;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (items)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdataset_counts.text(\"\" + items.length);\r\n\t\t\t\t\t\t$.each(items, function(i, item) {\r\n\t\t\t\t\t\t\tvar mdatefm = IG$.dateFmt(item.updatedate, true) || item.updatedatefm;\r\n\t\t\t\t\t\t\tvar t = [\r\n\t\t\t\t\t\t\t\t'<tr>',\r\n                                '    <td class=\"client-avatar\"><img alt=\"image\" src=\"./images/dataset/dataset_logo.png\"> </td>',\r\n                                '    <td><a data-toggle=\"tab\" href=\"\" class=\"client-link\">' + item.name + '</a></td>',\r\n                                '    <td> ' + (item.description || '-') + ' <small><i class=\"fa fa-clock-o\"></i> ' + mdatefm + '</small></td>',\r\n                                '    <td class=\"contact-type\"><!-- i class=\"fa fa-envelope\"> </i --></td>',\r\n                                '    <td> ' + item.owner + '</td>',\r\n                                // '    <td class=\"client-status\"><span class=\"label label-primary\">Active</span></td>',\r\n                                '</tr>'].join(\"\\n\");\r\n\t\t\t                \r\n\t\t\t                var th = $(t).appendTo(dataset_lists);\r\n\t\t\t                \r\n\t\t\t                $(\"a\", th).bind(\"click\", function(e) {\r\n\t\t\t                \te.stopPropagation();\r\n\t\t\t                \te.preventDefault();\r\n\t\t\t                \t\r\n\t\t\t                \tIG$.changeApp(instance, \"dataset\", item);\r\n\t\t\t                });\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\r\n\t\t\tlreq.send();\r\n\t\t};\r\n\t\t\r\n\t\tload_workspace = function() {\r\n\t\t\tworkspace_lists.empty();\r\n\t\t\ttb_workspace.show();\r\n\t\t\ttb_dataset.hide();\r\n\r\n\t\t\tds_bread.empty();\r\n\r\n\t\t\tvar top = $('<li class=\"active\"><a href=\"\"><strong><span amp_type=\"locale\" amp_locale=\"S_HOME\">' + IRm$.r1(\"S_HOME\") + '</span></strong></a></li>').appendTo(ds_bread);\r\n\r\n\t\t\t$(\"a\", top).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tload_workspace();\r\n\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\tvar lreq = new IG$._rpc$();\r\n\t\t\tlreq.init(me,\r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"content\",\r\n\t\t\t\t\tpayload: {uid: \"/\", type: \"Folder\"},\r\n\t\t\t\t\tmbody: {subfolder: \"T\"}\r\n\t\t\t\t}, me, function(xdoc) {\r\n\t\t\t\t\tvar items = xdoc.children;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (items)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdataset_counts.text(\"\" + items.length);\r\n\r\n\t\t\t\t\t\t$.each(items, function(i, item) {\r\n\t\t\t\t\t\t\tvar mdatefm = IG$.dateFmt(item.updatedate, true) || item.updatedatefm;\r\n\t\t\t\t\t\t\tvar t = [\r\n\t\t\t\t\t\t\t\t'<tr>',\r\n                                '    <td class=\"client-avatar\"><img alt=\"image\" src=\"./images/dataset/folder.png\"> </td>',\r\n                                '    <td><a data-toggle=\"tab\" href=\"\" class=\"client-link\">' + item.name + '</a></td>',\r\n                                '    <td> ' + (item.description || '-') + ' <small><i class=\"fa fa-clock-o\"></i> ' + mdatefm + '</small></td>',\r\n                                '    <td class=\"contact-type\"><!-- i class=\"fa fa-envelope\"> </i --></td>',\r\n                                '    <td> ' + item.owner + '</td>',\r\n                                // '    <td class=\"client-status\"><span class=\"label label-primary\">Active</span></td>',\r\n                                '</tr>'].join(\"\\n\");\r\n\t\t\t                \r\n\t\t\t                var th = $(t).appendTo(workspace_lists);\r\n\t\t\t                \r\n\t\t\t                $(\"a\", th).bind(\"click\", function(e) {\r\n\t\t\t                \te.stopPropagation();\r\n\t\t\t                \te.preventDefault();\r\n\t\t\t                \t\r\n\t\t\t                \tload_lists(item);\r\n\t\t\t                });\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\r\n\t\t\tlreq.send();\r\n\t\t};\r\n\r\n\t\tload_workspace();\r\n\t},\r\n\t\r\n\t_init_dataset_detail: function(instance, m, opt, b_first, data) {\r\n\t\tvar me = m,\r\n\t\t\tdataset_tab = $(\"#dataset_tab\", m._page),\r\n\t\t\ttemplate = \"./html/dw_dataset_editor.html\",\r\n\t\t\tcallback = new IG$.callBackObj(this, function(data) {\r\n\t\t\t\t$(\"#dataset_form\", me._page).steps({\r\n\t\t\t\t\tbodyTag: \"fieldset\",\r\n\t\t\t\t\tonStepChanging: function(event, currentIndex, newIndex) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonStepChanged: function (event, currentIndex, priorIndex) {\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFinishing: function (event, currentIndex) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFinished: function (event, currentIndex) {\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tIG$.$ap._init_dataset_detail(instance, m, opt, b_first, data);\r\n\t\t\t}),\r\n\t\t\tdataset;\r\n\t\t\t\r\n\t\topt = opt || {};\r\n\t\tme._datasets = me._datasets || {};\r\n\t\t\r\n\t\tif (me._datasets[opt.uid])\r\n\t\t{\r\n\t\t\tdataset = me._datasets[opt.uid];\r\n\t\t}\r\n\t\telse if (data)\r\n\t\t{\r\n\t\t\topt.render = $(data).appendTo(dataset_tab);\r\n\t\t\tIG$.update_locale(instance, opt.render);\r\n\t\t\tdataset = new IG$._dseditor(opt);\r\n\t\t\tme._datasets[opt.uid] = dataset;\r\n\t\t}\r\n\t\t\r\n\t\tif (dataset)\r\n\t\t{\r\n\t\t\t$.each(me._datasets, function(k, ds) {\r\n\t\t\t\tif (k == opt.uid || dataset == ds)\r\n\t\t\t\t{\r\n\t\t\t\t\tds.show();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tds.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tIG$._load_html(template + \"?lang=\" + window.useLocale, callback);\r\n\t\t}\r\n\t},\r\n\t\r\n\t_init_dataset_detail_old: function(instance, m, opt, b_first) {\r\n\t\tvar me = m,\r\n\t\t\tdataset_tab = $(\"#dataset_tab\", m._page),\r\n\t\t\tdataset,\r\n\t\t\tdataset_div;\r\n\t\t\r\n\t\topt = opt || {};\r\n\t\tme._datasets = me._datasets || {};\r\n\t\t\r\n\t\tif (me._datasets[opt.uid])\r\n\t\t{\r\n\t\t\tdataset = me._datasets[opt.uid];\r\n\t\t}\r\n\t\t\r\n\t\tif (b_first)\r\n\t\t{\r\n\t\t\tvar resize_handler = function() {\r\n\t\t\t\tvar w = dataset_tab.width(),\r\n\t\t\t\t\th = dataset_tab.height();\r\n\t\t\t\t\t\r\n\t\t\t\tclearTimeout(me._tabtimer);\r\n\t\t\t\t\t\r\n\t\t\t\tif (w != me._tabw || h != me._tabw)\r\n\t\t\t\t{\r\n\t\t\t\t\tvoid 0;\r\n\t\t\t\t\r\n\t\t\t\t\t$.each(me._datasets, function(k, ds) {\r\n\t\t\t\t\t\tds.setSize && ds.setSize(w, h);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tme._tabw = w;\r\n\t\t\t\t\tme._tabh = h;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tme._tabtimer = setTimeout(function() {\r\n\t\t\t\t\tresize_handler();\r\n\t\t\t\t}, 10);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tme._tabtimer = setTimeout(function() {\r\n\t\t\t\tresize_handler();\r\n\t\t\t}, 10);\r\n\t\t}\r\n\t\t\r\n\t\tif (!dataset)\r\n\t\t{\r\n\t\t\tdataset_div = $(\"<div style='width:100%;height:100%;min-height:800px'></div>\").appendTo(dataset_tab);\r\n\t\t\t\r\n\t\t\tdataset = IG$.createAppPanel(instance, opt.uid, opt.type.toLowerCase() || \"dataset\", opt.name, null, true, {renderTo: dataset_div[0]}, new IG$.callBackObj(me, function() {\r\n\t\t\t\tIG$.$ap._init_dataset_detail(instance, m, opt, b_first);\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\tif (dataset)\r\n\t\t\t{\r\n\t\t\t\topt.target_div = dataset_div;\r\n\t\t\t\topt.instance = instance;\r\n\t\t\t\r\n\t\t\t\tme._datasets[opt.uid] = dataset;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdataset_div.remove();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t$.each(me._datasets, function(k, dataset) {\r\n\t\t\tif (k == opt.uid)\r\n\t\t\t{\r\n\t\t\t\tdataset.show();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdataset.hide();\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t\r\n\t_init_report_lists: function(instance, m) {\r\n\t\tvar me = m,\r\n\t\t\tworkspace_lists = $(\"#workspace_lists\", m._page),\r\n\t\t\treport_lists = $(\"#report_lists\", m._page),\r\n\t\t\tds_bread = $(\"#ds_bread .breadcrumb\", m._page),\r\n\t\t\tload_lists;\r\n\t\t\r\n\t\tload_lists = function(ltarget) {\r\n\t\t\tworkspace_lists.hide();\r\n\t\t\treport_lists.show();\r\n\r\n\t\t\treport_lists.empty();\r\n\r\n\t\t\tds_bread.empty();\r\n\r\n\t\t\tvar top = $('<li class=\"active\"><a href=\"\"><span amp_type=\"locale\" amp_locale=\"S_HOME\">' + IRm$.r1(\"S_HOME\") + '</span></a></li>').appendTo(ds_bread);\r\n\r\n\t\t\t$(\"a\", top).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tload_workspace();\r\n\t\t\t});\r\n\r\n\t\t\tvar lcur = $('<li class=\"active\"><a href=\"\"><strong><span amp_type=\"locale\" amp_locale=\"S_HOME\">' + ltarget.name + '</span></strong></a></li>').appendTo(ds_bread);\r\n\r\n\t\t\t$(\"a\", lcur).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tload_lists(ltarget);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar lreq = new IG$._rpc$();\r\n\t\t\tlreq.init(me,\r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\t\tpayload: {uid: null},\r\n\t\t\t\t\tmbody: {option: 'search', typelist: \"Report\", pid: ltarget.uid}\r\n\t\t\t\t}, me, function(xdoc) {\r\n\t\t\t\t\tvar items = xdoc.children;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (items)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$.each(items, function(i, item) {\r\n\t\t\t\t\t\t\tvar mdate = IG$.dateFmt(item.updatedate, true) || item.updatedatefm;\r\n\t\t\t\t\t\t\tvar t = [\r\n\t\t\t\t\t\t\t\t'<div class=\"faq-item\">',\r\n\t\t\t                    '        <div class=\"row\">',\r\n\t\t\t                    '            <div class=\"col-md-7\">',\r\n\t\t\t                    '                <a data-toggle=\"collapse\" href=\"\" class=\"faq-question\">' + item.name + '</a>',\r\n\t\t\t                    '                <small>Added by <strong>' + item.modifier + '</strong> <i class=\"fa fa-clock-o\"></i> ' + mdate + '</small>',\r\n\t\t\t                    '            </div>',\r\n\t\t\t                    '            <div class=\"col-md-3\">',\r\n\t\t\t                    '                <span class=\"small font-bold\">' + item.owner + '</span>',\r\n\t\t\t                    // '                <div class=\"tag-list\">',\r\n\t\t\t                    // '                    <span class=\"tag-item\">General</span>',\r\n\t\t\t                    // '                    <span class=\"tag-item\">License</span>',\r\n\t\t\t                    // '                </div>',\r\n\t\t\t                    '            </div>',\r\n\t\t\t                    // '            <div class=\"col-md-2 text-right\">',\r\n\t\t\t                    // '                <span class=\"small font-bold\">' + IRm$.r1(\"L_VOTING\") + '</span><br/>',\r\n\t\t\t                    // '                ',\r\n\t\t\t                    // '            </div>',\r\n\t\t\t                    '        </div>',\r\n\t\t\t                    '        <div class=\"row\">',\r\n\t\t\t                    '            <div class=\"col-lg-12\">',\r\n\t\t\t                    '                <div id=\"faq1\" class=\"panel-collapse collapse \">',\r\n\t\t\t                    '                    <div class=\"faq-answer\">',\r\n\t\t\t                    '                        <p>',\r\n\t\t\t                    '                            ' + (item.description || \"\"),\r\n\t\t\t                    '                        </p>',\r\n\t\t\t                    '                    </div>',\r\n\t\t\t                    '                </div>',\r\n\t\t\t                    '            </div>',\r\n\t\t\t                    '        </div>',\r\n\t\t\t                    '    </div>'].join(\"\\n\");\r\n\t\t\t                \r\n\t\t\t                var th = $(t).appendTo(report_lists);\r\n\t\t\t                \r\n\t\t\t                $(\"a\", th).bind(\"click\", function(e) {\r\n\t\t\t                \te.stopPropagation();\r\n\t\t\t                \te.preventDefault();\r\n\t\t\t                \t\r\n\t\t\t                \tIG$.changeApp(instance, \"report\", item);\r\n\t\t\t                });\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\r\n\t\t\tlreq.send();\r\n\t\t};\r\n\r\n\t\tload_workspace = function() {\r\n\t\t\tworkspace_lists.empty();\r\n\t\t\tworkspace_lists.show();\r\n\t\t\treport_lists.hide();\r\n\r\n\t\t\tds_bread.empty();\r\n\r\n\t\t\tvar top = $('<li class=\"active\"><a href=\"\"><strong><span amp_type=\"locale\" amp_locale=\"S_HOME\">' + IRm$.r1(\"S_HOME\") + '</span></strong></a></li>').appendTo(ds_bread);\r\n\r\n\t\t\t$(\"a\", top).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tload_workspace();\r\n\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\tvar lreq = new IG$._rpc$();\r\n\t\t\tlreq.init(me,\r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"content\",\r\n\t\t\t\t\tpayload: {uid: \"/\", type: \"Folder\"},\r\n\t\t\t\t\tmbody: {subfolder: \"T\"}\r\n\t\t\t\t}, me, function(xdoc) {\r\n\t\t\t\t\tvar items = xdoc.children;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (items)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$.each(items, function(i, item) {\r\n\t\t\t\t\t\t\tvar mdate = IG$.dateFmt(item.updatedate, true) || item.updatedatefm;\r\n\t\t\t\t\t\t\tvar t = [\r\n\t\t\t\t\t\t\t\t'<div class=\"faq-item\">',\r\n\t\t\t\t\t\t\t\t'        <div class=\"row\">',\r\n\t\t\t\t\t\t\t\t'            <div class=\"col-md-7\">',\r\n\t\t\t\t\t\t\t\t'                <a data-toggle=\"collapse\" href=\"\" class=\"faq-question\">' + item.name + '</a>',\r\n\t\t\t\t\t\t\t\t'                <small>Added by <strong>' + item.modifier + '</strong> <i class=\"fa fa-clock-o\"></i> ' + mdate + '</small>',\r\n\t\t\t\t\t\t\t\t'            </div>',\r\n\t\t\t\t\t\t\t\t'            <div class=\"col-md-3\">',\r\n\t\t\t\t\t\t\t\t'                <span class=\"small font-bold\">' + item.owner + '</span>',\r\n\t\t\t\t\t\t\t\t// '                <div class=\"tag-list\">',\r\n\t\t\t\t\t\t\t\t// '                    <span class=\"tag-item\">General</span>',\r\n\t\t\t\t\t\t\t\t// '                    <span class=\"tag-item\">License</span>',\r\n\t\t\t\t\t\t\t\t// '                </div>',\r\n\t\t\t\t\t\t\t\t'            </div>',\r\n\t\t\t\t\t\t\t\t// '            <div class=\"col-md-2 text-right\">',\r\n\t\t\t\t\t\t\t\t// '                <span class=\"small font-bold\">' + IRm$.r1(\"L_VOTING\") + '</span><br/>',\r\n\t\t\t\t\t\t\t\t// '                ',\r\n\t\t\t\t\t\t\t\t// '            </div>',\r\n\t\t\t\t\t\t\t\t'        </div>',\r\n\t\t\t\t\t\t\t\t'        <div class=\"row\">',\r\n\t\t\t\t\t\t\t\t'            <div class=\"col-lg-12\">',\r\n\t\t\t\t\t\t\t\t'                <div id=\"faq1\" class=\"panel-collapse collapse \">',\r\n\t\t\t\t\t\t\t\t'                    <div class=\"faq-answer\">',\r\n\t\t\t\t\t\t\t\t'                        <p>',\r\n\t\t\t\t\t\t\t\t'                            ' + (item.description || \"\"),\r\n\t\t\t\t\t\t\t\t'                        </p>',\r\n\t\t\t\t\t\t\t\t'                    </div>',\r\n\t\t\t\t\t\t\t\t'                </div>',\r\n\t\t\t\t\t\t\t\t'            </div>',\r\n\t\t\t\t\t\t\t\t'        </div>',\r\n\t\t\t\t\t\t\t\t'    </div>'].join(\"\\n\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar th = $(t).appendTo(workspace_lists);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$(\"a\", th).bind(\"click\", function(e) {\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tload_lists(item);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\r\n\t\t\tlreq.send();\r\n\t\t};\r\n\r\n\t\tload_workspace();\r\n\t},\r\n\t\r\n\t_load_report: function(instance, m, opt) {\r\n\t\tvar me = m,\r\n\t\t\treports_tab = $(\"#reports_tab\", m._page),\r\n\t\t\treport,\r\n\t\t\treport_div;\r\n\t\t\r\n\t\tme._reports = me._reports || {};\r\n\t\t\r\n\t\tif (me._reports[opt.uid])\r\n\t\t{\r\n\t\t\treport = me._reports[opt.uid];\r\n\t\t}\r\n\t\t\r\n\t\tif (!report)\r\n\t\t{\r\n\t\t\treport_div = $(\"<div class='ig_dw_report_area'></div>\").appendTo(reports_tab);\r\n\t\t\topt.renderTo = report_div[0];\r\n\t\t\topt.instance = instance;\r\n\t\t\topt.revision = \"\" + (opt.revision || \"\");\r\n\t\t\topt.fit_height = true;\r\n\t\t\tif (opt.uid)\r\n\t\t\t{\r\n\t\t\t\topt.hiddenstatusbar = true;\r\n\t\t\t\topt.hiddentoolbar = true;\r\n\t\t\t}\r\n\t\t\treport = new IG$.ReportView(opt);\r\n\t\t\tme._reports[opt.uid || \"new\"] = report;\r\n\r\n\t\t\tif (window.ResizeObserver)\r\n\t\t\t{\r\n\t\t\t\topt.resizeObserver = new ResizeObserver(function() {\r\n\t\t\t\t\tvar dzone = report.dzone,\r\n\t\t\t\t\t\tw = opt.renderTo.clientWidth;\r\n\r\n\t\t\t\t\tif (w != opt._clntWidth)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treport.setWidth(w);\r\n\t\t\t\t\t\treport._vsize();\r\n\t\t\t\t\t\topt._clntWidth = w;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}).observe(opt.renderTo);\r\n\t\t\t}\r\n\r\n\t\t\treport.on(\"dzone_layout_changed\", function(e) {\r\n\t\t\t\tvar dzone = report.dzone,\r\n\t\t\t\t\tdroot = dzone._root;\r\n\r\n\t\t\t\tif (droot)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar bheight = (dzone.box.height() + 3 * 34) || 600;\r\n\t\t\t\t\tbheight = Math.max(bheight, 600);\r\n\t\t\t\t\treport_div.css({\r\n\t\t\t\t\t\tminHeight: bheight\r\n\t\t\t\t\t});\r\n\t\t\t\t\treport.setHeight(bheight);\r\n\t\t\t\t\treport._vsize();\r\n\t\t\t\t}\r\n\t\t\t\tvoid 0;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t$.each(me._reports, function(k, report) {\r\n\t\t\tif (k == opt.uid || (!opt.uid && k == \"new\"))\r\n\t\t\t{\r\n\t\t\t\t$(report.renderTo).show();\r\n\t\t\t\tm._active_report = report;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t$(report.renderTo).hide();\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t\r\n\t_init_board: function(instance, m, b_first, btype, keyword) {\r\n\t\tvar me = m,\r\n\t\t\tt_bbs = $(\"#t_bbs\", m._page),\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\t\r\n\t\tt_bbs.empty();\r\n\t\t\r\n\t\tif (b_first)\r\n\t\t{\r\n\t\t\t$(\"#btn_write\", m._page).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\t\r\n\t\t\t\tIG$.changeApp(instance, \"bbs\", {btype: btype});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$(\"#btn_refresh\", m._page).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\t\r\n\t\t\t\tIG$.$ap._init_board(instance, m, false, btype);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treq.init(me,\r\n\t\t\t{\r\n\t\t\t\tack: \"bbs\",\r\n\t\t\t\tpayload: {option: \"list\", cuid: IG$.$ap[\"bbs_\" + btype]},\r\n\t\t\t\tmbody: {}\r\n\t\t\t}, me, function(xdoc) {\r\n\t\t\t\t$.each(xdoc, function(i, item) {\r\n\t\t\t\t\tvar tmpl;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (btype == \"discussion\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttmpl = [\r\n\t\t\t\t\t\t\t'<tr>',\r\n\t\t                    '    <td class=\"project-status\">',\r\n\t\t                    '        <span class=\"label label-primary\">Active</span>',\r\n\t\t                    '    </td>',\r\n\t\t                    '    <td class=\"project-title\">',\r\n\t\t                    '        <a href=\"\" id=\"btn_title\">' + item.title + '</a>',\r\n\t\t                    '        <br/>',\r\n\t\t                    '        <small><span>' + IRm$.r1(\"L_MOD_DATE\") + '</span> ' + item.mdatefm + '</small>',\r\n\t\t                    '    </td>',\r\n\t\t                    '    <td class=\"project-completion\">',\r\n\t\t                    '            <small>Completion with: 48%</small>',\r\n\t\t                    '            <div class=\"progress progress-mini\">',\r\n\t\t                    '                <div style=\"width: 48%;\" class=\"progress-bar\"></div>',\r\n\t\t                    '            </div>',\r\n\t\t                    '    </td>',\r\n\t\t                    '    <td class=\"project-people\">',\r\n\t\t                    '        <a href=\"\"><img alt=\"image\" class=\"img-circle\" src=\"\"></a>',\r\n\t\t                    '    </td>',\r\n\t\t                    '    <td class=\"project-actions\">',\r\n\t\t                    '        <a href=\"#\" id=\"btn_view\" class=\"btn btn-white btn-sm\"><i class=\"fa fa-folder\"></i> View </a>',\r\n\t\t                    '        <a href=\"#\" id=\"btn_modi\" class=\"btn btn-white btn-sm\"><i class=\"fa fa-pencil\"></i> Edit </a>',\r\n\t\t                    '    </td>',\r\n\t\t                    '</tr>'];\r\n\t\t            }\r\n\t\t            else if (btype == \"competition\")\r\n\t\t            {\r\n\t\t            \ttmpl = [\r\n\t\t            \t\t'<tr>',\r\n                            '    <td>',\r\n                            '        <span class=\"label label-primary\">Added</span>',\r\n                            '    </td>',\r\n                            '    <td class=\"issue-info\">',\r\n                            '        <a href=\"#\" id=\"btn_title\">ISSUE-23</a>',\r\n                            '       <small>' + item.title + '</small>',\r\n                            '    </td>',\r\n                            '    <td>',\r\n                            '        Adrian Novak',\r\n                            '    </td>',\r\n                            '    <td>' + item.mdatefm + '</td>',\r\n                            '    <td>',\r\n                            '        <span class=\"pie\">0.52,1.041</span>',\r\n                            '        2d',\r\n                            '    </td>',\r\n                            '    <td class=\"text-right\">',\r\n                            '        <button class=\"btn btn-white btn-xs\"> Tag</button>',\r\n                            '        <button class=\"btn btn-white btn-xs\"> Mag</button>',\r\n                            '        <button class=\"btn btn-white btn-xs\"> Rag</button>',\r\n                            '    </td>',\r\n                            '</tr>'\r\n\t\t            \t];\r\n\t\t            }\r\n                    \r\n                    var idiv = $(tmpl.join(\"\\n\")).appendTo(t_bbs);\r\n                    \r\n                    $(\"#btn_view\", idiv).bind(\"click\", function(e) {\r\n                    \te.preventDefault();\r\n                    \te.stopPropagation();\r\n                    \t\r\n                    \t\r\n                    });\r\n                    \r\n                    $(\"#btn_title\", idiv).bind(\"click\", function(e) {\r\n                    \te.preventDefault();\r\n                    \te.stopPropagation();\r\n                    \t\r\n                    \tIG$.changeApp(instance, \"bbs\", {btype: btype, uid: item.uid});\r\n                    });\r\n                    \r\n                    $(\"#btn_modi\", idiv).bind(\"click\", function(e) {\r\n                    \te.preventDefault();\r\n                    \te.stopPropagation();\r\n                    \t\r\n                    \tIG$.changeApp(instance, \"bbs\", {btype: btype, uid: item.uid});\r\n                    });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t\t\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\t_init_board_write: function(instance, m, opt, b_first) {\r\n\t\tvar me = m,\r\n\t\t\twrite_form,\r\n\t\t\tdv_bbs_view,\r\n\t\t\tbtype = opt.btype;\r\n\t\t\r\n\t\tme._edit_item = null;\r\n\t\t\r\n\t\twrite_form = $(\"#frm_bbs_write\", m._page).hide();\r\n\t\tdv_bbs_view = $(\"#dv_bbs_view\", m._page).hide();\r\n\t\t\r\n\t\t$(\"input[name=bbs_title]\", write_form).val(\"\");\r\n\t\t\r\n\t\tif (m._note)\r\n\t\t{\r\n\t\t\tm._note.summernote(\"code\", \"\");\r\n\t\t}\r\n\t\t\r\n\t\tif (b_first)\r\n\t\t{\r\n\t\t\twrite_form.submit(function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\r\n\t\t\t\tvar bbs_content = $(\"[name=bbs_content]\", m._page),\r\n\t\t\t\t\t_mts_ = $(\"[name=_mts_]\", m._page),\r\n\t\t\t\t\tformData;\r\n\t\t\t\t\r\n\t\t\t\t_mts_.val(IG$._g$a);\r\n\t\t\t\tbbs_content.val(m._note.summernote(\"code\"));\r\n\t\t\t\t\r\n\t\t\t\tformData = new FormData(this);\r\n\t\t\t\t\r\n\t\t\t\twindow.Pace && window.Pace.start();\r\n\t\t\t\t\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: ig$.servlet + \"/upload\",\r\n\t\t\t\t\tdata: formData,\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\tasync: true,\r\n\t\t\t\t\tcontentType: false,\r\n\t\t\t\t\tprocessData: false,\r\n\t\t\t\t\ttimeout: 0,\r\n\t\t\t\t\tbeforeSend: function(xhr, settings) {\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcache: false,\r\n\t\t\t\t\tcrossDomain: false,\r\n\t\t\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\t\treq.init(me,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tack: \"bbs\",\r\n\t\t\t\t\t\t\t\tpayload: {option: \"save\"},\r\n\t\t\t\t\t\t\t\tmbody: {\r\n\t\t\t\t\t\t\t\t\ttitle: $(\"input[name=bbs_title]\", m._page).val(),\r\n\t\t\t\t\t\t\t\t\tcontent: bbs_content.val(),\r\n\t\t\t\t\t\t\t\t\tfile: response.result.uid,\r\n\t\t\t\t\t\t\t\t\tcuid: IG$.$ap[\"bbs_\" + btype]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, me, function(xdoc) {\r\n\t\t\t\t\t\t\t\tIG$.changeApp(instance, \"discussion\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treq.send();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(xhr, status, err) {\r\n\t\t\t\t\t\twindow.Pace && window.Pace.stop();\r\n\t\t\t\t\t\tIG$.ShowConnectionError(me);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$(\"#btn_cancel\", m._page).bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tIG$.changeApp(instance, btype);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tm._note = $(\".summernote\", m._page).summernote({\r\n\t\t\t\tplaceholder: \"write here...\",\r\n\t\t\t\tdisableResizeEditor: true,\r\n\t\t\t\theight: 400\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tif (opt.uid)\r\n\t\t{\r\n\t\t\tvar req = new IG$._rpc$();\r\n\t\r\n\t\t\treq.init(null, \r\n\t\t\t\t{\r\n\t\t\t\t\tack: \"bbs\",\r\n\t\t\t\t\tpayload: {option: \"get\", uid: opt.uid},\r\n\t\t\t\t\tmbody: {}\r\n\t\t\t\t}, null, function(jdoc) {\r\n\t\t\t\t\tdv_bbs_view.show();\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(\"input[name=bbs_title]\", write_form).val(jdoc.title);\r\n\t\t\t\t\tm._note.summernote(\"code\", jdoc.content);\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(\"#dv_bbs_title\", dv_bbs_view).text(jdoc.title);\r\n\t\t\t\t\t$(\"#dv_bbs_content\", dv_bbs_view).html(jdoc.content);\r\n\t\t\t\t\t\r\n\t\t\t\t\tme._edit_item = jdoc;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\treq.send();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\twrite_form.show();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nIG$.changeApp = function(instance, mode, opt, b_first) {\r\n\tvar menus = ig$.mainmenu.mainmenu,\r\n\t\ttab_wrapper = $(\"#tab_wrapper\"),\r\n\t\ti, m,\r\n\t\tc,\r\n\t\tnindex = mode;\r\n\t\t\r\n\t$.each(menus, function(i, m) {\r\n\t\tif (m.region == mode)\r\n\t\t{\r\n\t\t\tif (!m._page)\r\n\t\t\t{\r\n\t\t\t\tvar callback = new IG$.callBackObj(this, function(data) {\r\n\t\t\t\t\tm._page = $(data).appendTo(tab_wrapper);\r\n\t\t\t\t\tIG$.update_locale(instance, m._page);\r\n\t\t\t\t\tIG$._cmn_ctrl(m._page);\r\n\t\t\t\t\tIG$.changeApp(instance, mode, opt, true);\r\n\t\t\t\t});\r\n\t\t\t\tIG$._load_html(m.template + \"?lang=\" + window.useLocale, callback);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tm._page.show();\r\n\t\t\t}\r\n\r\n\t\t\tif (b_first && m.region == \"report\")\r\n\t\t\t{\r\n\t\t\t\t$(\"#btn_rpt_edit\", m._page).bind(\"click\", function(e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvoid 0;\r\n\r\n\t\t\t\t\tif (m._active_report)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar report = m._active_report;\r\n\r\n\t\t\t\t\t\tif (report.hiddentoolbar)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treport.hiddentoolbar = false;\r\n\t\t\t\t\t\t\treport.hiddenstatusbar = false;\r\n\t\t\t\t\t\t\treport.editmode = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treport.hiddenstatusbar = true;\r\n\t\t\t\t\t\t\treport.hiddentoolbar = true;\r\n\t\t\t\t\t\t\treport.editmode = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treport._tbar.setVisible(!report.hiddentoolbar);\r\n\t\t\t\t\t\treport.down(\"[name=_1]\").setVisible(!report.hiddenstatusbar);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treport.toolbarHandler(\"cmd_editmode\");\r\n\t\t\t\t\t\treport.fireEvent(\"dzone_layout_changed\");\r\n\r\n\t\t\t\t\t\t$(this).html(IRm$.r1(report.hiddentoolbar ? \"B_EDITMODE\" : \"B_VIEWMODE\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(\"#btn_rpt_new\", m._page).bind(\"click\", function(e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvoid 0;\r\n\r\n\t\t\t\t\tIG$.changeApp(instance, \"report\", {\r\n\t\t\t\t\t\twritable: true,\r\n\t\t\t\t\t\ttype: \"Report\"\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if (b_first && m.region == \"report_list\")\r\n\t\t\t{\r\n\t\t\t\t$(\"#btn_rpt_new\", m._page).bind(\"click\", function(e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvoid 0;\r\n\r\n\t\t\t\t\tIG$.changeApp(instance, \"report\", {\r\n\t\t\t\t\t\twritable: true,\r\n\t\t\t\t\t\ttype: \"Report\"\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// console.log(\"process id \", i);\r\n\t\t\t\r\n\t\t\tswitch (m.region)\r\n\t\t\t{\r\n\t\t\tcase \"home\":\r\n\t\t\t\tIG$.$ap._init_home(instance, m);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"competition\":\r\n\t\t\t\tIG$.$ap._init_board(instance, m, b_first, \"competition\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"dataset_list\":\r\n\t\t\t\tIG$.$ap._init_dataset(instance, m, b_first);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"discussion\":\r\n\t\t\t\tIG$.$ap._init_board(instance, m, b_first, \"discussion\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"report_list\":\r\n\t\t\t\tIG$.$ap._init_report_lists(instance, m);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"report\":\r\n\t\t\t\tIG$.$ap._load_report(instance, m, opt);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bbs_write\":\r\n\t\t\t\tIG$.$ap._init_board_write(instance, m, opt, b_first);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"dataset\":\r\n\t\t\t\tIG$.$ap._init_dataset_detail(instance, m, opt, b_first);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tm._page && m._page.hide();\r\n\t\t}\r\n\t});\r\n};\r\n\r\nIG$.$loadApp = function(instance, tmpl) {\r\n\tvar viewport = instance.viewport,\r\n\t\tmainview,\r\n\t\tmview,\r\n\t\tappmenu,\r\n\t\tnavitab,\r\n\t\tntree,\r\n\t\ttabbaritems,\r\n\t\tappselitems,\r\n\t\tappselactive = 0,\r\n\t\ttappmenu = ig$.mainmenu.mainmenu,\r\n\t\ti,\r\n\t\tlmopt_w = (parseInt($.cookie(\"lmopt_w\")) || 0);\r\n\r\n\t// ig$.$l_ = ig$.$l_ || 0;\r\n\t\t\r\n\tif (instance.__1m/*viewportpanel*/ || IG$.__ep == true)\r\n\t{\r\n\t\tsetTimeout(function(){\r\n\t\t\t$(\"#loading\").fadeOut({\r\n\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t$(this).remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$(\"#loading-mask\").fadeOut({\r\n\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t$(this).remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, (IG$.__ep ? 0 : 100));\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\t\r\n\ttmpl = tmpl || {};\r\n\ttmpl.mainview = mview = tmpl.mainview || {},\r\n\tmview.appmenu = appmenu = mview.appmenu || {};\r\n\tmview.navitab = navitab = mview.navitab || {},\r\n\tmview.navitree = ntree = mview.navitree || {};\r\n\t\r\n\tig$.app_tmpl = tmpl;\r\n\t\r\n\tif (ig$.theme_id)\r\n\t{\r\n\t\tig$.echarts_theme = ig$.theme_id;\r\n\t}\r\n\r\n\tIG$.__ep = mview.appmenu.printmode;\r\n\t\r\n\tif (!appmenu.m_explorer && tappmenu)\r\n\t{\r\n\t\tfor (i=0; i < tappmenu.length; i++)\r\n\t\t{\r\n\t\t\tif (tappmenu[i].acls == \"ig_mnav\")\r\n\t\t\t{\r\n\t\t\t\ttappmenu.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetTimeout(function(){\r\n\t\t$(\"#loading\").fadeOut({\r\n\t\t\tcomplete: function() {\r\n\t\t\t\t$(this).remove();\r\n\t\t\t}\r\n\t\t});\r\n\t\t$(\"#loading-mask\").fadeOut({\r\n\t\t\tcomplete: function() {\r\n\t\t\t\t$(this).remove();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// IG$.alertmsg(ig$.appname, IRm$.r1(\"M_APP_LOADED\"), null, null, 0, \"success\");\r\n\t\t\r\n\t\tif (IG$.__ep_l)\r\n\t\t{\r\n\t\t\tIG$.navigateMenuByUID(instance, IG$.__ep_l, undefined, undefined, false);\r\n\t\t}\r\n\t\t\r\n\t}, (IG$.__ep ? 0 : 50));\r\n}\r\n\r\nIG$._init_dw_menus = function(instance) {\r\n\tvar btn_login = $(\"#btn_login\");\r\n\t\r\n\tbtn_login.bind(\"click\", function(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\t\r\n\t\tIG$.showLogout(new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);}));\r\n\t});\r\n\r\n\tvar set_themes = function(theme) {\r\n\t\tvar vars = {}, \r\n\t\t\thash,\r\n\t\t\tmurl = window.location.href,\r\n\t\t\tqseq = murl.indexOf(\"?\"),\r\n\t\t\turl = qseq > 0 ? murl.substring(0, qseq) : null,\r\n\t    \thashes = qseq > 0 ? murl.slice(qseq + 1).split('&') : null,\r\n\t    \tnurl,\r\n\t    \ti,\r\n\t    \tnseq = 0;\r\n\t    \r\n\t    if (hashes)\r\n\t    {\r\n\t\t    for(i = 0; i < hashes.length; i++)\r\n\t\t    {\r\n\t\t        hash = hashes[i].split('=');\r\n\t\t        vars[hash[0]] = hash[1];\r\n\t\t    }\r\n\t    }\r\n\t    \r\n\t    vars[\"theme\"] = theme.code || \"\";\r\n\t    \r\n\t    nurl = url + \"?\";\r\n\t    \r\n\t    $.each(vars, function(k, v) {\r\n\t    \tnurl += (nseq > 0 ? \"&\" : \"\") + k + \"=\" + v;\r\n\t    \tnseq++;\r\n\t    });\r\n\t    \r\n\t    window.location.replace(nurl);\r\n\t};\r\n\r\n\tvar theme_options = [];\r\n\t\r\n\t$.each(ig$.themes, function(i, theme) {\r\n\t\ttheme_options.push({\r\n\t\t\ttext: theme.disp,\r\n\t\t\thandler: function() {\r\n\t\t\t\tset_themes(theme);\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n\r\n\tvar menu_theme = new IG$._menu_button($(\"#btn_style\"), theme_options, {\r\n\t\tbtn_styles: [\"fadeInRight\"],\r\n\t\tmenu_position: {\r\n\t\t\ttop: 40,\r\n\t\t\tleft: \"initial\",\r\n\t\t\tright: 10\r\n\t\t}\r\n\t});\r\n\tmenu_theme.create();\r\n}\r\n\r\nIG$._init_dw_app = function() {\r\n\tfunction SmoothlyMenu() \r\n\t{\r\n\t    if (!$('body').hasClass('mini-navbar') || $('body').hasClass('body-small')) \r\n\t    {\r\n\t        // Hide menu in order to smoothly turn on when maximize menu\r\n\t        $('#side-menu').hide();\r\n\t        // For smoothly turn on menu\r\n\t        setTimeout(function () {\r\n\t            $('#side-menu').fadeIn(400);\r\n\t        }, 200);\r\n\t    } \r\n\t    else if ($('body').hasClass('fixed-sidebar')) \r\n\t    {\r\n\t        $('#side-menu').hide();\r\n\t        setTimeout(function () {\r\n\t            $('#side-menu').fadeIn(400);\r\n\t        }, 100);\r\n\t    } \r\n\t    else \r\n\t    {\r\n\t        // Remove all inline style from jquery fadeIn function to reset menu state\r\n\t        $('#side-menu').removeAttr('style');\r\n\t    }\r\n\t}\r\n\r\n\t// Add body-small class if window less than 768px\r\n    if ($(document).width() < 769) \r\n    {\r\n        $('body').addClass('body-small')\r\n    } \r\n    else \r\n    {\r\n        $('body').removeClass('body-small')\r\n    }\r\n    \r\n    // $('#side-menu').metisMenu();\r\n    \r\n    \r\n    \r\n    // Close menu in canvas mode\r\n    $('.close-canvas-menu').on('click', function () {\r\n        $(\"body\").toggleClass(\"mini-navbar\");\r\n    });\r\n    \r\n    // Run menu of canvas\r\n    $('body.canvas-menu .sidebar-collapse').slimScroll({\r\n        height: '100%',\r\n        railOpacity: 0.9\r\n    });\r\n\r\n    // Open close right sidebar\r\n    $('.right-sidebar-toggle').on('click', function () {\r\n        $('#right-sidebar').toggleClass('sidebar-open');\r\n    });\r\n\r\n    // Initialize slimscroll for right sidebar\r\n    $('.sidebar-container').slimScroll({\r\n        height: '100%',\r\n        railOpacity: 0.4,\r\n        wheelStep: 10\r\n    });\r\n\r\n    // Open close small chat\r\n    $('.open-small-chat').on('click', function () {\r\n        $(this).children().toggleClass('fa-comments').toggleClass('fa-remove');\r\n        $('.small-chat-box').toggleClass('active');\r\n    });\r\n\r\n    // Initialize slimscroll for small chat\r\n    $('.small-chat-box .content').slimScroll({\r\n        height: '234px',\r\n        railOpacity: 0.4\r\n    });\r\n\r\n    // Small todo handler\r\n    $('.check-link').on('click', function () {\r\n        var button = $(this).find('i');\r\n        var label = $(this).next('span');\r\n        button.toggleClass('fa-check-square').toggleClass('fa-square-o');\r\n        label.toggleClass('todo-completed');\r\n        return false;\r\n    });\r\n\r\n    // Minimalize menu\r\n    $('.navbar-minimalize').on('click', function () {\r\n        $(\"body\").toggleClass(\"mini-navbar\");\r\n        SmoothlyMenu();\r\n\r\n    });\r\n\r\n    // Tooltips demo\r\n    $('.tooltip-demo').tooltip({\r\n        selector: \"[data-toggle=tooltip]\",\r\n        container: \"body\"\r\n    });\r\n\r\n\r\n    // Full height of sidebar\r\n    function fix_height() {\r\n        var heightWithoutNavbar = $(\"body > #wrapper\").height() - 61;\r\n        $(\".sidebard-panel\").css(\"min-height\", heightWithoutNavbar + \"px\");\r\n\r\n        var navbarHeigh = $('nav.navbar-default').height();\r\n        var wrapperHeigh = $('#page-wrapper').height();\r\n\r\n        if (navbarHeigh > wrapperHeigh) {\r\n            $('#page-wrapper').css(\"min-height\", navbarHeigh + \"px\");\r\n        }\r\n\r\n        if (navbarHeigh < wrapperHeigh) {\r\n            $('#page-wrapper').css(\"min-height\", $(window).height() + \"px\");\r\n        }\r\n\r\n        if ($('body').hasClass('fixed-nav')) {\r\n            if (navbarHeigh > wrapperHeigh) {\r\n                $('#page-wrapper').css(\"min-height\", navbarHeigh + \"px\");\r\n            } else {\r\n                $('#page-wrapper').css(\"min-height\", $(window).height() - 60 + \"px\");\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    fix_height();\r\n\r\n    // Fixed Sidebar\r\n    $(window).bind(\"load\", function () {\r\n        if ($(\"body\").hasClass('fixed-sidebar')) {\r\n            $('.sidebar-collapse').slimScroll({\r\n                height: '100%',\r\n                railOpacity: 0.9\r\n            });\r\n        }\r\n    });\r\n\r\n    // Move right sidebar top after scroll\r\n    $(window).scroll(function () {\r\n        if ($(window).scrollTop() > 0 && !$('body').hasClass('fixed-nav')) {\r\n            $('#right-sidebar').addClass('sidebar-top');\r\n        } else {\r\n            $('#right-sidebar').removeClass('sidebar-top');\r\n        }\r\n    });\r\n\r\n    $(window).bind(\"load resize scroll\", function () {\r\n        if (!$(\"body\").hasClass('body-small')) {\r\n            fix_height();\r\n        }\r\n    });\r\n\r\n    $(\"[data-toggle=popover]\")\r\n        .popover();\r\n        \r\n    IG$._cmn_ctrl($(document));\r\n}\r\n\r\nIG$._cmn_ctrl = function(dom) {\r\n\t$('.collapse-link', dom).on('click', function () {\r\n        var ibox = $(this).closest('div.ibox');\r\n        var button = $(this).find('i');\r\n        var content = ibox.find('div.ibox-content');\r\n        content.slideToggle(200);\r\n        button.toggleClass('fa-chevron-up').toggleClass('fa-chevron-down');\r\n        ibox.toggleClass('').toggleClass('border-bottom');\r\n        setTimeout(function () {\r\n            ibox.resize();\r\n            ibox.find('[id^=map-]').resize();\r\n        }, 50);\r\n    });\r\n    \r\n    // Close ibox function\r\n    $('.close-link', dom).on('click', function () {\r\n        var content = $(this).closest('div.ibox');\r\n        content.remove();\r\n    });\r\n    \r\n    // Fullscreen ibox function\r\n    $('.fullscreen-link', dom).on('click', function () {\r\n        var ibox = $(this).closest('div.ibox');\r\n        var button = $(this).find('i');\r\n        $('body').toggleClass('fullscreen-ibox-mode');\r\n        button.toggleClass('fa-expand').toggleClass('fa-compress');\r\n        ibox.toggleClass('fullscreen');\r\n        setTimeout(function () {\r\n            $(window).trigger('resize');\r\n        }, 100);\r\n    });\r\n    \r\n\t// Add slimscroll to element\r\n    $('.full-height-scroll', dom).slimscroll({\r\n        height: '100%'\r\n    });\r\n}\r\n\r\nIG$.update_vars = function(instance, tdiv) {\r\n\tvar ldiv = $(\"div[amp_type=login]\", tdiv || \"body\"),\r\n\t\todiv = $(\"div[amp_type=logout]\", tdiv || \"body\");\r\n\t\t\r\n\t$.each(ldiv, function(i, div) {\r\n\t\tvar cdiv = $(div);\r\n\t\t\r\n\t\tcdiv.show();\r\n\t});\r\n\t\r\n\t$.each(odiv, function(i, div) {\r\n\t\tvar cdiv = $(div);\r\n\t\t\r\n\t\tcdiv.hide();\r\n\t});\r\n}\r\n\r\nIG$.update_locale = function(instance, tdiv) {\r\n\tvar mdiv = $(\"span[amp_type=locale]\", tdiv || \"body\"),\r\n\t\tidiv = $(\"input[amp_type=placeholder]\", tdiv || \"body\"),\r\n\t\tldiv = $(\"a[amp_type=link]\", tdiv || \"body\");\r\n\t\r\n\t$.each(mdiv, function(i, div) {\r\n\t\tvar cdiv = $(div),\r\n\t\t\tamp_locale = cdiv.attr(\"amp_locale\");\r\n\t\t\r\n\t\tif (amp_locale)\r\n\t\t{\r\n\t\t\tvar t = IRm$.r1(amp_locale);\r\n\t\t\tcdiv.html(t);\r\n\t\t}\r\n\t});\r\n\t\r\n\t$.each(idiv, function(i, div) {\r\n\t\tvar cdiv = $(div),\r\n\t\t\tamp_locale = cdiv.attr(\"amp_locale\");\r\n\t\t\r\n\t\tif (amp_locale)\r\n\t\t{\r\n\t\t\tvar t = IRm$.r1(amp_locale);\r\n\t\t\tcdiv.attr(\"placeholder\", t);\r\n\t\t}\r\n\t});\r\n\r\n\t$.each(ldiv, function(i, div) {\r\n\t\tvar cdiv = $(div),\r\n\t\t\tamp_location = cdiv.attr(\"amp_location\");\r\n\t\t\r\n\t\tif (amp_location)\r\n\t\t{\r\n\t\t\tcdiv.bind(\"click\", function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tvar loc = \"\"\r\n\t\t\t\tswitch (amp_location)\r\n\t\t\t\t{\r\n\t\t\t\tcase \"index\":\r\n\t\t\t\t\tIG$.procMenuCommand(instance, \"CMD_HOME\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\t\r\n\tIG$.update_vars(instance, tdiv);\r\n}\r\n\r\nIG$.createInstance = function(instance) {\r\n\t$(\"#lpt\", \"#loading\").css(\"width\", \"80%\");\r\n\t\r\n\tig$.$l_m = 1;\r\n\r\n\twebix.ui.fullScreen();\r\n\t\r\n\tif (!webix.env.touch) //  && webix.ui.scrollSize)\r\n\t\twebix.CustomScroll.init();\r\n\t\r\n\tIRm$.r2/*loadResources*/({\r\n\t\tfunc: function() {\r\n\t\t\t$(\"#lpt\", \"#loading\").css(\"width\", \"100%\");\r\n\t\t\t\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tvar i,\r\n\t\t\t\t\tcopt;\r\n\t\t\t\t\t\r\n\t\t\t\tIG$.loadExtend.rcsloaded = true;\r\n\t\t\t\t\r\n\t\t\t\tinstance.dlgLogin = new IG$.sessionUtils({instance: instance});\r\n\t\t\t\t\r\n\t\t\t\tinstance.mainPanel = new IG$.MainPanel({\r\n\t\t\t\t\tname: \"_I7d\",\r\n\t\t\t\t\tinstance: instance\r\n\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tcopt = {\r\n\t\t\t\t\tcloseText: IRm$.r1(\"L_C_CLOSE\"),\r\n\t\t\t\t\tprevText: IRm$.r1(\"L_C_PREV\"),\r\n\t\t\t\t\tnextText: IRm$.r1(\"L_C_NEXT\"),\r\n\t\t\t\t\tcurrentText: IRm$.r1(\"L_C_CUR\"),\r\n\t\t\t\t\tmonthNames: IRm$.r1(\"L_C_M_NAMES\").split(\"#\"),\r\n\t\t\t\t\tmonthNamesShort: IRm$.r1(\"L_C_M_NAMES_S\").split(\"#\"),\r\n\t\t\t\t\tdayNames: IRm$.r1(\"L_C_D_NAMES\").split(\"#\"),\r\n\t\t\t\t\tdayNamesShort: IRm$.r1(\"L_C_D_NAMES_S\").split(\"#\"),\r\n\t\t\t\t\tdayNamesMin: IRm$.r1(\"L_C_D_NAMES_M\").split(\"#\"),\r\n\t\t\t\t\tweekHeader: IRm$.r1(\"L_C_W_H\"),\r\n\t\t\t\t\tfirstDay: 0,\r\n\t\t\t\t\tisRTL: false,\r\n\t\t\t\t\tshowMonthAfterYear: true,\r\n\t\t\t\t\tyearSuffix: IRm$.r1(\"L_C_YR_SFX\"),\r\n\t\t\t\t\tc1disp: \"yyyy-mm-dd\",\r\n\t\t\t\t\tc1format: \"yy-mm-dd\",\r\n\t\t\t\t\tc2disp: \"yyyy-mm\",\r\n\t\t\t\t\tc2format: \"yy-mm\"\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t$.datepicker.setDefaults(copt);\r\n\t\t\t\t\r\n\t\t\t\tIG$.calendar_locale = copt;\r\n\t\t\t\t\r\n\t\t\t\tinstance.m_explorer = null;\r\n\t\t\t\t\r\n\t\t\t\tIG$.update_locale(instance);\r\n\t\t\t\t\r\n\t\t\t\t$.each(IG$.loadExtend.items, function(i, obj) {\r\n\t\t\t\t\tIG$.extend(obj.name, obj.base, obj.option);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$.each(IG$.filteropcodes, function(i, obj) {\r\n\t\t\t\t\tvar l = obj.lcode;\r\n\t\t\t\t\tobj.locale = IRm$.r1(l);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tvar uid = $.cookie(\"lui\") || \"\";\r\n\t\t\t\tvar upd = \"\";\r\n\t\t\t\t\t\r\n\t\t\t\tIG$.createLoginPanel(instance, uid, upd, true);\r\n\t\t\t\tIG$.loadMapData();\r\n\t\t\t\t\r\n\t\t\t\tIG$._init_dw_menus(instance);\r\n\t\t\t\t\r\n\t\t\t\tIG$._init_dw_app();\r\n\t\t\t\t\r\n\t\t\t\t// alert(\"Check login status\");\r\n\t\t\t\t\r\n\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\treq.init(null, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\t\t\tpayload: {},\r\n\t\t\t\t\t\tmbody: {\r\n\t\t\t\t\t\t\toption: \"loginstatus\",\r\n\t\t\t\t\t\t\tmts: (window.m$mts || \"ROOT\"), \r\n\t\t\t\t\t\t\tlang: (window.useLocale || \"\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, null, \r\n\t\t\t\t\tfunction(jdoc){\r\n\t\t\t\t\t\t//check out server login proc\r\n\t\t\t\t\t\t//var xmlmessage = IG$.toXMLString(xdoc),\r\n\t\t\t\t\t\tvar islogin = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (jdoc.uuid)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tislogin = true;\r\n\t\t\t\t\t\t\tinstance.dlgLogin.callback = new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);});\r\n\t\t\t\t\t\t\tinstance.dlgLogin.uuid = jdoc.uuid; \r\n\t\t\t\t\t\t\tinstance.dlgLogin.mts = {\r\n\t\t\t\t\t\t\t\tsid: jdoc.mts,\r\n\t\t\t\t\t\t\t\tname: jdoc.mts_name\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIG$._g$a = instance.dlgLogin.mts.sid; \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (window.m$mts && instance.dlgLogin.mts.name != window.m$mts && instance.dlgLogin.mts.sid != window.m$mts)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tIG$.showLogout(new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);}));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tinstance.dlgLogin.lastLogin = jdoc;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (instance.mainPanel)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tinstance.mainPanel.updateLoginInfo.call(instance.mainPanel);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tinstance.dlgLogin.getUserDetail.call(instance.dlgLogin, false);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\thist = new IG$.historyManager(instance);\r\n\t\t\t\t\t\t\thist.historyListener();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIG$.update_vars(instance);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (typeof window.callPhantom === \"function\") {\r\n\t\t\t\t\t\t\t\twindow.callPhantom({_proc: \"C\"});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (islogin == false)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tIG$.showLogin(instance, new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);}), 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(xdoc){\r\n\t\t\t\t\t\tIG$.showLogin(instance, new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);}), 0);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treq.send();\r\n\t\t\t\t\r\n\t\t\t}, (IG$.__ep ? 10 : 30));\r\n\t\t}\r\n\t});\r\n};\r\n\r\nIG$._n5/*mec_sesst*/ = function() {\r\n\tvar session = ig$.session,\r\n\t\tt = ig$.session_expire * 60,\r\n\t\tinrequest = false,\r\n\t\treqtimer = -1;\r\n\t\r\n\tif (session)\r\n\t{\r\n\t\t$(document).bind(\"mousemove\", function() {\r\n\t\t\tsession.count = 0;\r\n\t\t\t\r\n\t\t\tif (inrequest == false)\r\n\t\t\t{\r\n\t\t\t\tif (reqtimer > -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(reqtimer);\r\n\t\t\t\t\treqtimer = -1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treqtimer = setTimeout(function() {\r\n\t\t\t\t\tinrequest = true;\r\n\t\t\t\t\tvar req = new IG$._rpc$();\r\n\t\t\t\t\treq.init(null, \r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\t\t\t\tpayload: {mode: \"write\"},\r\n\t\t\t\t\t\t\tmbody: {option: \"wake\"}\r\n\t\t\t\t\t\t}, null, function(xdoc) {\r\n\t\t\t\t\t\t\tinrequest = false;\r\n\t\t\t\t\t\t\tsession.count = 0;\r\n\t\t\t\t\t\t}, null);\r\n\t\t\t\t\treq.send();\r\n\t\t\t\t}, 2000);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tsession.timer = setInterval(function() {\r\n\t\t\tvar r = t - session.count,\r\n\t\t\t\tdisp = \"\",\r\n\t\t\t\tmm = 0,\r\n\t\t\t\tm;\r\n\t\t\t\r\n\t\t\tif (r > 60)\r\n\t\t\t{\r\n\t\t\t\tmm = Math.floor(r / 60);\r\n\t\t\t\tm = r - (mm * 60);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tm = r;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (mm > 0)\r\n\t\t\t{\r\n\t\t\t\tdisp = mm + \" min \" + m + \" sec\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdisp = m + \" sec\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (r < 300)\r\n\t\t\t{\r\n\t\t\t\tsession.text.addClass(\"warn-sess-timer\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tsession.text.removeClass(\"warn-sess-timer\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsession.text.html(disp);\r\n\t\t\t\r\n\t\t\tif (r < 0)\r\n\t\t\t{\r\n\t\t\t\tclearInterval(session.timer);\r\n\t\t\t\tIG$.showLogout(instance, new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);}));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsession.count += 1;\r\n\t\t}, 1000);\r\n\t}\r\n}\r\n\r\nIG$.refreshMessages = function () {\r\n\tvar req = new IG$._rpc$();\r\n\t\r\n\treq.init(null, \r\n\t\t{\r\n\t\t\tack: \"helpcontent\",\r\n\t\t\tpayload: {mode: 'read'},\r\n\t\t\tmbody: {option: 'rsn', readmode: 0}\r\n\t\t}, null, IG$.rs_refreshMessages, function(errcode) {return true;});\r\n\treq.showerror = false;\r\n\treq.send();\r\n}\r\n\r\nIG$.rs_refreshMessages = function (xdoc) {\r\n\tvar i, thtml, prop, nmax,\r\n\t\tchatsublist = $(\"#chatsublist\"),\r\n\t\trnode = IG$.XGetNode(xdoc, \"/smsg\"),\r\n\t\tcnodes = IG$.XGetChildNodes(rnode);\r\n\t\r\n\tif (cnodes && cnodes.length > 0 && IG$.L_SPPL)\r\n\t{\r\n\t\tprop = IG$.XGetAttrProp(cnodes[0]);\r\n\t\tif (prop[\"msgid\"] == IG$.L_SPPL)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tchatsublist.empty();\r\n\tchatsublist.append($(\"<li class='view'><span><a href='javascript:f$7(\\\"CMD_RSN\\\")'>Write Message</a></span></li>\"));\r\n\t\r\n\tif (cnodes && cnodes.length > 0)\r\n\t{\r\n\t\tnmax = Math.min(5, cnodes.length);\r\n\t\t\r\n\t\tif (IG$.L_SPPL)\r\n\t\t{\r\n\t\t\t$(\"#alertstext\").text(\"Messages (New)\");\r\n\t\t}\r\n\t\t\r\n\t\tfor (i=0; i < nmax; i++)\r\n\t\t{\r\n\t\t\t// <a href=\"#\" class=\"delete\">X</a>\r\n\t\t\tprop = IG$.XGetAttrProp(cnodes[i]);\r\n\t\t\tif (i == 0)\r\n\t\t\t{\r\n\t\t\t\tIG$.L_SPPL = prop[\"msgid\"];\r\n\t\t\t}\r\n\t\t\tthtml = \"<li><a href='#' class='delete'>X</a><p><span style='color:#0000ff;'>\" + (prop[\"username\"] || \"\") + \": </span><br>\" + IG$.XGetTextVal(cnodes[i]) + \" <br><span style='color:#4d4d4d; font-size: 0.9em; float: right'>(\" + (IG$.getFormattedDate(prop[\"updatedate\"], true) || \"\") + \")</span></p></li>\";\r\n\t\t\tchatsublist.append($(thtml));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nIG$.setWeb3TopMenu = function(instance) {\r\n\tvar appmenu_el = $(\"#side-menu\"),\r\n\t\tmainFooter = $(\"#mainFooter\", appmenu_el),\r\n\t\tmainNav = appmenu_el, // $(\"#mainNav\", appmenu_el),\r\n\t\tinnerLogo = $(\"#innerLogo\", appmenu_el),\r\n\t\tmenus = ig$.mainmenu,\r\n\t\ti,\r\n\t\tmenuroles = ig$.features,\r\n\t\tcbtn = $(\".ig-c-button\", innerLogo),\r\n\t\tlmopt; //  = $.cookie(\"lmopt\");\r\n\t\r\n\t// ig$.$l_ = ig$.$l_ || 0;\r\n\t\r\n\tif (menus)\r\n\t{\r\n\t\tif (menus.footmenu)\r\n\t\t{\r\n\t\t\tfor (i=0; i < menus.footmenu.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (menus.footmenu[i].html)\r\n\t\t\t\t{\r\n\t\t\t\t\tmenus.footmenu[i].html.remove();\r\n\t\t\t\t\tmenus.footmenu[i].html = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$.each(menus.footmenu, function(i, m) {\r\n\t\t\t\t/*\r\n\t\t\t\tif ((m.acls == \"ig_sw_app\" || m.acls == \"ig_pref\") && ig$.$l_ > 5)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t*/\r\n\t\t\t\tvar mdiv = $(\"<li\" + (m.acls ? \" class='\" + m.acls + \"'\" : \"\") + \"><span>\" + (m.rcs ? IRm$.r1(m.rcs) : m.text) + \"</span></li>\");\r\n\t\t\t\tmainFooter.prepend(mdiv);\r\n\t\t\t\tmdiv.bind(\"click\", function() {\r\n\t\t\t\t\tif (m.handler)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tm.handler.call(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (m.cmd == \"logout\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tIG$.showLogout(instance, new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);}));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (m.cmd)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tIG$.procMenuCommand(instance, m.cmd);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tm.html = mdiv;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tif (menus.mainmenu && menuroles)\r\n\t\t{\r\n\t\t\tfor (i=0; i < menus.mainmenu.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif (menus.mainmenu[i].html)\r\n\t\t\t\t{\r\n\t\t\t\t\tmenus.mainmenu[i].html.remove();\r\n\t\t\t\t\tmenus.mainmenu[i].html = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar set_menu = function(menu) {\r\n\t\t\t\t$.each(menus.mainmenu, function(i, m) {\r\n\t\t\t\t\tif (m == menu)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tm.html && m.html.addClass(\"active\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tm.html && m.html.removeClass(\"active\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tmenu.handler && menu.handler(instance);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t$.each(menus.mainmenu, function(i, m) {\r\n\t\t\t\tvar n;\r\n\t\t\t\t\r\n\t\t\t\tif (m.acls && menuroles[m.acls] !== false)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (m.type != \"column\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\t\tvar tmenu = $(\"<li class='\" + (m.cls || \"\") + \"'></li>\").appendTo(mainNav),\r\n\t\t\t\t\ttmenu_title = $(\"<a href=''><i class='\" + (m.icon || \"\") + \"'></i><span class='nav-label'>\" + (m.rcs ? IRm$.r1(m.rcs) : m.text) + \"</span></a>\").appendTo(tmenu),\r\n\t\t\t\t\tgf;\r\n\t\t\t\t\r\n\t\t\t\tif (m.info)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmenu.info_html = $(\"<span class='label label-info pull-right'>62</span>\").appendTo(tmenu_title);\r\n\t\t\t\t}\r\n\t\t\t\tif (m.cmd)\r\n\t\t\t\t{\r\n\t\t\t\t\tIG$.procMenuCommand(instance, cmd);\r\n\t\t\t\t}\r\n\t\t\t\telse if (m.handler)\r\n\t\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttmenu_title.bind(\"click\", function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\ttmenu_title.bind(\"mousedown\", function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\ttmenu_title.bind(\"mouseup\", function(e) {\r\n\t\t\t\t\tvar flyout = $(\".flyout\", tmenu),\r\n\t\t\t\t\t\tv = 1,\r\n\t\t\t\t\t\tsv;\r\n\t\t\t\t\t\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (flyout && flyout.length > 0 && lindex != 4)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsv = m.sv;\r\n\t\t\t\t\t\t$(\".flyout\").hide();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.each(menus.mainmenu, function(i, ms) {\r\n\t\t\t\t\t\t\tif (ms != m)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tms.sv = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (sv)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tm.sv = 0;\r\n\t\t\t\t\t\t\tv = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tm.sv = 1;\r\n\t\t\t\t\t\t\tflyout.show();\r\n\t\t\t\t\t\t\t$(document).bind(\"mouseup\", gf);\r\n\t\t\t\t\t\t\tv = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (v == 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tset_menu(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tm.html = tmenu;\r\n\t\t\t\t\r\n\t\t\t\tif (m.menus && m.menus.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (m.type == \"column\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar t = $(\"<span class='fa arrow'></span>\").appendTo(tmenu_title),\r\n\t\t\t\t\t\t\tcr = $(\"<ul class='nav nav-second-level collapse'>\").appendTo(tmenu);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (m.handler) //  && ig$.$l_ < 5)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$(\".rightRaquoBlue\", t).bind(\"click\", function() {\r\n\t\t\t\t\t\t\t\tm.handler();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.each(m.menus, function(j, sm) {\r\n\t\t\t\t\t\t\t//if (sm.acls && menuroles[sm.acls] !== false)\r\n\t\t\t\t\t\t\t//\treturn;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar c = $(\"<div class='column\" + (sm.acls ? \" \" + sm.acls : \"\") + \"'><h6>\" + (sm.rcs ? IRm$.r1(sm.rcs) : sm.text) + \"</h6></div>\").appendTo(cr);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (sm.type == \"list\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar tul = $(\"<ul class='\" + (sm.acls || \"\") + \"'></ul>\").appendTo(c);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t$.each(sm.items, function(k, si) {\r\n\t\t\t\t\t\t\t\t\t// if (si.acls && menuroles[si.acls] !== false)\r\n\t\t\t\t\t\t\t\t\t//\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t$(\"<li class='chevronLink\" + (si.acls ? \" \" + si.acls : \"\") + \"'><span class='icon'></span><span class='title'>\" + (si.rcs ? IRm$.r1(si.rcs) : si.text) + \"</span></li>\").appendTo(tul).bind(\"click\", function() {\r\n\t\t\t\t\t\t\t\t\t\tif (si.cmd)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tIG$.procMenuCommand(instance, si.cmd);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (sm.type == \"image\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar timg,\r\n\t\t\t\t\t\t\t\t\ttdiv;\r\n\t\t\t\t\t\t\t\t timg = sm.src && $(\"<img src='\" + sm.src + \"'></img>\").appendTo(c);\r\n\t\t\t\t\t\t\t\t tdiv = sm.desc && $(\"<h3>\" + sm.desc + \"</h3>\").appendTo(c);\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t if (sm.cmd)\r\n\t\t\t\t\t\t\t\t {\r\n\t\t\t\t\t\t\t\t\t timg.bind(\"click\", function() {\r\n\t\t\t\t\t\t\t\t\t\t IG$.procMenuCommand(instance, sm.cmd);\r\n\t\t\t\t\t\t\t\t\t });\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t tdiv.bind(\"click\", function() {\r\n\t\t\t\t\t\t\t\t\t\t IG$.procMenuCommand(instance, sm.cmd);\r\n\t\t\t\t\t\t\t\t\t });\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tif (menus.afterrender)\r\n\t\t{\r\n\t\t\tmenus.afterrender.call(this, menus);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// IG$.tM/*activateMenu*/(tmenu, \"CMD_HOME\");\r\n\t\r\n\t// $(\"<div class='flyout'><h3><span class='rightRaquoBlue'>Home</span></h3><div class='colwrapper'><div class='column'><h6>Explorer</h6><ul><li class='chevronLink'><span>Home</span></li><li class='chevronLink'><span>Explorer</span></li><li class='chevronLink'><span>Open tabs</span></li></ul></div><div class='column'><h6>Explorer</h6><ul><li><span>Tab</span></li></ul></div><div class='column'><h6>Home</h6><ul><li><span>test1</span></li></ul></div></div></div>\").appendTo(tmenu);\r\n\t\r\n\t// tmenu = $(\"<li><span class='parent'>Browser</span></li>\").appendTo(mainNav);\r\n\t// IG$.tM/*activateMenu*/(tmenu, \"CMD_BROWSER\");\r\n\t\r\n\t// tmenu = $(\"<li><span class='parent'>Open Items</span></li>\").appendTo(mainNav);\r\n\t// IG$.tM/*activateMenu*/(tmenu, \"CMD_TABPANEL\");\r\n}\r\n\r\nIG$.showLoginProc = function(instance) {\r\n\tvar lform = $('#loginWindow', instance.target),\r\n\t\tuid = $(\"#userid\");\r\n\tlform.hide();\r\n\t\r\n\t$(\"#logo_txt\").html(ig$.application_title_html || ig$.application_title);\r\n\t\r\n\tinstance.m_explorer && instance.m_explorer.initData.call(instance.m_explorer);\r\n\t\r\n\tlastHist = null;\r\n\tif (!hist)\r\n\t{\r\n\t\thist = new IG$.historyManager();\r\n\t}\r\n\thist.historyListener();\r\n\t\r\n\tif (uid && uid.length > 0)\r\n\t\tuid[0].value = instance.dlgLogin.logininfo.userid;\r\n\t\r\n\t// top menu for classic top down\r\n\t// IG$._n4/*setTopMenu*/();\r\n\t\r\n\t// top menu for new style\r\n\t\r\n\tif (!IG$.__ep)\r\n\t{\r\n\t\tIG$.setWeb3TopMenu(instance);\r\n\t\tIG$.changeApp(instance, \"home\");\r\n\t}\r\n\t\r\n\t// var ischecked = $.cookie(\"wizard\");\r\n\t\r\n\t// if (ischecked != \"F\" && hist.hasMenu() == false)\r\n\t// {\r\n\t//\t if ((window.ig$ && window.ig$.onload_show_wizard != false) || ischecked == \"T\")\r\n\t//\t {\r\n\t//\t\t IG$.procMenuCommand(instance, \"CMD_APP_WIZARD\");\r\n\t//\t }\r\n\t// }\r\n}\r\n\r\n\r\n\r\n","IG$.MainPanel = $s.extend($s.panel, {\r\n\tmargin: '0 0 0 0',\r\n\tresizeTabs: true,\r\n\tminTabWidth: 100,\r\n\t// tabWidth: 135,\r\n\t\r\n\tenableTabScroll: true,\r\n\tactiveTab: 0,\r\n\tlayout: {\r\n\t\ttype: \"card\",\r\n\t\tdeferredRender: false\r\n\t},\r\n\t\r\n\tdeferredRender: false,\r\n\t\r\n\thidemode: \"offset\",\r\n\t\r\n\ttabPosition : 'top',\r\n\tremovePanelHeader: true,\r\n\r\n\tplain: false,\r\n\r\n\tminTabWidth: undefined,\r\n\tmaxTabWidth: undefined,\r\n\t___tabseq: 0,\r\n\t\r\n\tcustomAddTab: function(uid, ext_panel) {\r\n\t\tvar me = this,\r\n\t\t\tinstance = me.instance,\r\n\t\t\ttab = me.getComponent(uid);\r\n\t\t\t\r\n\t\tif (tab)\r\n\t\t{\r\n\t\t\tIG$.changeApp(instance, \"dataset_list\");\r\n\t\t\tme.setActiveTab(tab);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tIG$.changeApp(instance, \"dataset_list\");\r\n\t\t\text_panel.id = uid;\r\n\t\t\ttab = me.add(ext_panel);\r\n\t\t\tme.setActiveTab(tab);\r\n\t\t}\r\n\t},\r\n\t\r\n\tnavigateApp: function(uid, itemtype, itemname, itemaddr, baddhistory, writable, option, toption) {\r\n\t\tvar me = this,\r\n\t\t\tinstance = me.instance,\r\n\t\t\tkey,\r\n\t\t\tmkey = itemtype + \"_\" + (uid ? uid : me.___tabseq++),\r\n\t\t\ttab = this.getComponent(mkey);\r\n\t\t\t\r\n\t\tif (tab)\r\n\t\t{\r\n\t\t\tIG$.changeApp(instance, \"dataset_list\");\r\n\t\t\t\r\n\t\t\tthis.setActiveTab(tab);\r\n\t\t\t\r\n\t\t\tif (toption && tab.applyOption)\r\n\t\t\t{\r\n\t\t\t\ttab.applyOption.call(tab, toption);\r\n\t\t\t}\r\n\t\t\telse if (itemtype == \"dashboard\")\r\n\t\t\t{\r\n\t\t\t\tvar teditor = this.getComponent(\"dashboardedit\" + \"_\" + uid);\r\n\t\t\t\tif (teditor)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (tab.uid && tab.uid.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttab.procRunDashboard.call(tab);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar callback = new IG$.callBackObj(this, function() {\r\n\t\t\t\t\tthis.navigateApp(uid, itemtype, itemname, itemaddr, baddhistory, writable, option, toption);\r\n\t\t\t\t}),\r\n\t\t\t\tpitem = IG$.createAppPanel(me.instance, uid, itemtype, itemname, itemaddr, writable, option || null, callback);\r\n\t\t\t\r\n\t\t\tif (pitem)\r\n\t\t\t{\r\n\t\t\t\tpitem.address = itemaddr;\r\n\t\t\t\tpitem.title = IG$.getTabTitle(itemname);\r\n\t\t\t\t\r\n\t\t\t\tif (option)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (key in option)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpitem[key] = option[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (toption)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (key in toption)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpitem[key] = toption[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (pitem.isWindow == true)\r\n\t\t\t\t{\r\n\t\t\t\t\tbaddhistory = false;\r\n\t\t\t\t\tpitem.title = IG$.getTabTitle(itemname) + \" (\" + IRm$.r1(\"D_\" + itemtype.toUpperCase()) + \")\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!IG$.ps[pitem.address])\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tIG$.ps[pitem.address] = pitem;\r\n\t\t\t\t\t\tpitem.on(\"close\", function() {\r\n\t\t\t\t\t\t\tdelete IG$.ps[pitem.address];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpitem.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tIG$.changeApp(instance, \"dataset_list\");\r\n\t\t\t\t\tpitem.id = mkey;\r\n\t\t\t\t\tthis.selectedIndex = this.selectedIndex < 0 ? 0 : this.selectedIndex;\r\n\t\t\t\t\tvar p = this.add(pitem);\r\n\t\t\t\t\tthis.setActiveTab(p);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbaddhistory = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (baddhistory == true && uid && itemtype)\r\n\t\t{\r\n\t\t\t// lastHist = 'lang=' + useLocale + '&p1=' + itemtype + '&p2=' + uid;\r\n\t\t\tlastHist = \"&p1=\" + itemtype + \"&p2=\" + uid;\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\thist.addHistory(lastHist);\r\n\t\t\t}, 10);\r\n\t\t}\r\n\t},\r\n\t\r\n\tinitRecentVisit : function(){\r\n\t\tvar me = this,\r\n\t\t\tinstance = me.instance, \r\n\t\t\tbtn1 = $(\"#mbutton1\"),\r\n\t\t\tidv_recitems = $(\"#idv_recitems\"),\r\n\t\t\twelcome = $(\"#welcome\"),\r\n\t\t\titems,\r\n\t\t\tpg_links;\r\n\t\t\t\r\n\t\tme.mviewer = {\r\n\t\t\tmode: \"recent\",\r\n\t\t\tmrecenttext: btn1.text()\r\n\t\t};\r\n\t\t\r\n\t\tbtn1.unbind(\"click\");\r\n\t\t\r\n\t\tbtn1.bind(\"click\", function() {\r\n\t\t\tme.loadRecentVisit();\r\n\t\t});\r\n\t\t\r\n\t\tvar go_navigator = function() {\r\n\t\t\tvar mexplorer = me.down(\"[name=mexplorer]\");\r\n\t\t\tif (mexplorer && !mexplorer.isVisible())\r\n\t\t\t{\r\n\t\t\t\tIG$.changeApp(instance, \"competition\");\r\n\t\t\t}\r\n\t\t\telse if (instance.m_explorer && ig$.app_tmpl && ig$.app_tmpl.mainview && ig$.app_tmpl.mainview.navitree && ig$.app_tmpl.mainview.navitree.hidden !== false)\r\n\t\t\t{\r\n\t\t\t\tIG$.changeApp(instance, \"competition\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\titems = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Step by Step\",\r\n\t\t\t\tcls: \"getting_started\",\r\n\t\t\t\thandler: function() {\r\n\t\t\t\t\tIG$.procMenuCommand(instance, \"CMD_APP_WIZARD\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Navigator\",\r\n\t\t\t\tcls: \"navigator\",\r\n\t\t\t\thandler: function() {\r\n\t\t\t\t\tgo_navigator();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Excel file loading\",\r\n\t\t\t\tcls: \"fileupload\",\r\n\t\t\t\thidden: ig$.features[\"ig_dataset\"] !== false,\r\n\t\t\t\thandler: function() {\r\n\t\t\t\t\tIG$.procMenuCommand(instance, \"CMD_DATASET\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Database connection\",\r\n\t\t\t\tcls: \"database-con\",\r\n\t\t\t\thidden: ig$.features[\"ig_dbcon\"] !== false,\r\n\t\t\t\thandler: function() {\r\n\t\t\t\t\tIG$.procMenuCommand(instance, \"CMD_CONNECT_DB\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\t{\r\n\t\t\t\ttitle: \"About\",\r\n\t\t\t\tcls: \"about_app\",\r\n\t\t\t\thandler: function() {\r\n\t\t\t\t\tIG$.procMenuCommand(instance, \"CMD_ABOUT\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\n\t\t/*\r\n\t\tif (ig$.main_navigator === true)\r\n\t\t{\r\n\t\t\tgo_navigator();\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\tpg_links = $(\"#pg_links\", welcome);\r\n\t\tpg_links.empty();\r\n\t\t\r\n\t\t$.each(items, function(i, item) {\r\n\t\t\tif (item.hidden)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tvar el = $(\"<div class='intro-pg-column'><div class='intro-figure'><div class='image' title='\" + item.title + \"'><span class='\" + item.cls + \"'></span></div><div class='intro-figure-caption'><span class='intro-links'>\" + item.title + \"</span></div></div></div>\");\r\n\t\t\t\r\n\t\t\tel.appendTo(pg_links);\r\n\r\n\t\t\tif (el.length > 0 && item.handler)\r\n\t\t\t{\r\n\t\t\t\t$(\".image\", el).bind(\"click\", function() {\r\n\t\t\t\t\titem.handler();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$(\".intro-links\", el).bind(\"click\", function() {\r\n\t\t\t\t\titem.handler();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\titem.el = el;\r\n\t\t});\r\n\t\t\r\n\t\tme.__pg_linksitems = items;\r\n\t\t\t\t\r\n\t\tme.updateLoginInfo();\r\n\t\t\r\n\t\tme.loadRecentVisit();\r\n\t},\r\n\t\r\n\tinitAdminMenu: function() {\r\n\t\tvar dmgr = IG$.dmgrmenu,\r\n\t\t\tdom = dmgr.body.dom,\r\n\t\t\tbody = $(\".ig-mgr-body\", dom),\r\n\t\t\tcl = $(\".ig-mgr-panel-close\", dom),\r\n\t\t\tmenus = ig$.mainmenu.mainmenu,\r\n\t\t\tmenu,\r\n\t\t\ti,\r\n\t\t\tli,\r\n\t\t\ttli,\r\n\t\t\ttul;\r\n\t\t\t\r\n\t\tbody.empty();\r\n\t\t\r\n\t\tcl.bind(\"click\", function() {\r\n\t\t\tIG$.procMenuCommand(instance, \"CMD_HOME\");\r\n\t\t});\r\n\t\t\r\n\t\tif (!menus)\r\n\t\t\treturn;\r\n\t\t\t\t\r\n\t\t$.each(menus, function(i, menu) {\r\n\t\t\ttul = $(\"<ul class='ig-mgr-group'></ul>\").appendTo(body);\r\n\t\t\t\r\n\t\t\tmenu.tul = tul;\r\n\t\t\tmenu.tul.hide();\r\n\t\t\t\r\n\t\t\tmenu.menus && $.each(menu.menus, function(j, m) {\r\n\t\t\t\tvar li = $(\"<li class='ig-mgr-group-item \" + (m.acls || \"\") + \" animate-box fadeInLeft animated'><div class='ig-mgr-title'><span class='icon'></span><h3>\" + (IRm$.r1(m.rcs) || m.text) + \"</h3></div><ul class='ig-mgr-menu'></ul></li>\").appendTo(tul),\r\n\t\t\t\t\ttli = $(\".ig-mgr-menu\", li);\r\n\t\t\t\t\t\r\n\t\t\t\t$.each(m.items, function(k, mi) {\r\n\t\t\t\t\tvar btn = $(\"<li class='ig-mgr-menu-item \" + (mi.acls || \"\") + \"'>\" + (IRm$.r1(mi.rcs) || mi.text) + \"</li>\").appendTo(tli);\r\n\t\t\t\t\tbtn.bind(\"click\", function() {\r\n\t\t\t\t\t\tif (mi.handler)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmi.handler.call(this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (mi.cmd == \"logout\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tIG$.showLogout(instance, new IG$.callBackObj(this, function() {IG$.showLoginProc(instance);}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (mi.cmd)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tIG$.procMenuCommand(instance, mi.cmd);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\t\r\n\tupdateLoginInfo: function() {\r\n\t\tvar me = this,\r\n\t\t\tinstance = me.instance,\r\n\t\t\tllogin = $(\"#last_login\"),\r\n\t\t\tltime,\r\n\t\t\tlmsg,\r\n\t\t\tviewport = instance.viewport,\r\n\t\t\tlogininfo = instance.dlgLogin ? instance.dlgLogin.logininfo : null,\r\n\t\t\tcur_login_user_id,\r\n\t\t\tcur_login_user_nm,\r\n\t\t\tcur_login_host,\r\n\t\t\tlast_login_time,\r\n\t\t\tlast_login_host;\r\n\t\t\r\n\t\t$(\"#home_app_title\").html(ig$.home_app_title || IRm$.r1(\"L_HOME_APP_TITLE\"));\r\n\t\t$(\"#home_app_desc\").html(ig$.home_app_desc || IRm$.r1(\"L_HOME_APP_DESC\"));\r\n\t\t\r\n\t\t$(\"#mbutton1\").html(IRm$.r1(\"L_T_RECENT_VISIT\"));\r\n\t\t\r\n\t\tIG$.update_vars(instance);\r\n\t\t\r\n\t\tif (llogin && llogin.length > 0 && logininfo && instance.dlgLogin.lastLogin)\r\n\t\t{\r\n\t\t\tlast_login_time = $(\".last_login_time\", llogin);\r\n\t\t\tlast_login_host = $(\".last_login_host\", llogin);\r\n\t\t\tcur_login_host = $(\".cur_login_host\", llogin);\r\n\t\t\tcur_login_user_id = $(\".cur_login_user_id\", llogin);\r\n\t\t\tcur_login_user_nm = $(\".cur_login_user_nm\", llogin);\r\n\t\t\t\r\n\t\t\tltime = instance.dlgLogin.lastLogin.lastaccesstime;\r\n\t\t\tcur_login_user_id.text(logininfo.userid);\r\n\t\t\tcur_login_user_nm.text(logininfo.username);\r\n\t\t\t\r\n\t\t\tif (ltime)\r\n\t\t\t{\r\n\t\t\t\tlmsg = IG$.formatDate(ltime);\r\n\t\t\t\tlast_login_time.text(lmsg);\r\n\t\t\t\tlast_login_host.text(instance.dlgLogin.lastLogin.lastaccessaddr); //  + \", \" + instance.dlgLogin.lastLogin.lastaccesshost);\r\n\t\t\t\tcur_login_host.text(instance.dlgLogin.lastLogin.accessaddr); //  + \", \" + instance.dlgLogin.lastLogin.accesshost);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tloadRecentVisit: function() {\r\n\t\tvar panel=this,\r\n\t\t\tidv_recitems = $(\"#idv_recitems\"),\r\n\t\t\treq = new IG$._rpc$();\r\n\t\t\t\r\n\t\treq.init(panel, \r\n\t\t\t{\r\n\t\t\t\tack: \"helpcontent\",\r\n\t\t\t\tpayload: {},\r\n\t\t\t\tmbody: {option: 'bookmarks'}\r\n\t\t\t}, panel, panel.rs_loadContent, null, null);\r\n\t\treq.send();\r\n\t},\r\n\t\r\n\trs_loadContent: function(jdoc) {\r\n\t\tvar panel=this,\r\n\t\t\tidv_recitems = $(\"#idv_recitems\"),\r\n\t\t\tidv_recitems_ds = $(\"#idv_recitems_ds\"),\r\n\t\t\ti,\r\n\t\t\titems = [], item,\r\n\t\t\titems_ds = [],\r\n\t\t\ttmap = {},\r\n\t\t\tcoldiv,\r\n\t\t\tinstance = panel.instance;\r\n\t\t\r\n\t\tidv_recitems.empty();\r\n\t\tidv_recitems_ds.empty();\r\n\t\t\r\n\t\tif (idv_recitems)\r\n\t\t{\r\n\t\t\tfor (i=0; i < jdoc.length; i++)\r\n\t\t\t{\r\n\t\t\t\titem = jdoc[i];\r\n\t\t\t\t\r\n\t\t\t\tif (item.type != \"Report\" && item.type != \"DataSet\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t\r\n\t\t\t\tif (tmap[item.uid])\r\n\t\t\t\t{\r\n\t\t\t\t\t tmap[item.uid].fatype = item.fatype == \"F\" ? item.fatype : tmap[item.uid].fatype;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ttmap[item.uid] = item;\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\titems.sort(function(a, b) {\r\n\t\t\t\tvar c = 0;\r\n\t\t\t\t\r\n\t\t\t\tif (a.type != b.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tc = (a.type > b.type) ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn c;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tpanel.shortcuts = {};\r\n\t\t\t\r\n\t\t\t$.each(items, function(i, item) {\r\n\t\t\t\tvar utype = item.type.toUpperCase(),\r\n\t\t\t\t\ttpl,\r\n\t\t\t\t\ttdiv,\r\n\t\t\t\t\tprd = item.fab_mdateprd,\r\n\t\t\t\t\tdtime = item.fab_mdatefmt;\r\n\t\t\t\t\t\r\n\t\t\t\tdtime = IG$.dateFmt(prd) || item.updatedatefm;\r\n\t\t\t\t\r\n\t\t\t\tif (utype == \"REPORT\")\r\n\t\t\t\t{\r\n\t\t\t\t\ttpl = [\r\n\t\t\t\t\t\t'<li class=\"list-group-item\" title=\"' + item.nodepath + '\">',\r\n\t\t                '    <a href=\"#\">' + item.name + '</a>' + (item.fatype == \"F\" ? \"<span class='ig-fa-mark'></span>\" : \"\") + '',\r\n\t\t                '    <small class=\"text-muted\"><i class=\"fa fa-clock-o\"></i> ' + dtime + '</small>',\r\n\t\t                '</li>'\r\n\t\t            ];\r\n\t\t            \r\n\t\t            tdiv = $(tpl.join(\"\")).appendTo(idv_recitems);\r\n\t\t\t\t}\r\n\t\t\t\telse if (utype == \"DATASET\")\r\n\t\t\t\t{\r\n\t\t\t\t\ttpl = [\r\n\t\t\t\t\t\t'<div class=\"timeline-item\">',\r\n                        '    <div class=\"row\">',\r\n                        // '        <div class=\"col-xs-3 date\">',\r\n                        // '            <i class=\"fa fa-briefcase\"></i>',\r\n                        // '            <small class=\"text-navy\">' + dtime + '</small>',\r\n                        // '        </div>',\r\n                        '        <div class=\"col-xs-12 content no-top-border\" style=\"min-height:initial\">',\r\n                        '            <p class=\"m-b-xs\"><a href=\"\"><strong>' + item.name + '</strong></a> <small class=\"text-navy\"><i class=\"fa fa-clock-o\"></i> ' + dtime + '</small></p>',\r\n                        (item.description ? '            <p>' + item.description + '</p>' : ''),\r\n                        '        </div>',\r\n                        '    </div>',\r\n                        '</div>'\r\n\t\t\t\t\t];\r\n\t\t\t\t\ttdiv = $(tpl.join(\"\")).appendTo(idv_recitems_ds);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$(\"a\", tdiv).bind(\"click\", function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (utype == \"REPORT\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tIG$.changeApp(instance, \"report\", item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (utype == \"DATASET\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tIG$.changeApp(instance, \"dataset\", item);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t\r\n\tdeferredRender : true,\r\n\t\r\n\tonAdd: function(item, index) {\r\n\t\t$s.tabpanel.prototype.onAdd.call(this, item, index);\r\n\t},\r\n\t\r\n\t//inherit docs\r\n\tinitComponent: function() {\r\n\t\tvar me = this,\r\n\t\t\tinstance = me.instance,\r\n\t\t\tdockedItems = [].concat(me.dockedItems || []),\r\n\t\t\tactiveTab = me.activeTab || (me.activeTab = 0),\r\n\t\t\ttabPosition = me.tabPosition,\r\n\t\t\ttbar;\r\n\r\n\t\t// Configure the layout with our deferredRender, and with our activeTeb\r\n\t\tme.layout = {\r\n\t\t\towner: me,\r\n\t\t\ttype: \"card\",\r\n\t\t\tdeferredRender: me.deferredRender,\r\n\t\t\titemCls: me.itemCls,\r\n\t\t\tactiveItem: activeTab\r\n\t\t};\r\n\r\n\t\tinstance.mainPanelTabBar = new $s.tabbar({\r\n\t\t\txtype: \"tabbar\",\r\n\t\t\tui: me.ui,\r\n\t\t\tdock: \"top\",\r\n\t\t\tid: \"ig-tabbar\",\r\n\t\t\tcls: \"ig-main-tabbar\",\r\n\t\t\tflex: 1,\r\n\t\t\torientation: \"horizontal\",\r\n\t\t\tplain: true, //me.plain,\r\n\t\t\tcardLayout: me.layout,\r\n\t\t\ttabPanel: me,\r\n\t\t\tpadding: 0,\r\n\t\t\tmargin: 0,\r\n\t\t\tbodyPadding: 0,\r\n\t\t\tlisteners: {\r\n\t\t\t\ttabclick: function(tobj, id, ev) {\r\n\t\t\t\t\tIG$.changeApp(instance, \"dataset_list\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tme.tabBar = instance.mainPanelTabBar;\r\n\r\n\t\tIG$.MainPanel.superclass.initComponent.call(this);\r\n\t\t\r\n\t\tme.setActiveTab = function(card) {\r\n\t\t\tIG$.changeApp(instance, \"dataset_list\");\r\n\t\t\t$s.tabpanel.prototype.setActiveTab.call(me, card);\r\n\t\t};\r\n\t\tme.getActiveTab = $s.tabpanel.prototype.getActiveTab;\r\n\t\tme.getTabBar = $s.tabpanel.prototype.getTabBar;\r\n\t\tme.onItemEnable = $s.tabpanel.prototype.onItemEnable;\r\n\t\tme.onItemDisable = $s.tabpanel.prototype.onItemDisable;\r\n\t\tme.onRemove = function(item, destroying) {\r\n\t\t\t$s.tabpanel.prototype.onRemove.call(me, item, destroying);\r\n\t\t\t\r\n\t\t\tvar itemcnt = me.items.length;\r\n\t\t\t\r\n\t\t\tif (itemcnt == 0)\r\n\t\t\t{\r\n\t\t\t\tvar explorer = instance.m_explorer;\r\n\t\t\t\tIG$.changeApp(instance, IG$.__atab);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// We have to convert the numeric index/string ID config into its component reference\r\n\t\t//  activeTab = me.activeTab = me.getComponent(activeTab);\r\n\r\n\t\t// Ensure that the active child's tab is rendered in the active UI state\r\n\t\tif (activeTab) {\r\n\t\t\tme.tabBar.setActiveTab(activeTab.tab, true);\r\n\t\t}\r\n\t},\r\n\t\r\n\tlisteners: {\r\n\t\tbeforeadd: function(tobj, comp, index, eopts) {\r\n\t\t\tvar me = this,\r\n\t\t\t\ttabbar = me.getTabBar(),\r\n\t\t\t\tmaxtab = ig$.maxtapcount || 0,\r\n\t\t\t\tatab;\r\n\t\t\t\t\r\n\t\t\tif (maxtab > 0 && me.items.length >= maxtab)\r\n\t\t\t{\r\n\t\t\t\t// tabbar.remove.call(tabbar, tabbar.items.items[0]);\r\n\t\t\t\t// me.setActiveTab(me.items.items[0]);\r\n\t\t\t\tatab = me.items.items[0];\r\n\t\t\t\t// me.setActiveTab(atab);\r\n\t\t\t\tme.remove(atab);\r\n\t\t\t\t//atab.close();\r\n\t\t\t\tif (tabbar && tabbar.$ex && atab.tab && typeof(atab.tab.tabid) != \"undefined\")\r\n\t\t\t\t{\r\n\t\t\t\t\ttabbar.$ex.removeOption(atab.tab.tabid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});","ig$.mainmenu = {\n\tmainmenu: [\n\t\t{\n\t\t\trcs: \"S_HOME\",\n\t\t\ttype: \"column\",\n\t\t\ticon: \"fa fa-th-large\",\n\t\t\ttemplate: \"html/dw_intro.html\",\n\t\t\tregion: \"home\",\n\t\t\thandler: function(instance) {\n\t\t\t\tIG$.procMenuCommand(instance, \"CMD_HOME\");\n\t\t\t}\n\t\t},\n\t\t// {\n\t\t// \trcs: \"L_COMPETITION\",\n\t\t// \ttype: \"column\",\n\t\t// \ticon: \"fa fa-diamond\",\n\t\t// \ttemplate: \"html/dw_competition.html\",\n\t\t//\tregion: \"competition\",\n\t\t// \thandler: function(instance) {\n\t\t// \t\tIG$.procMenuCommand(instance, \"CMD_COMPETITION\");\n\t\t// \t}\n\t\t// },\n\t\t{\n\t\t\trcs: \"B_DATASET\",\n\t\t\ttype: \"column\",\n\t\t\ticon: \"fa fa-bar-chart-o\",\n\t\t\ttemplate: \"html/dw_dataset.html\",\n\t\t\tregion: \"dataset_list\",\n\t\t\thandler: function(instance) {\n\t\t\t\tIG$.procMenuCommand(instance, \"CMD_DATASET\");\n\t\t\t}\n\t\t},\n\t\t// {\n\t\t// \trcs: \"L_DISCUSSIONS\",\n\t\t// \ttype: \"column\",\n\t\t// \ticon: \"fa fa-magic\",\n\t\t// \ttemplate: \"html/dw_discussion.html\",\n\t\t// \tregion: \"discussion\",\n\t\t// \tinfo: true,\n\t\t// \thandler: function(instance) {\n\t\t// \t\tIG$.procMenuCommand(instance, \"CMD_DISCUSSION\");\n\t\t// \t}\n\t\t// },\n\t\t{\n\t\t\trcs: \"B_WORKSPACE\",\n\t\t\ttype: \"column\",\n\t\t\ticon: \"fa fa-star\",\n\t\t\ttemplate: \"html/dw_works.html\",\n\t\t\tregion: \"report_list\",\n\t\t\thandler: function(instance) {\n\t\t\t\tIG$.procMenuCommand(instance, \"CMD_WORKS\");\n\t\t\t}\n\t\t},\n\t\t// {\n\t\t// \trcs: \"L_MAKEITEM_G\",\n\t\t// \ttype: \"column\",\n\t\t// \tcls: \"special_link\",\n\t\t// \ticon: \"fa fa-database\",\n\t\t// \tregion: \"bbs_write\",\n\t\t// \thandler: function(instance) {\n\t\t// \t\tIG$.procMenuCommand(instance, \"CMD_COMPETITION\");\n\t\t// \t}\n\t\t// },\n\t\t{\n\t\t\ttype: \"app\",\n\t\t\tregion: \"report\",\n\t\t\ttemplate: \"html/dw_report.html\"\n\t\t},\n\t\t{\n\t\t\ttype: \"app\",\n\t\t\tregion: \"bbs\",\n\t\t\ttemplate: \"html/dw_discusssion_write.html\"\n\t\t},\n\t\t{\n\t\t\ttype: \"app\",\n\t\t\tregion: \"dataset\",\n\t\t\ttemplate: \"html/dw_dataset_detail.html\"\n\t\t},\n\t\t{\n\t\t\ttype: \"app\",\n\t\t\tregion: \"competition\",\n\t\t\ttemplate: \"html/dw_competition.html\"\n\t\t}\n\t]\n}","IG$.procMenuCommand = function(instance, cmd, opt)\n{\n\tvar dlgpop,\n\t\tpanel,\n\t\titemname,\n\t\titemid,\n\t\tcmdl = cmd.toLowerCase(),\n\t\tmodname,\n\t\tpopt = {},\n\t\tmodscr = \"igcm\",\n\t\t// sc,\n\t\tmp = instance.mainPanel || null,\n\t\tbtype;\n\t\n\tswitch (cmd)\n\t{\n\tcase \"CMD_PASSWORD_CHANGE\":\n\t\tdlgpop = new IG$.passwordMgr({instance: me.instance});\n\t\tIG$.checkLogin(null, dlgpop);\n\t\tbreak;\n\tcase \"CMD_PREF\":\n\t\tdlgpop = new IG$.userpref({instance: me.instance});\n\t\tIG$.checkLogin(null, dlgpop);\n\t\tbreak;\n\tcase \"CMD_MAKE_WORKSPACE\":\n\t\tdlgpop = new IG$.makeItem({\n\t\t\tinstance: me.instance,\n\t\t\titemtype: \"Folder\",\n\t\t\tparentnodepath: \"/\",\n\t\t\tparentuid: \"/\"\n\t\t});\n\t\tIG$.checkLogin(null, dlgpop);\n\t\tbreak;\n\tcase \"CMD_SW_APP\":\n\t\tdlgpop = new IG$.workspace_switcher({\n\t\t\tinstance: me.instance,\n\t\t});\n\t\tIG$.checkLogin(null, dlgpop);\n\t\tbreak;\n\tcase \"CMD_SERVER_CONFIG\":\n\t\tbreak;\n\tcase \"CMD_HELP_MGR\":\n\t\tmodname = \"helpManage\";\n\t\titemid = cmdl;\n\t\titemname = IRm$.r1(\"I_HELP_MGR\");\n\t\tbreak;\n\tcase \"CMD_LOCALE\":\n\t\tmodname = \"resourcemgr\";\n\t\titemid = cmdl;\n\t\titemname = IRm$.r1(\"I_LOC_MGR\");\n\t\tbreak;\n\tcase \"CMD_DLOCALE\":\n\t\tmodname = \"resourcemgr\";\n\t\titemid = cmdl;\n\t\tpopt.dicmode = 1;\n\t\titemname = IRm$.r1(\"I_DLOC_MGR\");\n\t\tbreak;\n\tcase \"CMD_META_IMP\":\n\t\tmodname = \"metaImport\";\n\t\titemid = cmdl;\n\t\titemname = IRm$.r1(\"I_META_IMP\");\n\t\tbreak;\n\tcase \"CMD_META_EDIT\":\n\t\tmodname = \"MetaEditorPanel\";\n\t\titemid = cmdl;\n\t\titemname = IRm$.r1(\"I_META_EDIT\");\n\t\tpopt.uid = opt.uid;\n\t\tbreak;\n\tcase \"CMD_META_MIG\":\n\t\tmodname = \"mgr_deploy\";\n\t\titemid = cmdl;\n\t\titemname = IRm$.r1(\"I_META_MIG\");\n\t\tbreak;\n\tcase \"CMD_RELATION_VIEW\":\n\t\titemid = cmdl;\n\t\tmodname = \"relationMgr\";\n\t\titemname = IRm$.r1(\"L_RELATION_VIEW\");\n\t\tbreak;\n\tcase \"CMD_TABLE_REGISTER\":\n\t\titemid = cmdl;\n\t\tmodname = \"tableManager\";\n\t\titemname = IRm$.r1(\"L_MGR_DATABASE\");\n\t\tmodscr = \"igcn\";\n\t\tbreak;\n\tcase \"CMD_LOOKUP\":\n\t\titemid = cmdl;\n\t\tmodname = \"systemlookup\";\n\t\titemname = IRm$.r1(\"L_S_LK\");\n\t\tbreak;\n\tcase \"CMD_CONNECT_DB\":\n\t\titemid = cmdl;\n\t\tmodname = \"mgrdb_config\";\n\t\titemname = IRm$.r1(\"L_REG_DATABASE\");\n\t\tbreak;\n\tcase \"CMD_ABOUT\":\n\t\tdlgpop = new IG$.aboutApp();\n\t\tIG$.checkLogin(null, dlgpop);\n\t\tbreak;\n\tcase \"CMD_USER_MANAGER\":\n\t\titemid = cmdl;\n\t\tmodname = \"mgrUser\";\n\t\titemname = IRm$.r1(\"L_MGR_USER\");\n\t\tbreak;\n\tcase \"CMD_SYS_CONFIG\":\n\t\titemid = cmdl;\n\t\tmodname = \"mgrSysCfg\";\n\t\titemname = IRm$.r1(\"L_SYS_CONFIG\");\n\t\tbreak;\n\tcase \"CMD_ASSIST_ROBO\":\n\t\titemid = cmdl;\n\t\tmodname = \"mgrColab\";\n\t\titemname = IRm$.r1(\"L_ASSIST_ROBO\");\n\t\tbreak;\n\tcase \"CMD_VAR\":\n\tcase \"CMD_BD_CONFIG\":\n\t\titemid = cmdl;\n\t\tmodname = \"hadoop_config\";\n\t\tmodscr = \"igc9\";\n\t\titemname = IRm$.r1(\"I_BD_CONFIG\");\n\t\tbreak;\n\tcase \"CMD_DBD_MGR\":\n\t\titemid = cmdl;\n\t\tmodname = \"mgr_dashboard\";\n\t\titemname = IRm$.r1(\"I_MGR_DBD\");\n\t\tbreak;\n\tcase \"CMD_FEATURES\":\n\t\titemid = cmdl;\n\t\tmodname = \"mgrFeatures\";\n\t\tbreak;\n\tcase \"CMD_REPORT_STYLE\":\n\t\titemid = cmdl;\n\t\tpopt.title = IRm$.r1(\"T_GLOBAL_REPORT_STYLE\");\n\t\tpopt.styletype = \"g\";\n\t\tmodname = \"styleWizard\";\n\t\tbreak;\n\tcase \"CMD_RSN\":\n\t\tdlgpop = new IG$.rsn_editor({instance: me.instance});\n\t\tIG$.checkLogin(null, dlgpop);\n\t\tbreak;\n\tcase \"CMD_SYSMON\":\n\t\tmodname = \"sysmon\";\n\t\titemid = cmdl;\n\t\tpopt.title = IRm$.r1(\"L_SYS_LOG\");\n\t\tbreak;\n\tcase \"CMD_SYSRES\":\n\t\tmodname = \"sys_resource\";\n\t\titemid = cmdl;\n\t\tbreak;\n\tcase \"CMD_SCHEDULE\":\n\t\titemid = cmdl;\n\t\tmodname = \"scheduler\";\n\t\titemname = IRm$.r1(\"I_SCHEDULE\");\n\t\tbreak;\n\tcase \"CMD_SCH_PROG\":\n\t\titemid = cmdl;\n\t\tmodname = \"sch_prog\";\n\t\titemname = IRm$.r1(\"I_SCHEDULE_MOD\");\n\t\tpopt.mod_type = opt;\n\t\t\n\t\tif (opt == \"single_sign_on\")\n\t\t{\n\t\t\titemname = \"SingleSignOn\";\n\t\t}\n\t\tbreak;\n\tcase \"CMD_CHART_DSGN\":\n\t\titemid = cmdl;\n\t\tmodname = \"chart_dsgn\";\n\t\titemname = \"Chart Coder\";\n\t\tbreak;\n\tcase \"CMD_HOME\":\n\t\tIG$.changeApp(instance, \"home\");\n\t\tbreak;\n\tcase \"CMD_DATASET\":\n\t\tIG$.changeApp(instance, \"dataset_list\");\n\t\tbreak;\n\tcase \"CMD_COMPETITION\":\n\t\tIG$.changeApp(instance, \"competition\");\n\t\tbreak;\n\tcase \"CMD_DISCUSSION\":\n\t\tIG$.changeApp(instance, \"discussion\");\n\t\tbreak;\n\tcase \"CMD_WORKS\":\n\t\tIG$.changeApp(instance, \"report_list\");\n\t\tbreak;\n\tcase \"CMD_BROWSER\":\n\t\tIG$.changeApp(instance, \"competition\");\n\t\tbreak;\n\tcase \"CMD_TABPANEL\":\n\t\tIG$.changeApp(instance, \"dataset_list\");\n\t\tbreak;\n\tcase \"CMD_WIZARD\":\n\tcase \"CMD_APP_WIZARD\":\n\t\t// IG$.changeApp(instance, \"discussion\");\n\t\tvar doc = $(document),\n\t\t\tw = doc.width(),\n\t\t\th = doc.height(),\n\t\t\t// dwizard = IG$.dwizard,\n\t\t\tdlg;\n\t\t/*\n\t\tif (ig$.$l_ > 5)\n\t\t{\n\t\t\tvar lang = window.useLocale;\n\t\t\tlang = lang.substring(0, lang.indexOf(\"_\"));\n\t\t\twindow.open(\"../manual/\" + lang, \"_blank\");\n\t\t\treturn;\n\t\t}\n\t\t*/\t\t\n\t\tif (!IG$.app_wizard && IG$.ltW)\n\t\t{\n\t\t\tIG$.app_wizard = new IG$.dlgSmartWizard({instance: instance});\n\t\t}\n\t\t\n\t\tdlg = IG$.app_wizard;\n\t\t\n\t\tif (dlg)\n\t\t{\n\t\t\tdlg.setSize(w * 0.8, h * 0.8);\n\t\t\tIG$.showDlg(null, dlg);\n\t\t}\n\t\tbreak;\n\tcase \"CMD_SYNC_USER\":\n\t\titemid = cmdl;\n\t\tpopt.uid = opt;\n\t\tmodname = \"sync_user\";\n\t\titemname = IRm$.r1(\"T_SYNC_USER\");\n\t\tbreak;\n\tcase \"CMD_MN_MENUS\":\n\t\tIG$.changeApp(instance, \"report_list\", opt);\n\t\tbreak;\n\tcase \"CMD_HD_BFLOW\":\n\tcase \"CMD_MONG_DATA\":\n\t\tbtype = (cmd == \"CMD_HD_BFLOW\") ? \"BigData\" : \"MongoData\";\n\t\tmp && mp.navigateApp.call(mp, null, btype.toLowerCase(), btype, null, null, true);\n\t\tbreak;\n\tcase \"CMD_HD_MAPR\":\n\t\titemid = cmdl;\n\t\tmodname = \"relationMgr\";\n\t\tpopt._cmode = 2;\n\t\titemname = IRm$.r1(\"L_HD_BFLOW\");\n\t\tbreak;\n\tcase \"CMD_ML_BAYES\":\n\t\tvar t = IG$._app_module_[\"bayesnet\"];\n\t\tmodname = t.name;\n\t\tmodscr = t.modetype;\n\t\titemname = itemname || t.opt.itemtype;\n\t\tif (t.opt)\n\t\t{\n\t\t\tfor (k in t.opt)\n\t\t\t{\n\t\t\t\tpopt[k] = t.opt[k];\n\t\t\t}\n\t\t}\n\t\tbreak;\n\tcase \"CMD_D_MENU\":\n\t\titemid = cmdl;\n\t\tmodname = \"dashboardmenu\";\n\t\titemname = cmdl;\n\t\tbreak;\n\tcase \"CMD_REVISION\":\n\t\titemid = cmdl;\n\t\tpopt.uid = opt;\n\t\tmodname = \"mgrRevision\";\n\t\titemname = IRm$.r1(\"T_REVISION\");\n\t\tbreak;\n\tcase \"CMD_TRASHBIN\":\n\t\titemid = cmdl;\n\t\tpopt.uid = opt;\n\t\tmodname = \"mgr_trashbin\";\n\t\titemname = IRm$.r1(\"L_TRASHBIN\");\n\t\tbreak;\n\tcase \"CMD_MG_DISCO\":\n\t\titemid = cmdl;\n\t\tpopt.uid = opt;\n\t\tmodname = \"mg_disco\";\n\t\tmodscr = \"mg_disco\";\n\t\titemname = IRm$.r1(\"T_MIG_DISCO\");\n\t\tbreak;\n\tcase \"CMD_MG_UPGRADE\":\n\t\titemuid = cmdl;\n\t\tpopt.uid = opt;\n\t\tmodname = \"mg_meta\";\n\t\tmodscr = \"mg_meta\";\n\t\titemname = IRm$.r1(\"T_MIG_META_UPGRADE\");\n\t\tbreak;\n\tcase \"CMD_NEW_REPORT\":\n\t\titemid = cmdl;\n\t\tmodname = \"ReportView\";\n\t\titemname = \"Report\";\n\t\tpopt = popt || {};\n\t\tpopt.writable = true;\n\t\tpopt.opt_editmode = true;\n\t\tbreak;\n\tcase \"CMD_NEW_SQL_REPORT\":\n\t\titemid = cmdl;\n\t\tmodname = \"SQLReportView\";\n\t\titemname = \"SQLReport\";\n\t\tpopt = popt || {};\n\t\tpopt.writable = true;\n\t\tpopt.opt_editmode = true;\n\t\tbreak;\n\tcase \"CMD_NEW_DASHBOARD\":\n\t\titemid = cmdl;\n\t\tmodname = \"DashboardEdit\";\n\t\tmodscr = \"igc7\";\n\t\titemname = \"Dashboard\";\n\t\tbreak;\n\tcase \"CMD_MANUAL_AUTH\":\n\t\titemid = cmdl;\n\t\tmodname = \"MgrManual\";\n\t\tmodscr = \"mg_meta\";\n\t\titemname = IRm$.r1(\"T_MGR_MANUAL\");\n\t\tbreak;\n\tcase \"CMD_NEW_BOBJECT\":\n\t\tIG$.create_meta(instance);\n\t\treturn;\n\tcase \"CMD_APP_HELP\":\n\t\tvar lang = \"en\";\n\t\tif (window.useLocale == \"ko_KR\")\n\t\t{\n\t\t\tlang = \"ko\";\n\t\t}\n\t\twindow.open(\"../manual/\" + lang + \"/\", \"_blank\");\n\t\treturn;\n//\t\tbreak;\n\t}\n\t\n\tif (modname && instance.mainPanel)\n\t{\n\t\tvar tab = instance.mainPanel.getComponent.call(instance.mainPanel, itemid);\n\t\t\n\t\tif (tab)\n\t\t{\n\t\t\tinstance.mainPanel.setActiveTab.call(instance.mainPanel, tab);\n\t\t\t\n\t\t\tif (cmdl == \"cmd_revision\")\n\t\t\t{\n\t\t\t\ttab.loadUID.call(tab, opt);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpopt.instance = instance;\n\t\t\t\n\t\t\tif (IG$[modname])\n\t\t\t{\n\t\t\t\tpanel = new IG$[modname](popt);\n\t\t\t\tif (!itemname)\n\t\t\t\t{\n\t\t\t\t\titemname = panel.title;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// load module\n\t\t\t\tscripts = ig$.bootconfig.scmap[modscr];\n\t\t\t\t\n\t\t\t\tIG$.getScriptCache(\n\t\t\t\t\tscripts, \n\t\t\t\t\tnew IG$.callBackObj(this, function() {\n\t\t\t\t\t\tif (IG$[modname])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpanel = new IG$[modname](popt);\n\t\t\t\t\t\t\tif (!itemname)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titemname = panel.title;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tpanel.id = itemid\n\t\t\t\t\t\t\tpanel.address = itemid;\n\t\t\t\t\t\t\tpanel.title = IG$.getTabTitle(itemname);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (panel.isWindow == true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tIG$.checkLogin(null, panel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar p = instance.mainPanel.add.call(instance.mainPanel, panel);\n\t\t\t\t\t\t\t\tinstance.mainPanel.setActiveTab.call(instance.mainPanel, p);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tIG$.ShowError(IRm$.r1(\"L_ERR_L_MOD\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\t\n\t\t\tif (panel)\n\t\t\t{\n\t\t\t\tpanel.id = itemid\n\t\t\t\tpanel.address = itemid;\n\t\t\t\tpanel.title = IG$.getTabTitle(itemname);\n\t\t\t\t\n\t\t\t\tif (panel.isWindow == true)\n\t\t\t\t{\n\t\t\t\t\tIG$.checkLogin(null, panel);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvar p = instance.mainPanel.add.call(instance.mainPanel, panel);\n\t\t\t\t\tinstance.mainPanel.setActiveTab.call(instance.mainPanel, p);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n","IG$._dseditor = function(opt) {\n\tvar me = this;\n\t\n\tme.opt = opt;\n\tme.render = opt.render;\n\tme.uid = opt.uid;\n\t\n\tme._init();\n};\n\nIG$._dseditor.prototype = {\n\t_init: function() {\n\t\tvar me = this;\n\n\t\tif (!me.uid)\n\t\t{\n\t\t\tme._rs_loadContent({\n\t\t\t\tcontent: {}\n\t\t\t});\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tme.loadContent();\n\t\t}\n\t},\n\t\n\tshow: function() {\n\t\tvar me = this;\n\t\tme.render && me.render.show();\n\t},\n\thide: function() {\n\t\tvar me = this;\n\t\tme.render && me.render.hide();\n\t},\n\t\n\tloadContent: function() {\n\t\tvar me = this,\n\t\t\treq = new IG$._rpc$();\n\t\t\n\t\treq.init(me,\n\t\t\t{\n\t\t\t\tack: \"content\",\n\t\t\t\tpayload: {uid: me.uid, revision: me.revision},\n\t\t\t\tmbody: {option: \"content\"}\n\t\t\t}, me, function(jdoc) {\n\t\t\t\tme._rs_loadContent(jdoc);\t\t\n\t\t\t});\n\t\treq.send();\n\t},\n\n\t_rs_loadContent: function(jdoc) {\n\t\tvar me = this,\n\t\t\trender = $(\"#dataset_viewer\", me.render),\n\t\t\tdataset_btn_next = $(\"#dataset_btn_next\", me.render),\n\t\t\tdataset_btn_edit = $(\"#dataset_btn_edit\", me.render),\n\t\t\tw = render.width(),\n\t\t\th = render.height(),\n\t\t\tdw_wizard;\n\n\t\tme._mc = jdoc.content || {};\n\n\t\tif (!IG$.dlg_dw_wzd_pnl)\n\t\t{\n\t\t\t// load module\n\t\t\tvar scripts = ig$.bootconfig.scmap[\"igcm\"];\n\t\t\t\t\n\t\t\tIG$.getScriptCache(\n\t\t\t\tscripts, \n\t\t\t\tnew IG$.callBackObj(this, function() {\n\t\t\t\t\tme._rs_loadContent(jdoc);\n\t\t\t\t})\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tdw_wizard = me._viewer = new IG$.dlg_dw_wzd_pnl({\n\t\t\trenderTo: render[0],\n\t\t\tvmode: \"dataworks\",\n\t\t\tflex: 1,\n\t\t\t_mc: me._mc,\n\t\t\tuid: me.uid,\n\t\t\twidth: w,\n\t\t\theight: h,\n\t\t\tbodyCls: \"igc-no-windodw-border\"\n\t\t});\n\n\t\tdataset_btn_next.html(IRm$.r1(\"B_NEXT\") + \" &raquo;\");\n\n\t\tdataset_btn_next.bind(\"click\", function(e) {\n\t\t\tvar active = dw_wizard._active || 0;\n\n\t\t\tif (active == 4)\n\t\t\t{\n\t\t\t\tdw_wizard._confirm_step3();\n\t\t\t\t// me.callback && me.callback.execute();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdw_wizard.setPage(active + 1);\n\t\t\t}\n\t\t});\n\n\t\tdataset_btn_edit.bind(\"click\", function(e) {\n\t\t\tdw_wizard.setAppMode(\"upload\");\n\t\t});\n\n\t\tme._viewer.on(\"step_changed\", function(e, obj, index) {\n\t\t\tvoid 0;\n            if (dw_wizard._active == 4)\n            {\n                dataset_btn_next.html(IRm$.r1('B_CONFIRM'));\n            }\n            else\n            {\n                dataset_btn_next.html(IRm$.r1(\"B_NEXT\") + \" &raquo;\");\n            }\n\t\t});\n\n\t\tme._viewer.on(\"finished\", function(e, code) {\n\t\t\tme._viewer.setLoading(false);\n\t\t\tIG$.alertmsg(ig$.appname, IRm$.r1(\"M_APP_LOADED\"), null, null, 0, \"success\");\n\t\t\tme.loadContent();\n\t\t});\n\n\t\tme._viewer.on(\"app_changed\", function(e, vmode) {\n\t\t\tif (vmode == \"data_preview\")\n\t\t\t{\n\t\t\t\tdataset_btn_edit.show();\n\t\t\t\tdataset_btn_next.hide();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdataset_btn_edit.hide();\n\t\t\t\tdataset_btn_next.show();\n\t\t\t}\n\t\t});\n\n\t\tif (me._viewer.$ex)\n\t\t{\n\t\t\t// $(me._viewer.$ex.$view).removeClass(\"webix_window\");\n\t\t}\n\n\t\t// me.down(\"[name=t_save]\").setVisible(me._mc.writable);\n\t\tme.loadJoins();\n\t\tme.loadUserDB(true);\n\t},\n\t\n\tloadJoins: function() {\n\t\tvar me = this,\n\t\t\tmc = me._mc,\n\t\t\tjoins = mc.joins,\n\t\t\t// m2 = me.down(\"[name=m2]\"),\n\t\t\tgjoin = [],\n\t\t\tmj, l,\n\t\t\ti;\n\t\t\t\n\t\tif (joins && joins.length)\n\t\t{\n\t\t\tfor (i=0; i < joins.length; i++)\n\t\t\t{\n\t\t\t\tmj = joins[i];\n\t\t\t\tl = {\n\t\t\t\t\tstable: mj.source ? mj.source.tableuid: null,\n\t\t\t\t\tsfield: mj.source ? mj.source.uid : null,\n\t\t\t\t\tstablename: mj.source ? mj.source.tablename : null,\n\t\t\t\t\tstablelabel: mj.source ? mj.source.tablelabel : null,\n\t\t\t\t\tsfieldname: mj.source ? mj.source.name : null,\n\t\t\t\t\tttable: mj.target ? mj.target.tableuid: null,\n\t\t\t\t\ttfield: mj.target ? mj.target.uid : null,\n\t\t\t\t\tttablename: mj.target ? mj.target.tablename : null,\n\t\t\t\t\tttablelabel: mj.target ? mj.target.tablelabel : null,\n\t\t\t\t\ttfieldname: mj.target ? mj.target.name : null,\n\t\t\t\t\toprel: mj.join\n\t\t\t\t};\n\t\t\t\tl.sdesc = (l.stablelabel || l.stablename) + \".\" + l.sfieldname;\n\t\t\t\tl.tdesc = (l.ttablelabel || l.ttablename) + \".\" + l.tfieldname;\n\t\t\t\tgjoin.push(l);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// m2.store.loadData(gjoin);\n\t},\n\t\n\tloadUserDB: function(b_loading) {\n\t\tvar me = this,\n\t\t\treq = new IG$._rpc$(),\n\t\t\tbobj_datasource = me.bobj_datasource ? me.bobj_datasource.uid : null;\n\t\t\t\n\t\treq.init(me, \n\t\t\t{\n\t\t\t\tack: \"userdb\",\n\t\t\t\tpayload: {\"address\": \"/Connections\", option: \"list\"},\n\t\t\t\tmbody: {}\n\t\t\t}, me, function(jdoc) {\n\t\t\t\tvar me = this,\n\t\t\t\t\tdbs = jdoc.children,\n\t\t\t\t\ti,\n\t\t\t\t\tstaging_dbs = [],\n\t\t\t\t\tsel_db;\n\t\t\t\t\n\t\t\t\tif (dbs && dbs.length)\n\t\t\t\t{\n\t\t\t\t\tfor (i=0; i < dbs.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (dbs[i].attributes && dbs[i].attributes.attrb1 == \"T\" && !dbs[i].scid)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstaging_dbs.push(dbs[i]);\n\t\t\t\t\t\t\tif (bobj_datasource && bobj_datasource == dbs[i].uid)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsel_db = dbs[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (me.bobj_uid)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (sel_db)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tme._mc.datasource = sel_db;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tme._mc.datasource = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tme._startapp();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar sdb;\n\t\t\t\t\t\n\t\t\t\t\tif (staging_dbs.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (me._mc.datasource)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (i=0; i < staging_dbs.length; i++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (staging_dbs[i].uid == me._mc.datasource.uid)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsdb = staging_dbs[i];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (!sdb && me._mc.datasource)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tIG$.ShowError(IRm$.r1(\"E_DS_NOT_ALLOW_UPLOAD\"), me);  // \"The datasource does not allow uploading file.\", me);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse \n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!b_loading || (b_loading && !me._mc.datasource_selected))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdlg = new IG$.dlg_select_ds({\n\t\t\t\t\t\t\t\t\tinstance: me.instance,\n\t\t\t\t\t\t\t\t\tdatasource: me._mc.datasource,\n\t\t\t\t\t\t\t\t\tcallback: new IG$.callBackObj(me, function(sel) {\n\t\t\t\t\t\t\t\t\t\tme._mc.datasource = sel ? {\n\t\t\t\t\t\t\t\t\t\t\tuid: sel.data.uid,\n\t\t\t\t\t\t\t\t\t\t\tname: sel.data.name\n\t\t\t\t\t\t\t\t\t\t} : null;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tif (!me._mc.datasource)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tIG$.alertmsg(ig$.appname, \"File upload will be on temporary filespaces!\", null, me, 1, \"info\", null, null, null, 0);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tme._startapp();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tIG$.checkLogin(me, dlg);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tme._startapp();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tme._mc.datasource = {\n\t\t\t\t\t\t\tuid: sdb.uid,\n\t\t\t\t\t\t\tname: sdb.name\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tme._startapp();\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!b_loading)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tIG$.alertmsg(ig$.appname, \"File upload will be on temporary filespaces!\", null, me, 1, \"info\", null, null, null, 0);\n\t\t\t\t\t\t\tme._mc.datasource = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tme._startapp();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (b_loading)\n\t\t\t\t{\n\t\t\t\t\tme._startapp();\n\t\t\t\t}\n\t\t\t}, false);\n\t\treq.send();\n\t},\n\t\n\t_startapp: function() {\n\t\tvar me = this,\n\t\t\t_m5 = $(\"#ds_files\", me.render); // me.down(\"[name=_m5]\"),\n\t\t\t// gldfls = me.down(\"[name=gldfls]\"),\n\t\t\t// dbareq = me.down(\"[name=dbareq]\");\n\t\t\n\t\t// gldfls.store.loadData([]);\n\t\t\n\t\t$.each(me._mc.datafiles, function(i, item) {\n\t\t\tvar tpl = [\n\t\t\t\t'<li class=\"list-group-item\" title=\"' + item.nodepath + '\">',\n                '    <a href=\"#\">' + item.filename + '</a>' + '',\n                '    <small class=\"text-muted\"><i class=\"fa fa-clock-o\">' + item.sheetname + '</i></small>',\n                '</li>'\n            ];\n            \n            tdiv = $(tpl.join(\"\")).appendTo(_m5);\n\t\t});\n\t\t// _m5.store.loadData(me._mc.datafiles);\n\t\t\n\t\t// dbareq.setVisible(ig$.features[\"ig_n_dataset_dba\"] !== false || !me._mc.datasource ? false : true);\n\t\t\n\t\tme._set_ds();\n\t\t\n\t\tif (me.uid)\n\t\t{\n\t\t\tme.getTbls();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tme.uploadFile();\n\t\t}\n\t},\n\t\n\t_set_ds: function() {\n\t\tvar me = this,\n\t\t\t// tbdatasource = me.down(\"[name=tbdatasource]\"),\n\t\t\tmc = me._mc;\n\t\t\t\n\t\t// tbdatasource.setText(mc && mc.datasource ? mc.datasource.name : \"InMemory\");\n\t},\n\t\n\tgetTbls: function() {\n\t\tvar me = this,\n\t\t\treq = new IG$._rpc$();\n\t\t\n\t\treq.init(me, \n\t\t\t{\n\t\t\t\tack: \"content\",\n\t\t\t\tpayload: {uid: me.uid},\n\t\t\t\tmbody: {subfolder: \"T\"}\n\t\t\t}, me, function(jdoc) {\n\t\t\t\tvar tnodes = jdoc && jdoc.children ? jdoc.children : null,\n\t\t\t\t\tm1 = $(\"#m1\", me.render), // me.down(\"[name=m1]\"),\n\t\t\t\t\tm1f = $(\"m1f\", me.render),\n\t\t\t\t\t// t_btn = me.down(\"[name=t_btn]\"),\n\t\t\t\t\t// t_btn_cnt = me.down(\"[name=t_btn_cnt]\"),\n\t\t\t\t\t// physical_name = t_btn_cnt.down(\"[name=physical_name]\"),\n\t\t\t\t\t// locale_name = t_btn_cnt.down(\"[name=locale_name]\"),\n\t\t\t\t\tdp = [],\n\t\t\t\t\tp,\n\t\t\t\t\ti;\n\t\t\t\t\n\t\t\t\tif (tnodes)\n\t\t\t\t{\n\t\t\t\t\tfor (i=0; i < tnodes.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tp = tnodes[i];\n\t\t\t\t\t\tdp.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$.each(dp, function(i, item) {\n\t\t\t\t\tvar tdiv,\n\t\t\t\t\t\ttpl = [\n\t\t\t\t\t\t\t'<li class=\"list-group-item\" title=\"' + item.nodepath + '\">',\n\t\t\t                '    <a href=\"#\">' + item.name + '</a>' + '',\n\t\t\t                '    <small class=\"text-muted\"><i class=\"fa fa-clock-o\">' + item.sheetname + '</i></small>',\n\t\t\t                '</li>'\n\t\t\t            ];\n\t\t            \n\t\t            tdiv = $(tpl.join(\"\")).appendTo(m1);\n\t\t            \n\t\t            $(\"a\", tdiv).bind(\"click\", function(e) {\n\t\t            \te.preventDefault();\n\t\t            \te.stopPropagation();\n\t\t            \t\n\t\t            \tme.load_fields(item);\n\t\t            });\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tm1f.empty();\n\t\t\t\t\n\t\t\t\tif (dp.length)\n\t\t\t\t{\n\t\t\t\t\tme.load_fields(dp[0]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// m1.store.loadData(dp);\n\t\t\t\t// m1f.store.loadData([]);\n\t\t\t\t// t_btn.setDisabled(true);\n\t\t\t\t\n\t\t\t\t// physical_name.setValue(\"\");\n\t\t\t\t// locale_name.setValue(\"\");\n\t\t\t\t// t_btn_cnt.setDisabled(true);\n\t\t\t}\n\t\t);\n\t\t\n\t\treq.send();\n\t},\n\t\n\tload_fields: function(rec) {\n\t\tvar me = this,\n\t\t\treq = new IG$._rpc$(),\n\t\t\tuid = rec.uid;\n\t\t\n\t\tif (uid)\n\t\t{\n\t\t\treq.init(me, \n\t\t\t\t{\n\t\t\t\t\tack: \"content\",\n\t\t\t\t\tpayload: {uid: uid},\n\t\t\t\t\tmbody: {subfolder: \"T\"}\n\t\t\t\t}, me, function(jdoc) {\n\t\t\t\t\tvar tnodes = jdoc && jdoc.children ? jdoc.children : null,\n\t\t\t\t\t\tm1f = $(\"#m1f\", me.render); // me.down(\"[name=m1f]\");\n\t\t\t\t\t\t// t_btn = me.down(\"[name=t_btn]\"),\n\t\t\t\t\t\t// t_btn_cnt = me.down(\"[name=t_btn_cnt]\"),\n\t\t\t\t\t\t// physical_name = t_btn_cnt.down(\"[name=physical_name]\"),\n\t\t\t\t\t\t// locale_name = t_btn_cnt.down(\"[name=locale_name]\");\n\t\t\t\t\t\t\n\t\t\t\t\t$.each(tnodes, function(i, tnode) {\n\t\t\t\t\t\ttnode.pname = tnode.attributes && tnode.attributes.attrb3 ? tnode.attributes.attrb3 : \"\"; \n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\ttnodes.sort(function(a, b) {\n\t\t\t\t\t\tif (a.pname && b.pname && a.pname.substring(0, 7) == \"column_\" && b.pname.substring(0, 7) == \"column_\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar na = parseInt(a.pname.substring(7)),\n\t\t\t\t\t\t\t\tnb = parseInt(b.pname.substring(7));\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn na - nb;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (a.pname)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (b.pname)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t$.each(tnodes, function(i, item) {\n\t\t\t\t\t\tvar tdiv,\n\t\t\t\t\t\t\ttpl = [\n\t\t\t\t\t\t\t\t'<li class=\"list-group-item\" title=\"' + item.nodepath + '\">',\n\t\t\t\t                '    <a href=\"#\">' + item.name + '</a>' + '',\n\t\t\t\t                '    <small class=\"text-muted\"><i class=\"fa fa-clock-o\">' + item.sheetname + '</i></small>',\n\t\t\t\t                '</li>'\n\t\t\t\t            ];\n\t\t\t            \n\t\t\t            tdiv = $(tpl.join(\"\")).appendTo(m1f);\n\t\t\t\t\t});\n\t\t\t\t\t// m1f.store.loadData(tnodes);\n\t\t\t\t\t// t_btn.setDisabled(false);\n\t\t\t\t\t// t_btn_cnt.setDisabled(false);\n\t\t\t\t\t\n\t\t\t\t\t// var attr = rec.get(\"attributes\");\n\t\t\t\t\t// physical_name.setValue(attr ? attr.attrb3 : \"\");\n\t\t\t\t\t// locale_name.setValue(rec.get(\"name\"));\n\t\t\t\t}\n\t\t\t);\n\t\t\t\n\t\t\treq.send();\n\t\t}\n\t}\n}"]}